{"version":3,"sources":["mavo.js"],"names":["t","e","r","s","arguments","length","n","type","apply","i","o","Array","from","splice","Object","getOwnPropertyDescriptor","writable","configurable","enumerable","get","set","defineProperty","forEach","a","test","call","prototype","toString","match","toLowerCase","isNaN","self","Bliss","document","querySelector","extend","overload","property","sources","noop","$","Node","Window","querySelectorAll","defined","create","tag","createElement","each","ready","Promise","readyState","addEventListener","Class","concat","keys","classProps","hasOwnProperty","constructor","__abstract","Error","indexOf","lazy","value","live","include","resolve","async","onload","remove","onerror","src","inside","head","fetch","TypeError","url","URL","location","data","method","headers","xhr","XMLHttpRequest","toUpperCase","hooks","run","search","body","setAttribute","open","href","user","password","console","error","setRequestHeader","removeAttribute","status","statusText","ontimeout","send","slice","reduce","Hooks","add","isArray","context","Element","subject","bliss","setProps","transition","style","transitionDuration","transitionProperty","join","once","clearTimeout","setTimeout","bind","fire","createEvent","initEvent","dispatchEvent","unbind","split","listeners","className","callback","removeEventListener","capture","setProperty","attributes","properties","events","u","c","delegate","target","closest","contents","createTextNode","appendChild","before","parentNode","insertBefore","after","nextSibling","start","firstChild","around","nodeName","content","all","$$","element","array","map","shift","HTMLElement","shy","clone","cloneNode","_","EventTarget","filter","push","b","d","m","q","x","index","description","y","z","A","B","C","D","E","G","H","operator","left","right","I","J","String","fromCharCode","K","L","j","charAt","charCodeAt","M","N","O","P","Q","S","consequent","alternate","R","substr","f","g","h","T","prec","pop","U","V","Y","argument","prefix","parseFloat","raw","W","name","X","Z","computed","object","callee","elements","version","addUnaryOp","Math","max","addBinaryOp","addLiteral","removeUnaryOp","removeBinaryOp","removeLiteral","exports","jsep","noConflict","module","parse","expr","con","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Stretchy","selectors","base","script","currentScript","resize","resizes","cs","getComputedStyle","offset","placeholder","height","boxSizing","offsetHeight","clientHeight","scrollHeight","width","offsetWidth","clientWidth","scrollLeft","scrollWidth","selectedIndex","option","textContent","options","appearance","removeChild","resizeAll","active","init","getAttribute","listener","evt","documentElement","MutationObserver","mutations","mutation","addedNodes","observe","childList","subtree","Mavo","treeBuilt","defer","selector","attribute","id","autoEdit","classList","contains","autoSave","hasAttribute","autoSaveDelay","primitive","hasChildren","not","formControl","config","Primitive","getConfig","isCollection","is","expressions","Expressions","root","Group","permissions","Permissions","backendTypes","role","updateBackend","backendObserver","Observer","records","changed","roles","record","attributeName","replace","source","load","storage","can","Functions","$url","primaryBackend","login","backend","unsavedChanges","bar","UI","Bar","activeElement","preventDefault","needsEdit","some","obj","modes","mode","setUnsavedChanges","onchange","action","trim","modeObserver","nodeloop","node","children","previousMode","getStyle","edit","destroy","debouncedSave","debounce","save","saved","requestAnimationFrame","keyCode","superKey","editing","getData","toJSON","message","Message","log","classes","dismiss","render","env","update","clear","confirm","store","then","multiple","parent","toggle","walk","done","previous","equals","Backend","mavo","format","inProgress","catch","err","reject","upload","file","path","uploadBackend","lastSaved","Date","now","ret","toggleAttribute","_storage","_primaryBackend","removeProperty","static","platform","protocol","dependencies","container","specificProperty","group","ui","arr","or","selector1","selector2","and","arr2","s1","s2","andNot","rootGroup","output","isDecentBrowser","window","Intl","Plugins","inited","updateWithin","cl","el","loaded","Set","has","pathname","readFile","reader","FileReader","result","onabort","JSON","stringify","toArray","delete","hasIntersection","arr1","every","flatten","prev","pushUnique","item","thing","getPropertyValue","revocably","comment","isRemoved","replaceChild","commentText","createComment","inViewport","getBoundingClientRect","bottom","innerHeight","top","innerWidth","scrollIntoViewIfNeeded","scrollIntoView","behavior","subset","cache","WeakSet","key","fn","delay","code","timer","args","escapeRegExp","observer","attributeFilter","attributeOldValue","oldValue","characterData","characterDataOldValue","stop","disconnect","running","sneak","res","rej","promise","iterable","resolved","rr","proxy","propagated","proto","names","existing","propagate","hash","plugins","plugin","size","responseType","response","repo","register","innerHTML","noResize","order","controls","targetHeight","label","readable","title","permission","condition","ResizeObserver","previousRect","resizeObserver","entries","contentRect","prepare","cleanup","html","avatar","logout","closed","click","prop","button","close","timeout","closeTimeout","mouseenter","mouseleave","submit","opacity","triggers","parentChanged","on","actions","off","cannot","able","current","localValue","fireTriggers","trigger","oldParent","_parent","change","setter","Formats","searchParams","responseText","serialize","serialized","put","isAuthenticated","accessToken","oAuthParams","request","req","p","encodeURIComponent","apiDomain","oAuthenticate","passive","localStorage","popup","min","screen","screenTop","screenLeft","state","authPopup","oAuth","token","oAuthLogout","removeItem","types","Remote","extends","Base","abstract","extensions","json","text","Text","getNames","me","csv","CSV","defaultOptions","header","dynamicTyping","skipEmptyLines","Papa","delimiter","meta","linebreak","aborted","errors","unparse","Format","extension","uid","maxId","nodeType","template","copies","parentGroup","fromTemplate","getProperty","normalize","collection","et","DOMExpression","isRoot","postInit","isDataNull","deleted","walker","walkUp","oldData","inPath","dataRender","dataChanged","getClosestCollection","closestCollection","isDeleted","_mode","Collection","_modes","elementContents","createDocumentFragment","childNodes","_deleted","WeakMap","prioritizePrimitive","nodes","unique","getValueAttribute","constructorOptions","mutable","vocabElement","vocab","super","DEFAULT_TYPE","find","score","expressionText","sort","prop1","prop2","reverse","datatype","mavoNode","changeEvents","getValue","editor","original","setValue","force","silent","editorValue","templateValue","_default","default","defaultObserver","initialValue","emptyValue","getEditorValue","setEditorValue","editorDefaults","savedValue","initEdit","Elements","defaultEditors","string","select","stopPropagation","dataInput","Popup","prevTabindex","tabIndex","preEdit","empty","show","Symbol","toPrimitive","presentational","safeCast","_value","humanReadable","selectedOptions","dataOnly","hide","cast","useProperty","formatNumber","namespaceURI","numberFormat","NumberFormat","maximumFractionDigits","Infinity","position","bounds","popupBounds","hidden","keyup","focus","transitionend","shown","hideCallback","defineProperties","selectorloop","attributeMatches","isSVG","mainInput","uploadEvents","clipboardData","items","kind","getAsFile","dataTransfer","files","accept","form","checked","toCheck","clicked","range","step","clientX","newValue","mod","increment","shiftKey","display","whiteSpace","datetime","date","day","month","year","hour","minute","timeZone","toLocaleString","templateElement","accepts","createItem","itemTemplate","itemData","rendered","adopt","rel","marker","bottomUp","previousIndex","hard","move","editItem","itemControls","Itembar","addButton","tagName","containerSelector","dragula","getDragula","fragment","collections","isCompatible","_mutable","containers","isContainer","moves","handle","next","previousElementSibling","lastElementChild","oldIndex","nextElementSibling","closestItem","cancel","dragulas","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","newItem","keydown","Expression","expression","eval","function","compile","identifiers","exception","info","changedBy","serializers","transformations","Script","getOperatorName","details","operators","nodeLeft","unshift","rewrite","Function","LogicalExpression","BinaryExpression","Syntax","end","regex","RegExp","str","lastIndex","tokenize","exec","substring","syntax","ESCAPE","whitespace","splitText","lastChild","parsed","event","parentEnv","fallback","traverse","scheduled","PROPERTYCHANGE_THROTTLE","extract","directives","child","directive","Proxy","_hidden","parentIf","childIfs","parentValue","childProperties","childIf","originalAttribute","numbers","number","toDate","timezone","local","localTimezone","minutes","abs","hours","sign","twodigits","getDateComponent","component","locale","lang","hour12","getDay","Number","shortname","twodigit","sum","average","count","round","num","decimals","isFinite","useGrouping","iff","iftrue","iffalse","haystack","needle","replacement","iterations","needleRegex","counter","len","starts","ends","glue","idify","identifier","$0","$1","$2","uppercase","lowercase","$now","weekday","second","time","seconds","floor","days","weeks","months","years","getTimezoneOffset","pair","addUnaryOperator","operand","scalar","addBinaryOperator","symbol","symbols","identity","operands","logical","op","dateA","dateB","getNumericalOperands","da","db","aliases","subtract","multiply","divide","lt","gt","eq","alias","_Trap","functions","propertyL","minimumIntegerDigits","fixShareURL","getURL","shareInfo","getUser","username","email","display_name","profile_photo_url","path_lower","host","hostname","parsedURL","parseURL","apiCall","atob","dataURL","base64","media","isEncoded","fileInfo","commit","sha","repoCall","fileCall","commitPrefix","repoInfo","btoa","canPush","forkInfo","full_name","until","ref","branch","prs","pullRequest","previewURL","notice","prInfo","html_url","edits","default_branch","avatar_url","pagesInfo","unescape","decodeURIComponent","escape"],"mappings":"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","file":"../mavo.min.js","sourcesContent":["!function(){\"use strict\";function t(e,r,s){return r=void 0===r?1:r,s=s||r+1,1>=s-r?function(){if(arguments.length<=r||\"string\"===n.type(arguments[r]))return e.apply(this,arguments);var t,s=arguments[r];for(var i in s){var o=Array.from(arguments);o.splice(r,1,i,s[i]),t=e.apply(this,o)}return t}:t(t(e,r+1,s),r,s-1)}function e(t,n,s){var i=r(s);if(\"string\"===i){var o=Object.getOwnPropertyDescriptor(n,s);!o||o.writable&&o.configurable&&o.enumerable&&!o.get&&!o.set?t[s]=n[s]:(delete t[s],Object.defineProperty(t,s,o))}else if(\"array\"===i)s.forEach(function(r){r in n&&e(t,n,r)});else for(var a in n)s&&(\"regexp\"===i&&!s.test(a)||\"function\"===i&&!s.call(n,a))||e(t,n,a);return t}function r(t){if(null===t)return\"null\";if(void 0===t)return\"undefined\";var e=(Object.prototype.toString.call(t).match(/^\\[object\\s+(.*?)\\]$/)[1]||\"\").toLowerCase();return\"number\"==e&&isNaN(t)?\"nan\":e}var n=self.Bliss=e(function(t,e){return 2==arguments.length&&!e||!t?null:\"string\"===n.type(t)?(e||document).querySelector(t):t||null},self.Bliss);e(n,{extend:e,overload:t,type:r,property:n.property||\"_\",sources:{},noop:function(){},$:function(t,e){return t instanceof Node||t instanceof Window?[t]:2!=arguments.length||e?Array.from(\"string\"==typeof t?(e||document).querySelectorAll(t):t||[]):[]},defined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},create:function(t,e){return t instanceof Node?n.set(t,e):(1===arguments.length&&(\"string\"===n.type(t)?e={}:(e=t,t=e.tag,e=n.extend({},e,function(t){return\"tag\"!==t}))),n.set(document.createElement(t||\"div\"),e))},each:function(t,e,r){r=r||{};for(var n in t)r[n]=e.call(t,n,t[n]);return r},ready:function(t){return t=t||document,new Promise(function(e,r){\"loading\"!==t.readyState?e():t.addEventListener(\"DOMContentLoaded\",function(){e()})})},Class:function(t){var e,r=[\"constructor\",\"extends\",\"abstract\",\"static\"].concat(Object.keys(n.classProps)),s=t.hasOwnProperty(\"constructor\")?t.constructor:n.noop;2==arguments.length?(e=arguments[0],t=arguments[1]):(e=function(){if(this.constructor.__abstract&&this.constructor===e)throw new Error(\"Abstract classes cannot be directly instantiated.\");e[\"super\"]&&e[\"super\"].apply(this,arguments),s.apply(this,arguments)},e[\"super\"]=t[\"extends\"]||null,e.prototype=n.extend(Object.create(e[\"super\"]?e[\"super\"].prototype:Object),{constructor:e}),e.prototype[\"super\"]=e[\"super\"]?e[\"super\"].prototype:null,e.__abstract=!!t[\"abstract\"]);var i=function(t){return this.hasOwnProperty(t)&&-1===r.indexOf(t)};if(t[\"static\"]){n.extend(e,t[\"static\"],i);for(var o in n.classProps)o in t[\"static\"]&&n.classProps[o](e,t[\"static\"][o])}n.extend(e.prototype,t,i);for(var o in n.classProps)o in t&&n.classProps[o](e.prototype,t[o]);return e},classProps:{lazy:t(function(t,e,r){return Object.defineProperty(t,e,{get:function(){var t=r.call(this);return Object.defineProperty(this,e,{value:t,configurable:!0,enumerable:!0,writable:!0}),t},set:function(t){Object.defineProperty(this,e,{value:t,configurable:!0,enumerable:!0,writable:!0})},configurable:!0,enumerable:!0}),t}),live:t(function(t,e,r){return\"function\"===n.type(r)&&(r={set:r}),Object.defineProperty(t,e,{get:function(){var t=this[\"_\"+e],n=r.get&&r.get.call(this,t);return void 0!==n?n:t},set:function(t){var n=this[\"_\"+e],s=r.set&&r.set.call(this,t,n);this[\"_\"+e]=void 0!==s?s:t},configurable:r.configurable,enumerable:r.enumerable}),t})},include:function(){var t=arguments[arguments.length-1],e=2===arguments.length?arguments[0]:!1,r=document.createElement(\"script\");return e?Promise.resolve():new Promise(function(e,s){n.set(r,{async:!0,onload:function(){e(),n.remove(r)},onerror:function(){s()},src:t,inside:document.head})})},fetch:function(t,r){if(!t)throw new TypeError(\"URL parameter is mandatory and cannot be \"+t);var s=e({url:new URL(t,location),data:\"\",method:\"GET\",headers:{},xhr:new XMLHttpRequest},r);s.method=s.method.toUpperCase(),n.hooks.run(\"fetch-args\",s),\"GET\"===s.method&&s.data&&(s.url.search+=s.data),document.body.setAttribute(\"data-loading\",s.url),s.xhr.open(s.method,s.url.href,s.async!==!1,s.user,s.password);for(var i in r)if(i in s.xhr)try{s.xhr[i]=r[i]}catch(o){self.console&&console.error(o)}\"GET\"===s.method||s.headers[\"Content-type\"]||s.headers[\"Content-Type\"]||s.xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");for(var a in s.headers)s.xhr.setRequestHeader(a,s.headers[a]);return new Promise(function(t,e){s.xhr.onload=function(){document.body.removeAttribute(\"data-loading\"),0===s.xhr.status||s.xhr.status>=200&&s.xhr.status<300||304===s.xhr.status?t(s.xhr):e(n.extend(Error(s.xhr.statusText),{xhr:s.xhr,get status(){return this.xhr.status}}))},s.xhr.onerror=function(){document.body.removeAttribute(\"data-loading\"),e(n.extend(Error(\"Network Error\"),{xhr:s.xhr}))},s.xhr.ontimeout=function(){document.body.removeAttribute(\"data-loading\"),e(n.extend(Error(\"Network Timeout\"),{xhr:s.xhr}))},s.xhr.send(\"GET\"===s.method?null:s.data)})},value:function(t){var e=\"string\"!==n.type(t);return n.$(arguments).slice(+e).reduce(function(t,e){return t&&t[e]},e?t:self)}}),n.Hooks=new n.Class({add:function(t,e,r){if(\"string\"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach(function(t){this[t]=this[t]||[],e&&this[t][r?\"unshift\":\"push\"](e)},this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])},run:function(t,e){this[t]=this[t]||[],this[t].forEach(function(t){t.call(e&&e.context?e.context:e,e)})}}),n.hooks=new n.Hooks;var s=n.property;n.Element=function(t){this.subject=t,this.data={},this.bliss={}},n.Element.prototype={set:t(function(t,e){t in n.setProps?n.setProps[t].call(this,e):t in this?this[t]=e:this.setAttribute(t,e)},0),transition:function(t,e){return e=+e||400,new Promise(function(r,s){if(\"transition\"in this.style){var i=n.extend({},this.style,/^transition(Duration|Property)$/);n.style(this,{transitionDuration:(e||400)+\"ms\",transitionProperty:Object.keys(t).join(\", \")}),n.once(this,\"transitionend\",function(){clearTimeout(o),n.style(this,i),r(this)});var o=setTimeout(r,e+50,this);n.style(this,t)}else n.style(this,t),r(this)}.bind(this))},fire:function(t,e){var r=document.createEvent(\"HTMLEvents\");return r.initEvent(t,!0,!0),this.dispatchEvent(n.extend(r,e))},unbind:t(function(t,e){(t||\"\").split(/\\s+/).forEach(function(t){if(s in this&&(t.indexOf(\".\")>-1||!e)){t=(t||\"\").split(\".\");var r=t[1];t=t[0];var n=this[s].bliss.listeners=this[s].bliss.listeners||{};for(var i in n)if(!t||i===t)for(var o,a=0;o=n[i][a];a++)r&&r!==o.className||e&&e!==o.callback||(this.removeEventListener(i,o.callback,o.capture),a--)}else this.removeEventListener(t,e)},this)},0)},n.setProps={style:function(t){for(var e in t)e in this.style?this.style[e]=t[e]:this.style.setProperty(e,t[e])},attributes:function(t){for(var e in t)this.setAttribute(e,t[e])},properties:function(t){n.extend(this,t)},events:function(t){if(t&&t.addEventListener){var e=this;if(t[s]&&t[s].bliss){var r=t[s].bliss.listeners;for(var i in r)r[i].forEach(function(t){e.addEventListener(i,t.callback,t.capture)})}for(var o in t)0===o.indexOf(\"on\")&&(this[o]=t[o])}else if(arguments.length>1&&\"string\"===n.type(t)){var a=arguments[1],u=arguments[2];t.split(/\\s+/).forEach(function(t){this.addEventListener(t,a,u)},this)}else for(var c in t)n.events(this,c,t[c])},once:t(function(t,e){t=t.split(/\\s+/);var r=this,n=function(){return t.forEach(function(t){r.removeEventListener(t,n)}),e.apply(r,arguments)};t.forEach(function(t){r.addEventListener(t,n)})},0),delegate:t(function(t,e,r){this.addEventListener(t,function(t){t.target.closest(e)&&r.call(this,t)})},0,2),contents:function(t){(t||0===t)&&(Array.isArray(t)?t:[t]).forEach(function(t){var e=n.type(t);/^(string|number)$/.test(e)?t=document.createTextNode(t+\"\"):\"object\"===e&&(t=n.create(t)),t instanceof Node&&this.appendChild(t)},this)},inside:function(t){t.appendChild(this)},before:function(t){t.parentNode.insertBefore(this,t)},after:function(t){t.parentNode.insertBefore(this,t.nextSibling)},start:function(t){t.insertBefore(this,t.firstChild)},around:function(t){t.parentNode&&n.before(this,t),(/^template$/i.test(this.nodeName)?this.content||this:this).appendChild(t)}},n.Array=function(t){this.subject=t},n.Array.prototype={all:function(t){var e=$$(arguments).slice(1);return this[t].apply(this,e)}},n.add=t(function(t,e,r,s){r=n.extend({$:!0,element:!0,array:!0},r),\"function\"==n.type(e)&&(!r.element||t in n.Element.prototype&&s||(n.Element.prototype[t]=function(){return this.subject&&n.defined(e.apply(this.subject,arguments),this.subject)}),!r.array||t in n.Array.prototype&&s||(n.Array.prototype[t]=function(){var t=arguments;return this.subject.map(function(r){return r&&n.defined(e.apply(r,t),r)})}),r.$&&(n.sources[t]=n[t]=e,(r.array||r.element)&&(n[t]=function(){var e=[].slice.apply(arguments),s=e.shift(),i=r.array&&Array.isArray(s)?\"Array\":\"Element\";return n[i].prototype[t].apply({subject:s},e)})))},0),n.add(n.Array.prototype,{element:!1}),n.add(n.Element.prototype),n.add(n.setProps),n.add(n.classProps,{element:!1,array:!1});var i=document.createElement(\"_\");n.add(n.extend({},HTMLElement.prototype,function(t){return\"function\"===n.type(i[t])}),null,!0)}(),function(t){\"use strict\";if(Bliss&&!Bliss.shy){var e=Bliss.property;if(t.add({clone:function(){var e=this.cloneNode(!0),r=t.$(\"*\",e).concat(e);return t.$(\"*\",this).concat(this).forEach(function(e,n,s){t.events(r[n],e),r[n]._.data=t.extend({},e._.data)}),e}},{array:!1}),Object.defineProperty(Node.prototype,e,{get:function o(){return Object.defineProperty(Node.prototype,e,{get:void 0}),Object.defineProperty(this,e,{value:new t.Element(this)}),Object.defineProperty(Node.prototype,e,{get:o}),this[e]},configurable:!0}),Object.defineProperty(Array.prototype,e,{get:function(){return Object.defineProperty(this,e,{value:new t.Array(this)}),this[e]},configurable:!0}),self.EventTarget&&\"addEventListener\"in EventTarget.prototype){var r=EventTarget.prototype.addEventListener,n=EventTarget.prototype.removeEventListener,s=function(t,e,r){return r.callback===t&&r.capture==e},i=function(){return!s.apply(this,arguments)};EventTarget.prototype.addEventListener=function(t,n,i){if(this&&this[e]&&this[e].bliss&&n){var o=this[e].bliss.listeners=this[e].bliss.listeners||{};if(t.indexOf(\".\")>-1){t=t.split(\".\");var a=t[1];t=t[0]}o[t]=o[t]||[],0===o[t].filter(s.bind(null,n,i)).length&&o[t].push({callback:n,capture:i,className:a})}return r.call(this,t,n,i)},EventTarget.prototype.removeEventListener=function(t,r,s){if(this&&this[e]&&this[e].bliss&&r){var o=this[e].bliss.listeners=this[e].bliss.listeners||{};o[t]&&(o[t]=o[t].filter(i.bind(null,r,s)))}return n.call(this,t,r,s)}}self.$=self.$||t,self.$$=self.$$||t.$}}(Bliss);\n/* jsep v0.3.1 (http://jsep.from.so/) */\n!function(a){\"use strict\";var b=\"Compound\",c=\"Identifier\",d=\"MemberExpression\",e=\"Literal\",f=\"ThisExpression\",g=\"CallExpression\",h=\"UnaryExpression\",i=\"BinaryExpression\",j=\"LogicalExpression\",k=\"ConditionalExpression\",l=\"ArrayExpression\",m=46,n=44,o=39,p=34,q=40,r=41,s=91,t=93,u=63,v=59,w=58,x=function(a,b){var c=new Error(a+\" at character \"+b);throw c.index=b,c.description=a,c},y=!0,z={\"-\":y,\"!\":y,\"~\":y,\"+\":y},A={\"||\":1,\"&&\":2,\"|\":3,\"^\":4,\"&\":5,\"==\":6,\"!=\":6,\"===\":6,\"!==\":6,\"<\":7,\">\":7,\"<=\":7,\">=\":7,\"<<\":8,\">>\":8,\">>>\":8,\"+\":9,\"-\":9,\"*\":10,\"/\":10,\"%\":10},B=function(a){var b,c=0;for(var d in a)(b=d.length)>c&&a.hasOwnProperty(d)&&(c=b);return c},C=B(z),D=B(A),E={\"true\":!0,\"false\":!1,\"null\":null},F=\"this\",G=function(a){return A[a]||0},H=function(a,b,c){var d=\"||\"===a||\"&&\"===a?j:i;return{type:d,operator:a,left:b,right:c}},I=function(a){return a>=48&&a<=57},J=function(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=128&&!A[String.fromCharCode(a)]},K=function(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=48&&a<=57||a>=128&&!A[String.fromCharCode(a)]},L=function(a){for(var i,j,y=0,B=a.charAt,L=a.charCodeAt,M=function(b){return B.call(a,b)},N=function(b){return L.call(a,b)},O=a.length,P=function(){for(var a=N(y);32===a||9===a;)a=N(++y)},Q=function(){var a,b,c=S();return P(),N(y)!==u?c:(y++,a=Q(),a||x(\"Expected expression\",y),P(),N(y)===w?(y++,b=Q(),b||x(\"Expected expression\",y),{type:k,test:c,consequent:a,alternate:b}):void x(\"Expected :\",y))},R=function(){P();for(var b=a.substr(y,D),c=b.length;c>0;){if(A.hasOwnProperty(b))return y+=c,b;b=b.substr(0,--c)}return!1},S=function(){var a,b,c,d,e,f,g,h;if(f=T(),b=R(),!b)return f;for(e={value:b,prec:G(b)},g=T(),g||x(\"Expected expression after \"+b,y),d=[f,e,g];(b=R())&&(c=G(b),0!==c);){for(e={value:b,prec:c};d.length>2&&c<=d[d.length-2].prec;)g=d.pop(),b=d.pop().value,f=d.pop(),a=H(b,f,g),d.push(a);a=T(),a||x(\"Expected expression after \"+b,y),d.push(e,a)}for(h=d.length-1,a=d[h];h>1;)a=H(d[h-1].value,d[h-2],a),h-=2;return a},T=function(){var b,c,d;if(P(),b=N(y),I(b)||b===m)return U();if(b===o||b===p)return V();if(J(b)||b===q)return Y();if(b===s)return $();for(c=a.substr(y,C),d=c.length;d>0;){if(z.hasOwnProperty(c))return y+=d,{type:h,operator:c,argument:T(),prefix:!0};c=c.substr(0,--d)}return!1},U=function(){for(var a,b,c=\"\";I(N(y));)c+=M(y++);if(N(y)===m)for(c+=M(y++);I(N(y));)c+=M(y++);if(a=M(y),\"e\"===a||\"E\"===a){for(c+=M(y++),a=M(y),\"+\"!==a&&\"-\"!==a||(c+=M(y++));I(N(y));)c+=M(y++);I(N(y-1))||x(\"Expected exponent (\"+c+M(y)+\")\",y)}return b=N(y),J(b)?x(\"Variable names cannot start with a number (\"+c+M(y)+\")\",y):b===m&&x(\"Unexpected period\",y),{type:e,value:parseFloat(c),raw:c}},V=function(){for(var a,b=\"\",c=M(y++),d=!1;y<O;){if(a=M(y++),a===c){d=!0;break}if(\"\\\\\"===a)switch(a=M(y++)){case\"n\":b+=\"\\n\";break;case\"r\":b+=\"\\r\";break;case\"t\":b+=\"\\t\";break;case\"b\":b+=\"\\b\";break;case\"f\":b+=\"\\f\";break;case\"v\":b+=\"\\x0B\";break;default:b+=\"\\\\\"+a}else b+=a}return d||x('Unclosed quote after \"'+b+'\"',y),{type:e,value:b,raw:c+b+c}},W=function(){var b,d=N(y),g=y;for(J(d)?y++:x(\"Unexpected \"+M(y),y);y<O&&(d=N(y),K(d));)y++;return b=a.slice(g,y),E.hasOwnProperty(b)?{type:e,value:E[b],raw:b}:b===F?{type:f}:{type:c,name:b}},X=function(a){for(var c,d,e=[],f=!1;y<O;){if(P(),c=N(y),c===a){f=!0,y++;break}c===n?y++:(d=Q(),d&&d.type!==b||x(\"Expected comma\",y),e.push(d))}return f||x(\"Expected \"+String.fromCharCode(a),y),e},Y=function(){var a,b;for(a=N(y),b=a===q?Z():W(),P(),a=N(y);a===m||a===s||a===q;)y++,a===m?(P(),b={type:d,computed:!1,object:b,property:W()}):a===s?(b={type:d,computed:!0,object:b,property:Q()},P(),a=N(y),a!==t&&x(\"Unclosed [\",y),y++):a===q&&(b={type:g,arguments:X(r),callee:b}),P(),a=N(y);return b},Z=function(){y++;var a=Q();return P(),N(y)===r?(y++,a):void x(\"Unclosed (\",y)},$=function(){return y++,{type:l,elements:X(t)}},_=[];y<O;)i=N(y),i===v||i===n?y++:(j=Q())?_.push(j):y<O&&x('Unexpected \"'+M(y)+'\"',y);return 1===_.length?_[0]:{type:b,body:_}};if(L.version=\"0.3.1\",L.toString=function(){return\"JavaScript Expression Parser (JSEP) v\"+L.version},L.addUnaryOp=function(a){return C=Math.max(a.length,C),z[a]=y,this},L.addBinaryOp=function(a,b){return D=Math.max(a.length,D),A[a]=b,this},L.addLiteral=function(a,b){return E[a]=b,this},L.removeUnaryOp=function(a){return delete z[a],a.length===C&&(C=B(z)),this},L.removeBinaryOp=function(a){return delete A[a],a.length===D&&(D=B(A)),this},L.removeLiteral=function(a){return delete E[a],this},\"undefined\"==typeof exports){var M=a.jsep;a.jsep=L,L.noConflict=function(){return a.jsep===L&&(a.jsep=M),L}}else\"undefined\"!=typeof module&&module.exports?exports=module.exports=L:exports.parse=L}(this);\n//# sourceMappingURL=jsep.min.js.map\n/*\n * Stretchy: Form element autosizing, the way it should be.\n * by Lea Verou http://lea.verou.me\n * MIT license\n */\n(function() {\n\nif (!self.Element) {\n\treturn; // super old browser\n}\n\nif (!Element.prototype.matches) {\n\tElement.prototype.matches = Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || null;\n}\n\nif (!Element.prototype.matches) {\n\treturn;\n}\n\nfunction $$(expr, con) {\n\treturn expr instanceof Node || expr instanceof Window? [expr] :\n\t       [].slice.call(typeof expr == \"string\"? (con || document).querySelectorAll(expr) : expr || []);\n}\n\nvar _ = self.Stretchy = {\n\tselectors: {\n\t\tbase: 'textarea, select:not([size]), input:not([type]), input[type=\"' + \"text url email tel\".split(\" \").join('\"], input[type=\"') + '\"]',\n\t\tfilter: \"*\"\n\t},\n\n\t// Script element this was included with, if any\n\tscript: document.currentScript || $$(\"script\").pop(),\n\n\t// Autosize one element. The core of Stretchy.\n\tresize: function(element) {\n\t\tif (!_.resizes(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cs = getComputedStyle(element);\n\t\tvar offset = 0;\n\n\t\tif (!element.value && element.placeholder) {\n\t\t\tvar empty = true;\n\t\t\telement.value = element.placeholder;\n\t\t}\n\n\t\tvar type = element.nodeName.toLowerCase();\n\n\t\tif (type == \"textarea\") {\n\t\t\telement.style.height = \"0\";\n\n\t\t\tif (cs.boxSizing == \"border-box\") {\n\t\t\t\toffset = element.offsetHeight;\n\t\t\t}\n\t\t\telse if (cs.boxSizing == \"content-box\") {\n\t\t\t\toffset = -element.clientHeight;\n\t\t\t}\n\n\t\t\telement.style.height = element.scrollHeight + offset + \"px\";\n\t\t}\n\t\telse if(type == \"input\") {\n\t\t\t// First test that it is actually visible, otherwise all measurements are off\n\t\t\telement.style.width = \"1000px\";\n\n\t\t\tif (element.offsetWidth) {\n\t\t\t\telement.style.width = \"0\";\n\n\t\t\t\tif (cs.boxSizing == \"border-box\") {\n\t\t\t\t\toffset = element.offsetWidth;\n\t\t\t\t}\n\t\t\t\telse if (cs.boxSizing == \"padding-box\") {\n\t\t\t\t\toffset = element.clientWidth;\n\t\t\t\t}\n\n\t\t\t\t// Safari misreports scrollWidth, so we will instead set scrollLeft to a\n\t\t\t\t// huge number, and read that back to see what it was clipped to\n\t\t\t\telement.scrollLeft = 1e+10;\n\n\t\t\t\tvar width = Math.max(element.scrollLeft + offset, element.scrollWidth - element.clientWidth);\n\n\t\t\t\telement.style.width = width + \"px\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Element is invisible, just set to something reasonable\n\t\t\t\telement.style.width = element.value.length + 1 + \"ch\";\n\t\t\t}\n\t\t}\n\t\telse if (type == \"select\") {\n\t\t\tvar selectedIndex = element.selectedIndex > 0? element.selectedIndex : 0;\n\n\t\t\t// Need to use dummy element to measure :(\n\t\t\tvar option = document.createElement(\"_\");\n\t\t\toption.textContent = element.options[selectedIndex].textContent;\n\t\t\telement.parentNode.insertBefore(option, element.nextSibling);\n\n\t\t\t// The name of the appearance property, as it might be prefixed\n\t\t\tvar appearance;\n\n\t\t\tfor (var property in cs) {\n\t\t\t\tvar value = cs[property];\n\t\t\t\tif (!/^(width|webkitLogicalWidth|length)$/.test(property) && typeof value == \"string\") {\n\t\t\t\t\t//console.log(property, option.offsetWidth, cs[property]);\n\t\t\t\t\toption.style[property] = value;\n\n\t\t\t\t\tif (/appearance$/i.test(property)) {\n\t\t\t\t\t\tappearance = property;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toption.style.width = \"\";\n\n\t\t\tif (option.offsetWidth > 0) {\n\t\t\t\telement.style.width = option.offsetWidth + \"px\";\n\n\t\t\t\tif (!cs[appearance] || cs[appearance] !== \"none\") {\n\t\t\t\t\t// Account for arrow\n\t\t\t\t\telement.style.width = \"calc(\" + element.style.width + \" + 2em)\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toption.parentNode.removeChild(option);\n\t\t\toption = null;\n\t\t}\n\n\t\tif (empty) {\n\t\t\telement.value = \"\";\n\t\t}\n\t},\n\n\t// Autosize multiple elements\n\tresizeAll: function(elements) {\n\t\t$$(elements || _.selectors.base).forEach(function (element) {\n\t\t\t_.resize(element);\n\t\t});\n\t},\n\n\tactive: true,\n\n\t// Will stretchy do anything for this element?\n\tresizes: function(element) {\n\t\treturn element &&\n\t\t       element.parentNode &&\n\t\t       element.matches &&\n\t\t       element.matches(_.selectors.base) &&\n\t\t       element.matches(_.selectors.filter);\n\t},\n\n\tinit: function(){\n\t\t_.selectors.filter = _.script.getAttribute(\"data-filter\") ||\n\t\t                     ($$(\"[data-stretchy-filter]\").pop() || document.body).getAttribute(\"data-stretchy-filter\") || Stretchy.selectors.filter || \"*\";\n\n\t\t_.resizeAll();\n\t},\n\n\t$$: $$\n};\n\n// Autosize all elements once the DOM is loaded\n\n// DOM already loaded?\nif (document.readyState !== \"loading\") {\n\t_.init();\n}\nelse {\n\t// Wait for it\n\tdocument.addEventListener(\"DOMContentLoaded\", _.init);\n}\n\n// Listen for changes\nvar listener = function(evt) {\n\tif (_.active) {\n\t\t_.resize(evt.target);\n\t}\n};\n\ndocument.documentElement.addEventListener(\"input\", listener);\n\n// Firefox fires a change event instead of an input event\ndocument.documentElement.addEventListener(\"change\", listener);\n\n// Listen for new elements\nif (self.MutationObserver) {\n\t(new MutationObserver(function(mutations) {\n\t\tif (_.active) {\n\t\t\tmutations.forEach(function(mutation) {\n\t\t\t\tif (mutation.type == \"childList\") {\n\t\t\t\t\tStretchy.resizeAll(mutation.addedNodes);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})).observe(document.documentElement, {\n\t\tchildList: true,\n\t\tsubtree: true\n\t});\n}\n\n})();\n\n(function ($, $$) {\n\nvar _ = self.Mavo = $.Class({\n\tconstructor: function (element) {\n\t\tthis.treeBuilt = Mavo.defer();\n\n\t\tthis.element = element;\n\n\t\t// Index among other mavos in the page, 1 is first\n\t\tthis.index = _.length + 1;\n\t\tObject.defineProperty(_.all, this.index - 1, {value: this});\n\n\t\t// Convert any data-mv-* attributes to mv-*\n\t\tvar selector = _.attributes.map(attribute => `[data-${attribute}]`).join(\", \");\n\n\t\t[this.element, ...$$(selector, this.element)].forEach(element => {\n\t\t\tfor (let attribute of _.attributes) {\n\t\t\t\tlet value = element.getAttribute(\"data-\" + attribute);\n\n\t\t\t\tif (value !== null) {\n\t\t\t\t\telement.setAttribute(attribute, value);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Assign a unique (for the page) id to this mavo instance\n\t\tthis.id = Mavo.getAttribute(this.element, \"mv-app\", \"id\") || `mavo${this.index}`;\n\n\t\tif (this.id in _.all) {\n\t\t\t// Duplicate app name\n\t\t\tfor (var i=2; this.id + i in _.all; i++) {}\n\t\t\tthis.id = this.id + i;\n\t\t}\n\n\t\t_.all[this.id] = this;\n\t\tthis.element.setAttribute(\"mv-app\", this.id);\n\n\t\t// Should we start in edit mode?\n\t\tthis.autoEdit = this.element.classList.contains(\"mv-autoedit\");\n\n\t\t// Should we save automatically?\n\t\tthis.autoSave = this.element.hasAttribute(\"mv-autosave\");\n\t\tthis.autoSaveDelay = (this.element.getAttribute(\"mv-autosave\") || 3) * 1000;\n\n\t\tthis.element.setAttribute(\"typeof\", \"\");\n\n\t\tMavo.hooks.run(\"init-start\", this);\n\n\t\t// Apply heuristic for groups\n\t\tfor (var element of $$(_.selectors.primitive, this.element)) {\n\t\t\tvar hasChildren = $(`${_.selectors.not(_.selectors.formControl)}, ${_.selectors.property}`, element);\n\n\t\t\tif (hasChildren) {\n\t\t\t\tvar config = Mavo.Primitive.getConfig(element);\n\t\t\t\tvar isCollection = Mavo.is(\"multiple\", element);\n\n\t\t\t\tif (isCollection || !config.attribute && !config.hasChildren) {\n\t\t\t\t\telement.setAttribute(\"typeof\", \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.expressions = new Mavo.Expressions(this);\n\n\t\t// Build mavo objects\n\t\tMavo.hooks.run(\"init-tree-before\", this);\n\n\t\tthis.root = new Mavo.Group(this.element, this);\n\t\tthis.treeBuilt.resolve();\n\n\t\tMavo.hooks.run(\"init-tree-after\", this);\n\n\t\tthis.permissions = new Mavo.Permissions();\n\n\t\tvar backendTypes = [\"source\", \"storage\", \"init\"]; // order is significant!\n\n\t\t// Figure out backends for storage, data reads, and initialization respectively\n\t\tfor (let role of backendTypes) {\n\t\t\tthis.updateBackend(role);\n\t\t}\n\n\t\tthis.backendObserver = new Mavo.Observer(this.element, backendTypes.map(role => \"mv-\" + role), records => {\n\t\t\tvar changed = {};\n\n\t\t\tvar roles = records.map(record => {\n\t\t\t\tvar role = record.attributeName.replace(/^mv-/, \"\");\n\t\t\t\tchanged[role] = this.updateBackend(role);\n\n\t\t\t\treturn role;\n\t\t\t});\n\n\t\t\t// Do we need to re-load data?\n\t\t\tif (changed.source) {  // if source changes, always reload\n\t\t\t\tthis.load();\n\t\t\t}\n\t\t\telse if (!this.source) {\n\t\t\t\tif (changed.storage || changed.init && !this.root.data) {\n\t\t\t\t\tthis.load();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.permissions.can(\"login\", () => {\n\t\t\t// We also support a URL param to trigger login, in case the user doesn't want visible login UI\n\t\t\tif (\"login\" in Mavo.Functions.$url && this.index == 1 || this.id + \"-login\" in Mavo.Functions.$url) {\n\t\t\t\tthis.primaryBackend.login();\n\t\t\t}\n\t\t});\n\n\t\t// Update login status\n\t\tthis.element.addEventListener(\"mavo:login.mavo\", evt => {\n\t\t\tif (evt.backend == (this.source || this.storage)) {\n\t\t\t\t// If last time we rendered we got nothing, maybe now we'll have better luck?\n\t\t\t\tif (!this.root.data && !this.unsavedChanges) {\n\t\t\t\t\tthis.load();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.bar = new Mavo.UI.Bar(this);\n\n\t\t// Prevent editing properties inside <summary> to open and close the summary (fix bug #82)\n\t\tif ($(\"summary [property]:not([typeof])\")) {\n\t\t\tthis.element.addEventListener(\"click\", evt => {\n\t\t\t\tif (evt.target != document.activeElement) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Is there any control that requires an edit button?\n\t\tthis.needsEdit = this.some(obj => obj != this.root && !obj.modes && obj.mode == \"read\");\n\n\t\tthis.setUnsavedChanges(false);\n\n\t\tthis.permissions.onchange(({action, value}) => {\n\t\t\tvar permissions = this.element.getAttribute(\"mv-permissions\") || \"\";\n\t\t\tpermissions = permissions.trim().split(/\\s+/).filter(a => a != action);\n\n\t\t\tif (value) {\n\t\t\t\tpermissions.push(action);\n\t\t\t}\n\n\t\t\tthis.element.setAttribute(\"mv-permissions\", permissions.join(\" \"));\n\t\t});\n\n\t\tif (this.needsEdit) {\n\t\t\tthis.permissions.can([\"edit\", \"add\", \"delete\"], () => {\n\t\t\t\t// Observe entire tree for mv-mode changes\n\t\t\t\tthis.modeObserver = new Mavo.Observer(this.element, \"mv-mode\", records => {\n\t\t\t\t\tfor (let record of records) {\n\t\t\t\t\t\tlet element = record.target;\n\n\t\t\t\t\t\tnodeloop: for (let node of _.Node.children(element)) {\n\t\t\t\t\t\t\tlet previousMode = node.mode, mode;\n\n\t\t\t\t\t\t\tif (node.element == element) {\n\t\t\t\t\t\t\t\t// If attribute set directly on a Mavo node, then it forces it into that mode\n\t\t\t\t\t\t\t\t// otherwise, descendant nodes still inherit, unless they are also mode-restricted\n\t\t\t\t\t\t\t\tmode = node.element.getAttribute(\"mv-mode\");\n\t\t\t\t\t\t\t\tnode.modes = mode;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Inherited\n\t\t\t\t\t\t\t\tif (node.modes) {\n\t\t\t\t\t\t\t\t\t// Mode-restricted, we cannot change to the other mode\n\t\t\t\t\t\t\t\t\tcontinue nodeloop;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tmode = _.getStyle(node.element.parentNode, \"--mv-mode\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnode.mode = mode;\n\n\t\t\t\t\t\t\tif (previousMode != node.mode) {\n\t\t\t\t\t\t\t\tnode[node.mode == \"edit\"? \"edit\" : \"done\"]();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {subtree: true});\n\n\t\t\t\tif (this.autoEdit) {\n\t\t\t\t\tthis.edit();\n\t\t\t\t}\n\t\t\t}, () => { // cannot\n\t\t\t\tthis.modeObserver && this.modeObserver.destroy();\n\t\t\t});\n\t\t}\n\n\t\tif (this.storage || this.source) {\n\t\t\t// Fetch existing data\n\t\t\tthis.permissions.can(\"read\", () => this.load());\n\t\t}\n\t\telse {\n\t\t\t// No storage or source\n\t\t\t$.fire(this.element, \"mavo:load\");\n\t\t}\n\n\t\tthis.permissions.can(\"save\", () => {\n\t\t\tif (this.autoSave) {\n\t\t\t\tthis.element.addEventListener(\"mavo:load.mavo:autosave\", evt => {\n\t\t\t\t\tvar debouncedSave = _.debounce(() => {\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}, this.autoSaveDelay);\n\n\t\t\t\t\tvar callback = evt => {\n\t\t\t\t\t\tif (evt.node.saved) {\n\t\t\t\t\t\t\tdebouncedSave();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\tthis.permissions.can(\"save\", () => {\n\t\t\t\t\t\t\tthis.element.addEventListener(\"mavo:datachange.mavo:autosave\", callback);\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tthis.element.removeEventListener(\"mavo:datachange.mavo:autosave\", callback);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Ctrl + S or Cmd + S to save\n\t\t\tthis.element.addEventListener(\"keydown.mavo:save\", evt => {\n\t\t\t\tif (evt.keyCode == 83 && evt[_.superKey]) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t});\n\t\t}, () => {\n\t\t\t$.unbind(this.element, \".mavo:save .mavo:autosave\");\n\t\t});\n\n\t\tMavo.hooks.run(\"init-end\", this);\n\t},\n\n\tget editing() {\n\t\treturn this.root.editing;\n\t},\n\n\tgetData: function() {\n\t\treturn this.root.getData();\n\t},\n\n\ttoJSON: function() {\n\t\treturn _.toJSON(this.getData());\n\t},\n\n\tmessage: function(message, options) {\n\t\treturn new _.UI.Message(this, message, options);\n\t},\n\n\terror: function(message, ...log) {\n\t\tthis.message(message, {\n\t\t\tclasses: \"mv-error\",\n\t\t\tdismiss: [\"button\", \"timeout\"]\n\t\t});\n\n\t\t// Log more info for programmers\n\t\tif (log.length > 0) {\n\t\t\tconsole.log(`%c${this.id}: ${message}`, \"color: red; font-weight: bold\", ...log);\n\t\t}\n\t},\n\n\trender: function(data) {\n\t\tthis.expressions.active = false;\n\n\t\tvar env = {context: this, data};\n\t\t_.hooks.run(\"render-start\", env);\n\n\t\tif (env.data) {\n\t\t\tthis.root.render(env.data);\n\t\t}\n\n\t\tthis.unsavedChanges = false;\n\n\t\tthis.expressions.active = true;\n\t\trequestAnimationFrame(() => this.expressions.update());\n\n\t\t_.hooks.run(\"render-end\", env);\n\t},\n\n\tclear: function() {\n\t\tif (confirm(\"This will delete all your data. Are you sure?\")) {\n\t\t\tthis.store(null).then(() => this.root.clear());\n\t\t}\n\t},\n\n\tedit: function() {\n\t\tthis.root.edit();\n\n\t\t$.events(this.element, \"mouseenter.mavo:edit mouseleave.mavo:edit\", evt => {\n\t\t\tif (evt.target.matches(_.selectors.multiple)) {\n\t\t\t\tevt.target.classList.remove(\"mv-has-hovered-item\");\n\n\t\t\t\tvar parent = evt.target.parentNode.closest(_.selectors.multiple);\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tparent.classList.toggle(\"mv-has-hovered-item\", evt.type == \"mouseenter\");\n\t\t\t\t}\n\t\t\t}\n\t\t}, true);\n\n\t\tthis.setUnsavedChanges();\n\t},\n\n\t/**\n\t * Set this mavo instances unsavedChanges flag.\n\t * @param {Boolean} [value]\n\t *        If true, just sets the flag to true, no traversal.\n\t *        If false, sets the flag of the Mavo instance and every tree node to false\n\t *        If not provided, traverses the tree and recalculates the flag value.\n\t */\n\tsetUnsavedChanges: function(value) {\n\t\tvar unsavedChanges = !!value;\n\n\t\tif (!value) {\n\t\t\tthis.walk(obj => {\n\t\t\t\tif (obj.unsavedChanges) {\n\t\t\t\t\tunsavedChanges = true;\n\n\t\t\t\t\tif (value === false) {\n\t\t\t\t\t\tobj.unsavedChanges = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.unsavedChanges = unsavedChanges;\n\t},\n\n\t// Conclude editing\n\tdone: function() {\n\t\tthis.root.done();\n\t\t$.unbind(this.element, \".mavo:edit\");\n\t\tthis.unsavedChanges = false;\n\t},\n\n\t/**\n\t * Update the backend for a given role\n\t * @return {Boolean} true if a change occurred, false otherwise\n\t */\n\tupdateBackend: function(role) {\n\t\tvar previous = this[role], backend;\n\n\t\tif (this.index == 1) {\n\t\t\tbackend = _.Functions.$url[role];\n\t\t}\n\n\t\tif (!backend) {\n\t\t\tbackend =  _.Functions.$url[`${this.id}-${role}`] || this.element.getAttribute(\"mv-\" + role) || null;\n\t\t}\n\n\t\tif (backend) {\n\t\t\tbackend = backend.trim();\n\n\t\t\tif (backend == \"none\") {\n\t\t\t\tbackend = null;\n\t\t\t}\n\t\t}\n\n\t\tif (backend && (!previous || !previous.equals(backend))) {\n\t\t\t// We have a string, convert to a backend object if different than existing\n\t\t\tthis[role] = backend = _.Backend.create(backend, {\n\t\t\t\tmavo: this,\n\t\t\t\tformat: this.element.getAttribute(\"mv-format-\" + role) || this.element.getAttribute(\"mv-format\")\n\t\t\t});\n\t\t}\n\t\telse if (!backend) {\n\t\t\t// We had a backend and now we will un-have it\n\t\t\tthis[role] = null;\n\t\t}\n\n\t\tvar changed = backend? !backend.equals(previous) : !!previous;\n\n\t\tif (changed) {\n\t\t\t// A change occured\n\t\t\tif (!this.storage && !this.source && this.init) {\n\t\t\t\t// If init is present with no storage and no source, init is equivalent to source\n\t\t\t\tthis.source = this.init;\n\t\t\t\tthis.init = null;\n\t\t\t}\n\n\t\t\tvar permissions = this.storage? this.storage.permissions : new Mavo.Permissions({edit: true, save: false});\n\t\t\tpermissions.parent = this.source && this.source.permissions;\n\t\t\tthis.permissions.parent = permissions;\n\n\t\t\tthis.primaryBackend = this.storage || this.source;\n\t\t}\n\n\t\treturn changed;\n\t},\n\n\t/**\n\t * load - Fetch data from source and render it.\n\t *\n\t * @return {Promise}  A promise that resolves when the data is loaded.\n\t */\n\tload: function() {\n\t\tvar backend = this.source || this.storage;\n\n\t\tif (!backend) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.inProgress = \"Loading\";\n\n\t\treturn backend.ready.then(() => backend.load())\n\t\t.catch(err => {\n\t\t\t// Try again with init\n\t\t\tif (this.init && this.init != backend) {\n\t\t\t\tbackend = this.init;\n\t\t\t\treturn this.init.ready.then(() => this.init.load());\n\t\t\t}\n\n\t\t\t// No init, propagate error\n\t\t\treturn Promise.reject(err);\n\t\t})\n\t\t.catch(err => {\n\t\t\tif (err) {\n\t\t\t\tvar xhr = err instanceof XMLHttpRequest? err : err.xhr;\n\n\t\t\t\tif (xhr && xhr.status == 404) {\n\t\t\t\t\tthis.render(null);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar message = \"Problem loading data\";\n\n\t\t\t\t\tif (xhr) {\n\t\t\t\t\t\tmessage += xhr.status? `: HTTP error ${err.status}: ${err.statusText}` : \": Cant connect to the Internet\";\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.error(message, err);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t})\n\t\t.then(data => this.render(data))\n\t\t.then(() => {\n\t\t\tthis.inProgress = false;\n\t\t\t$.fire(this.element, \"mavo:load\");\n\t\t});\n\t},\n\n\tstore: function() {\n\t\tif (!this.storage) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\tthis.inProgress = \"Saving\";\n\n\t\treturn this.storage.login()\n\t\t\t.then(() => this.storage.store(this.getData()))\n\t\t\t.catch(err => {\n\t\t\t\tif (err) {\n\t\t\t\t\tvar message = \"Problem saving data\";\n\n\t\t\t\t\tif (err instanceof XMLHttpRequest) {\n\t\t\t\t\t\tmessage += err.status? `: HTTP error ${err.status}: ${err.statusText}` : \": Cant connect to the Internet\";\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.error(message, err);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t})\n\t\t\t.then(saved => {\n\t\t\t\tthis.inProgress = false;\n\t\t\t\treturn saved;\n\t\t\t});\n\t},\n\n\tupload: function(file, path = \"images/\" + file.name) {\n\t\tif (!this.uploadBackend) {\n\t\t\treturn Promise.reject();\n\t\t}\n\n\t\tthis.inProgress = \"Uploading\";\n\n\t\treturn this.uploadBackend.upload(file, path)\n\t\t\t.then(url => {\n\t\t\t\tthis.inProgress = false;\n\t\t\t\treturn url;\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tthis.error(\"Error uploading file\", err);\n\t\t\t\tthis.inProgress = false;\n\t\t\t\treturn null;\n\t\t\t});\n\t},\n\n\tsave: function() {\n\t\treturn this.store().then(saved => {\n\t\t\tif (saved) {\n\t\t\t\t$.fire(this.element, \"mavo:save\", saved);\n\n\t\t\t\tthis.lastSaved = Date.now();\n\t\t\t\tthis.root.save();\n\t\t\t\tthis.unsavedChanges = false;\n\t\t\t}\n\t\t});\n\t},\n\n\twalk: function(callback) {\n\t\treturn this.root.walk(callback);\n\t},\n\n\t/**\n\t * Executes a test on every node. If ANY node passes (test returns true),\n\t * the function returns true. Otherwise, it returns false.\n\t * Similar semantics to Array.prototype.some().\n\t */\n\tsome: function(test) {\n\t\treturn !this.walk((obj, path) => {\n\t\t\tvar ret = test(obj, path);\n\n\t\t\tif (ret === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\n\tlive: {\n\t\tinProgress: function(value) {\n\t\t\t$.toggleAttribute(this.element, \"mv-progress\", value, value);\n\t\t},\n\n\t\tunsavedChanges: function(value) {\n\t\t\tthis.element.classList.toggle(\"mv-unsaved-changes\", value);\n\t\t},\n\n\t\tneedsEdit: function(value) {\n\t\t\tthis.bar.toggle(\"edit\", value);\n\t\t},\n\n\t\tstorage: function(value) {\n\t\t\tif (value !== this._storage && !value) {\n\t\t\t\tvar permissions = new Mavo.Permissions({edit: true, save: false});\n\t\t\t\tpermissions.parent = this.permissions.parent;\n\t\t\t\tthis.permissions.parent = permissions;\n\t\t\t}\n\t\t},\n\n\t\tprimaryBackend: function(value) {\n\t\t\tvalue = value || null;\n\n\t\t\tif (value != this._primaryBackend) {\n\t\t\t\tif (value)  {\n\t\t\t\t\tthis.element.style.setProperty(\"--mv-backend\", `\"${value.id}\"`);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.element.style.removeProperty(\"--mv-backend\");\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\n\t\tuploadBackend: {\n\t\t\tget: function() {\n\t\t\t\tif (this.storage && this.storage.upload) {\n\t\t\t\t\t// Prioritize storage\n\t\t\t\t\treturn this.storage;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tall: {},\n\n\t\tget length() {\n\t\t\treturn Object.keys(_.all).length;\n\t\t},\n\n\t\tget: function(id) {\n\t\t\tif (id instanceof Element) {\n\t\t\t\t// Get by element\n\t\t\t\tfor (var name in _.all) {\n\t\t\t\t\tif (_.all[name].element == id) {\n\t\t\t\t\t\treturn _.all[name];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tvar name = typeof id === \"number\"? Object.keys(_.all)[id] : id;\n\n\t\t\treturn _.all[name] || null;\n\t\t},\n\n\t\tsuperKey: navigator.platform.indexOf(\"Mac\") === 0? \"metaKey\" : \"ctrlKey\",\n\t\tbase: location.protocol == \"about:\"? (document.currentScript? document.currentScript.src : \"http://mavo.io\") : location,\n\t\tdependencies: [],\n\n\t\tinit: function(container = document) {\n\t\t\treturn $$(_.selectors.init, container)\n\t\t\t\t.filter(element => !_.get(element)) // not already inited\n\t\t\t\t.map(element => new _(element));\n\t\t},\n\n\t\tUI: {},\n\n\t\thooks: new $.Hooks(),\n\n\t\tattributes: [\n\t\t\t\"mv-app\", \"mv-storage\", \"mv-source\", \"mv-init\", \"mv-path\", \"mv-format\",\n\t\t\t\"mv-attribute\", \"mv-default\", \"mv-mode\", \"mv-edit\", \"mv-permisssions\",\n\t\t\t\"mv-rel\"\n\t\t]\n\t}\n});\n\n{\n\nlet s = _.selectors = {\n\tinit: \".mv-app, [mv-app], [data-mv-app]\",\n\tproperty: \"[property], [itemprop]\",\n\tspecificProperty: name => `[property=${name}], [itemprop=${name}]`,\n\tgroup: \"[typeof], [itemscope], [itemtype], [mv-group]\",\n\tmultiple: \"[mv-multiple]\",\n\tformControl: \"input, select, option, textarea\",\n\tui: \".mv-ui\",\n\tcontainer: {\n\t\t// \"li\": \"ul, ol\",\n\t\t\"tr\": \"table\",\n\t\t\"option\": \"select\",\n\t\t// \"dt\": \"dl\",\n\t\t// \"dd\": \"dl\"\n\t}\n};\n\nlet arr = s.arr = selector => selector.split(/\\s*,\\s*/g);\nlet not = s.not = selector => arr(selector).map(s => `:not(${s})`).join(\"\");\nlet or = s.or = (selector1, selector2) => selector1 + \", \" + selector2;\nlet and = s.and = (selector1, selector2) => {\n\tvar ret = [], arr2 = arr(selector2);\n\n\tarr(selector1).forEach(s1 => ret.push(...arr2.map(s2 => s1 + s2)));\n\n\treturn ret.join(\", \");\n};\nlet andNot = s.andNot = (selector1, selector2) => and(selector1, not(selector2));\n\n$.extend(_.selectors, {\n\tprimitive: andNot(s.property, s.group),\n\trootGroup: andNot(s.group, s.property),\n\toutput: or(s.specificProperty(\"output\"), \".mv-output\")\n});\n\n}\n\n// Init mavo. Async to give other scripts a chance to modify stuff.\nrequestAnimationFrame(() => {\n\tvar isDecentBrowser = Array.from && window.Intl && document.documentElement.closest && self.URL && \"searchParams\" in URL.prototype;\n\n\t_.dependencies.push(\n\t\t$.ready(),\n\t\t_.Plugins.load(),\n\t\t$.include(isDecentBrowser, \"https://cdn.polyfill.io/v2/polyfill.min.js?features=blissfuljs,Intl.~locale.en\")\n\t);\n\n\t_.ready = _.all(_.dependencies);\n\t_.inited = _.ready.catch(console.error).then(() => Mavo.init());\n});\n\nStretchy.selectors.filter = \".mv-editor:not([property]), .mv-autosize\";\n\n})(Bliss, Bliss.$);\n\n(function ($, $$) {\n\nvar _ = $.extend(Mavo, {\n\t/**\n\t * Load a file, only once\n\t */\n\tload: (url, base = document.currentScript? document.currentScript.src : location) => {\n\t\t_.loaded = _.loaded || new Set();\n\n\t\tif (_.loaded.has(url + \"\")) {\n\t\t\treturn;\n\t\t}\n\n\t\turl = new URL(url, base);\n\n\t\tif (/\\.css$/.test(url.pathname)) {\n\t\t\t// CSS file\n\t\t\t$.create(\"link\", {\n\t\t\t\t\"href\": url,\n\t\t\t\t\"rel\": \"stylesheet\",\n\t\t\t\t\"inside\": document.head\n\t\t\t});\n\n\t\t\t// No need to wait for stylesheets\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\t// JS file\n\t\treturn $.include(url);\n\t},\n\n\treadFile: (file, format = \"DataURL\") => {\n\t\tvar reader = new FileReader();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\treader.onload = f => resolve(reader.result);\n\t\t\treader.onerror = reader.onabort = reject;\n\t\t\treader[\"readAs\" + format](file);\n\t\t});\n\t},\n\n\ttoJSON: data => {\n\t\tif (data === null) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\t// Do not stringify twice!\n\t\t\treturn data;\n\t\t}\n\n\t\treturn JSON.stringify(data, null, \"\\t\");\n\t},\n\n\t/**\n\t * Array utlities\n\t */\n\n\t// If the passed value is not an array, convert to an array\n\ttoArray: arr => {\n\t\treturn arr === undefined? [] : Array.isArray(arr)? arr : [arr];\n\t},\n\n\tdelete: (arr, element) => {\n\t\tvar index = arr && arr.indexOf(element);\n\n\t\tif (index > -1) {\n\t\t\tarr.splice(index, 1);\n\t\t}\n\t},\n\n\t/**\n\t * Do two arrays have a non-empty intersection?\n\t * @return {Boolean}\n\t */\n\thasIntersection: (arr1, arr2) => arr1 && arr2 && !arr1.every(el => arr2.indexOf(el) == -1),\n\n\t// Recursively flatten a multi-dimensional array\n\tflatten: arr => {\n\t\tif (!Array.isArray(arr)) {\n\t\t\treturn [arr];\n\t\t}\n\n\t\treturn arr.reduce((prev, c) => _.toArray(prev).concat(_.flatten(c)), []);\n\t},\n\n\t// Push an item to an array iff it's not already in there\n\tpushUnique: (arr, item) => {\n\t\tif (arr.indexOf(item) === -1) {\n\t\t\tarr.push(item);\n\t\t}\n\t},\n\n\t/**\n\t * DOM element utilities\n\t */\n\n\tis: function(thing, ...elements) {\n\t\tfor (let element of elements) {\n\t\t\tif (element && element.matches && element.matches(_.selectors[thing])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Get the current value of a CSS property on an element\n\t */\n\tgetStyle: (element, property) => element && getComputedStyle(element).getPropertyValue(property).trim(),\n\n\t/**\n\t * Get/set data on an element\n\t */\n\tdata: function(element, name, value) {\n\t\tif (arguments.length == 2) {\n\t\t\treturn $.value(element, \"_\", \"data\", \"mavo\", name);\n\t\t}\n\t\telse {\n\t\t\telement._.data.mavo = element._.data.mavo || {};\n\t\t\treturn element._.data.mavo[name] = value;\n\t\t}\n\t},\n\n\t/**\n\t * Revocably add/remove elements from the DOM\n\t */\n\trevocably: {\n\t\tadd: function(element, parent) {\n\t\t\tvar comment = _.revocably.isRemoved(element);\n\n\t\t\tif (comment && comment.parentNode) {\n\t\t\t\tcomment.parentNode.replaceChild(element, comment);\n\t\t\t}\n\t\t\telse if (element && parent && !element.parentNode) {\n\t\t\t\t// Has not been revocably removed because it has never even been added\n\t\t\t\tparent.appendChild(element);\n\t\t\t}\n\n\t\t\treturn comment;\n\t\t},\n\n\t\tremove: function(element, commentText) {\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar comment = _.data(element, \"commentstub\");\n\n\t\t\tif (!comment) {\n\t\t\t\tcommentText = commentText || element.id || element.className || element.nodeName;\n\t\t\t\tcomment = _.data(element, \"commentstub\", document.createComment(commentText));\n\t\t\t}\n\n\t\t\tif (element.parentNode) {\n\t\t\t\t// In DOM, remove\n\t\t\t\telement.parentNode.replaceChild(comment, element);\n\t\t\t}\n\n\t\t\treturn comment;\n\t\t},\n\n\t\tisRemoved: function(element) {\n\t\t\tif (!element || element.parentNode) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar comment = _.data(element, \"commentstub\");\n\n\t\t\tif (comment && comment.parentNode) {\n\t\t\t\treturn comment;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tinViewport: element => {\n\t\tvar r = element.getBoundingClientRect();\n\n\t\treturn (0 <= r.bottom && r.bottom <= innerHeight || 0 <= r.top && r.top <= innerHeight) // vertical\n\t\t       && (0 <= r.right && r.right <= innerWidth || 0 <= r.left && r.left <= innerWidth); // horizontal\n\t},\n\n\tscrollIntoViewIfNeeded: element => {\n\t\tif (element && !Mavo.inViewport(element)) {\n\t\t\telement.scrollIntoView({behavior: \"smooth\"});\n\t\t}\n\t},\n\n\t/**\n\t * Get the value of an attribute, with fallback attributes in priority order.\n\t */\n\tgetAttribute: function(element, ...attributes) {\n\t\tfor (let i=0, attribute; attribute = attributes[i]; i++) {\n\t\t\tlet value = element.getAttribute(attribute);\n\n\t\t\tif (value) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Object utilities\n\t */\n\n\tsubset: function(obj, path, value) {\n\t\tif (arguments.length == 3) {\n\t\t\t// Put\n\t\t\tif (path.length) {\n\t\t\t\tvar parent = $.value(obj, ...path.slice(0, -1));\n\t\t\t\tparent[path[path.length - 1]] = value;\n\t\t\t\treturn obj;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\t\telse if (typeof obj == \"object\" && path && path.length) { // Get\n\t\t\treturn path.reduce((obj, property, i) => {\n\t\t\t\tif (obj && property in obj) {\n\t\t\t\t\treturn obj[property];\n\t\t\t\t}\n\n\t\t\t\tif (Array.isArray(obj) && isNaN(property)) {\n\t\t\t\t\t// Non-numeric property on array, try getting by id\n\t\t\t\t\tfor (var j=0; j<obj.length; j++) {\n\t\t\t\t\t\tif (obj[j] && obj[j].id == property) {\n\t\t\t\t\t\t\tpath[i] = j;\n\t\t\t\t\t\t\treturn obj[j];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn obj;\n\n\t\t\t}, obj);\n\t\t}\n\t\telse {\n\t\t\treturn obj;\n\t\t}\n\t},\n\n\t/**\n\t * Deep clone an object. Only supports object literals, arrays, and primitives\n\t */\n\tclone: function(o) {\n\t\tvar cache = new WeakSet();\n\n\t\treturn JSON.parse(JSON.stringify(o, (key, value) => {\n\t\t\tif (typeof value === \"object\" && value !== null) {\n\t\t\t\t// No circular reference found\n\n\t\t\t\tif (cache.has(value)) {\n\t\t\t\t\treturn; // Circular reference found!\n\t\t\t\t}\n\n\t\t\t\tcache.add(value);\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}));\n\t},\n\n\t// Credit: https://remysharp.com/2010/07/21/throttling-function-calls\n\tdebounce: function (fn, delay) {\n\t\tif (!delay) {\n\t\t\t// No throttling\n\t\t\treturn fn;\n\t\t}\n\n\t\tvar timer = null, code;\n\n\t\treturn function () {\n\t\t\tvar context = this, args = arguments;\n\t\t\tcode = function () {\n\t\t\t\tfn.apply(context, args);\n\t\t\t\tremoveEventListener(\"beforeunload\", code);\n\t\t\t};\n\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(code, delay);\n\t\t\taddEventListener(\"beforeunload\", code);\n\t\t};\n\t},\n\n\tescapeRegExp: s => s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\"),\n\n\tObserver: $.Class({\n\t\tconstructor: function(element, attribute, callback, o = {}) {\n\t\t\tif (callback instanceof MutationObserver) {\n\t\t\t\tthis.observer = callback;\n\t\t\t}\n\n\t\t\tthis.observer = this.observer || new MutationObserver(callback);\n\t\t\tthis.element = element;\n\t\t\tthis.callback = callback;\n\t\t\tthis.attribute = attribute;\n\n\t\t\tthis.options = $.extend({}, o);\n\n\t\t\tif (attribute) {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeFilter: this.attribute == \"all\"? undefined : Mavo.toArray(this.attribute),\n\t\t\t\t\tattributeOldValue: !!o.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!this.attribute || this.attribute == \"all\") {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true,\n\t\t\t\t\tcharacterDataOldValue: !!o.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.run();\n\t\t},\n\n\t\tstop: function() {\n\t\t\tthis.observer.disconnect();\n\t\t\tthis.running = false;\n\n\t\t\treturn this;\n\t\t},\n\n\t\trun: function() {\n\t\t\tif (this.observer) {\n\t\t\t\tthis.observer.observe(this.element, this.options);\n\t\t\t\tthis.running = true;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Disconnect an observer, run some code, then observe again\n\t\t */\n\t\tsneak: function(callback) {\n\t\t\tif (this.running) {\n\t\t\t\tthis.stop();\n\t\t\t\tvar ret = callback();\n\t\t\t\tthis.run();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar ret = callback();\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\tthis.observer.disconnect();\n\t\t\tthis.observer = this.element = null;\n\t\t},\n\n\t\tstatic: {\n\t\t\tsneak: function(observer, callback) {\n\t\t\t\treturn observer? observer.sneak(callback) : callback();\n\t\t\t}\n\t\t}\n\t}),\n\n\tdefer: function(constructor) {\n\t\tvar res, rej;\n\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tif (constructor) {\n\t\t\t\tconstructor(resolve, reject);\n\t\t\t}\n\n\t\t\tres = resolve;\n\t\t\trej = reject;\n\t\t});\n\n\t\tpromise.resolve = a => {\n\t\t\tres(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\tpromise.reject = a => {\n\t\t\trej(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\treturn promise;\n\t},\n\n\t/**\n\t * Similar to Promise.all() but can handle post-hoc additions\n\t * and does not reject if one promise rejects.\n\t */\n\tall: function(iterable) {\n\t\t// Turn rejected promises into resolved ones\n\t\tfor (let promise of iterable) {\n\t\t\tif ($.type(promise) == \"promise\") {\n\t\t\t\tpromise = promise.catch(err => err);\n\t\t\t}\n\t\t}\n\n\t\treturn Promise.all(iterable).then(resolved => {\n\t\t\tif (iterable.length != resolved.length) {\n\t\t\t\t// The list of promises or values changed. Return a new Promise.\n\t\t\t\t// The original promise won't resolve until the new one does.\n\t\t\t\treturn _.all(iterable);\n\t\t\t}\n\n\t\t\t// The list of promises or values stayed the same.\n\t\t\t// Return results immediately.\n\t\t\treturn resolved;\n\t\t});\n\t},\n\n\t/**\n\t * Run & Return a function\n\t */\n\trr: function(f) {\n\t\tf();\n\t\treturn f;\n\t}\n});\n\n// Bliss plugins\n\n$.add(\"toggleAttribute\", function(name, value, test = value !== null) {\n\tif (test) {\n\t\tthis.setAttribute(name, value);\n\t}\n\telse {\n\t\tthis.removeAttribute(name);\n\t}\n});\n\n// Provide shortcuts to long property chains\n$.proxy = $.classProps.proxy = $.overload(function(obj, property, proxy) {\n\tObject.defineProperty(obj, property, {\n\t\tget: function() {\n\t\t\treturn this[proxy][property];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[proxy][property] = value;\n\t\t},\n\t\tconfigurable: true,\n\t\tenumerable: true\n\t});\n\n\treturn obj;\n});\n\n$.classProps.propagated = function(proto, names) {\n\tMavo.toArray(names).forEach(name => {\n\t\tvar existing = proto[name];\n\n\t\tproto[name] = function() {\n\t\t\tvar ret = existing && existing.apply(this, arguments);\n\n\t\t\tif (this.propagate && ret !== false) {\n\t\t\t\tthis.propagate(name);\n\t\t\t}\n\t\t};\n\t});\n};\n\n// :focus-within and :target-within shim\nfunction updateWithin(cl, element) {\n\tcl = \"mv-\" + cl + \"-within\";\n\t$$(\".\" + cl).forEach(el => el.classList.remove(cl));\n\n\twhile (element && element.classList) {\n\t\telement.classList.add(cl);\n\t\telement = element.parentNode;\n\t}\n};\n\ndocument.addEventListener(\"focus\", evt => {\n\tupdateWithin(\"focus\", evt.target);\n}, true);\n\ndocument.addEventListener(\"blur\", evt => {\n\tupdateWithin(\"focus\", null);\n}, true);\n\naddEventListener(\"hashchange\", evt => {\n\tupdateWithin(\"target\", $(location.hash));\n});\n\ndocument.documentElement.addEventListener(\"mavo:datachange\", evt => {\n\t// TODO debounce\n\tupdateWithin(\"target\", $(location.hash));\n});\n\nupdateWithin(\"focus\", document.activeElement !== document.body? document.activeElement : null);\n\n})(Bliss, Bliss.$);\n\n(function ($) {\n\nMavo.attributes.push(\"mv-plugins\");\n\nvar _ = Mavo.Plugins = {\n\tloaded: {},\n\n\tload: function() {\n\t\t_.plugins = new Set();\n\n\t\tfor (let element of $$(\"[mv-plugins]\")) {\n\t\t\tlet plugins = element.getAttribute(\"mv-plugins\").trim().split(/\\s+/);\n\n\t\t\tfor (let plugin of plugins) {\n\t\t\t\t_.plugins.add(plugin);\n\t\t\t}\n\t\t}\n\n\t\tif (!_.plugins.size) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\n\t\t// Fetch plugin index\n\t\treturn $.fetch(_.url + \"/plugins.json\", {\n\t\t\tresponseType: \"json\"\n\t\t}).then(xhr => {\n\t\t\t// Fetch plugins\n\t\t\treturn Mavo.all(xhr.response.plugin\n\t\t\t\t.filter(plugin => _.plugins.has(plugin.id))\n\t\t\t\t.map(plugin => {\n\t\t\t\t\t// Load plugin\n\n\t\t\t\t\tif (plugin.repo) {\n\t\t\t\t\t\t// Plugin hosted in a separate repo\n\t\t\t\t\t\tvar base = `https://raw.githubusercontent.com/${plugin.repo}/`;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\t// Plugin hosted in the mavo-plugins repo\n\t\t\t\t\t\tvar base = `${_.url}/${plugin.id}/`;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar url = `${base}mavo-${plugin.id}.js`;\n\n\t\t\t\t\treturn $.include(_.loaded[plugin.id], url);\n\t\t\t\t}));\n\t\t});\n\t},\n\n\tregister: function(o) {\n\t\tif (o.name && _.loaded[o.name]) {\n\t\t\t// Do not register same plugin twice\n\t\t\treturn;\n\t\t}\n\n\t\tMavo.hooks.add(o.hooks);\n\n\t\tfor (let Class in o.extend) {\n\t\t\tlet existing = Class == \"Mavo\"? Mavo : Mavo[Class];\n\n\t\t\tif ($.type(existing) === \"function\") {\n\t\t\t\t$.Class(existing, o.extend[Class]);\n\t\t\t}\n\t\t\telse {\n\t\t\t\t$.extend(existing, o.extend[Class]);\n\t\t\t}\n\t\t}\n\n\t\tvar ready = [];\n\n\t\tif (o.ready) {\n\t\t\tready.push(o.ready);\n\t\t}\n\n\t\tif (o.dependencies) {\n\t\t\tvar base = document.currentScript? document.currentScript.src : location;\n\t\t\tvar dependencies = o.dependencies.map(url => Mavo.load(url, base));\n\t\t\tready.push(...dependencies);\n\t\t}\n\n\t\tif (ready.length) {\n\t\t\tMavo.dependencies.push(...ready);\n\t\t}\n\n\t\tif (o.name) {\n\t\t\t_.loaded[o.name] = o;\n\t\t}\n\n\t\tif (o.init) {\n\t\t\tPromise.all(ready).then(() => o.init());\n\t\t}\n\t},\n\n\turl: \"https://plugins.mavo.io/\"\n};\n\n})(Bliss);\n\n(function ($, $$) {\n\nMavo.attributes.push(\"mv-bar\");\n\nvar _ = Mavo.UI.Bar = $.Class({\n\tconstructor: function(mavo) {\n\t\tthis.mavo = mavo;\n\n\t\tthis.element = $(\".mv-bar\", this.mavo.element) || $.create({\n\t\t\tclassName: \"mv-bar mv-ui\",\n\t\t\tstart: this.mavo.element,\n\t\t\tinnerHTML: \"<button>&nbsp;</button>\"\n\t\t});\n\n\t\tif (this.element.classList.contains(\"mv-compact\")) {\n\t\t\tthis.noResize = true;\n\t\t}\n\n\t\tthis.order = this.mavo.element.getAttribute(\"mv-bar\") || this.element.getAttribute(\"mv-bar\");\n\n\t\tif (this.order) {\n\t\t\tthis.order = this.order == \"none\"? [] : this.order.split(/\\s+/);\n\t\t}\n\t\telse {\n\t\t\tthis.order = Object.keys(_.controls);\n\t\t}\n\n\t\tthis.order = this.order.filter(id => _.controls[id]);\n\n\t\tif (this.order.length) {\n\t\t\t// Measure height of 1 row\n\t\t\tthis.targetHeight = this.element.offsetHeight;\n\t\t}\n\n\t\tthis.element.innerHTML = \"\";\n\n\t\tfor (let id of this.order) {\n\t\t\tlet o = _.controls[id];\n\n\t\t\tif (o.create) {\n\t\t\t\tthis[id] = o.create.call(this.mavo);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar label = o.label || Mavo.Functions.readable(id);\n\n\t\t\t\tthis[id] = $.create(\"button\", {\n\t\t\t\t\tclassName: `mv-${id}`,\n\t\t\t\t\ttextContent: label,\n\t\t\t\t\ttitle: label\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// We initially add all of them to retain order,\n\t\t\t// then we remove revocably when/if needed\n\t\t\tthis.add(id);\n\n\t\t\tif (o.permission) {\n\t\t\t\tthis.permissions.can(o.permission, () => {\n\t\t\t\t\tthis.toggle(id, !o.condition || o.condition.call(this.mavo));\n\t\t\t\t}, () => {\n\t\t\t\t\tthis.remove(id);\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (o.condition && !o.condition.call(this.mavo)) {\n\t\t\t\tthis.remove(id);\n\t\t\t}\n\n\t\t\tfor (var events in o.events) {\n\t\t\t\t$.events(this[id], events, o.events[events].bind(this.mavo));\n\t\t\t}\n\n\t\t\tif (o.action) {\n\t\t\t\t$.delegate(this.element, \"click\", \".mv-\" + id, () => {\n\t\t\t\t\tif (!o.permission || this.permissions.is(o.permission)) {\n\t\t\t\t\t\to.action.call(this.mavo);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (this.order.length && !this.noResize) {\n\t\t\tthis.resize();\n\n\t\t\tif (self.ResizeObserver) {\n\t\t\t\tvar previousRect = null;\n\n\t\t\t\tthis.resizeObserver = new ResizeObserver(entries => {\n\t\t\t\t\tvar contentRect = entries[entries.length - 1].contentRect;\n\n\t\t\t\t\tif (previousRect\n\t\t\t\t\t\t&& previousRect.width == contentRect.width\n\t\t\t\t\t\t&& previousRect.height == contentRect.height) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.resize();\n\n\t\t\t\t\tpreviousRect = contentRect;\n\t\t\t\t});\n\n\t\t\t\tthis.resizeObserver.observe(this.element);\n\t\t\t}\n\t\t}\n\t},\n\n\tresize: function() {\n\t\tif (!this.targetHeight) {\n\t\t\t// We don't have a correct measurement for target height, abort\n\t\t\tthis.targetHeight = this.element.offsetHeight;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.resizeObserver && this.resizeObserver.disconnect();\n\n\t\tthis.element.classList.remove(\"mv-compact\", \"mv-tiny\");\n\n\t\t// Exceeded single row?\n\t\tif (this.element.offsetHeight > this.targetHeight * 1.5) {\n\t\t\tthis.element.classList.add(\"mv-compact\");\n\n\t\t\tif (this.element.offsetHeight > this.targetHeight * 1.2) {\n\t\t\t\t// Still too tall\n\t\t\t\tthis.element.classList.add(\"mv-tiny\");\n\t\t\t}\n\t\t}\n\n\t\tthis.resizeObserver && this.resizeObserver.observe(this.element);\n\t},\n\n\tadd: function(id) {\n\t\tvar o =_.controls[id];\n\n\t\tif (o.prepare) {\n\t\t\to.prepare.call(this.mavo);\n\t\t}\n\n\t\tMavo.revocably.add(this[id], this.element);\n\n\t\tif (!this.resizeObserver && !this.noResize) {\n\t\t\trequestAnimationFrame(() => this.resize());\n\t\t}\n\t},\n\n\tremove: function(id) {\n\t\tvar o =_.controls[id];\n\n\t\tMavo.revocably.remove(this[id], \"mv-\" + id);\n\n\t\tif (o.cleanup) {\n\t\t\to.cleanup.call(this.mavo);\n\t\t}\n\n\t\tif (!this.resizeObserver && !this.noResize) {\n\t\t\trequestAnimationFrame(() => this.resize());\n\t\t}\n\t},\n\n\ttoggle: function(id, add) {\n\t\treturn this[add? \"add\" : \"remove\"](id);\n\t},\n\n\tproxy: {\n\t\t\"permissions\": \"mavo\"\n\t},\n\n\tstatic: {\n\t\tcontrols: {\n\t\t\tstatus: {\n\t\t\t\tcreate: function() {\n\t\t\t\t\tvar status = $.create({\n\t\t\t\t\t\tclassName: \"mv-status\"\n\t\t\t\t\t});\n\n\t\t\t\t\treturn status;\n\t\t\t\t},\n\t\t\t\tprepare: function() {\n\t\t\t\t\tvar backend = this.primaryBackend;\n\n\t\t\t\t\tif (backend && backend.user) {\n\t\t\t\t\t\tvar user = backend.user;\n\t\t\t\t\t\tvar html = user.name || \"\";\n\n\t\t\t\t\t\tif (user.avatar) {\n\t\t\t\t\t\t\thtml = `<img class=\"mv-avatar\" src=\"${user.avatar}\" /> ${html}`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (user.url) {\n\t\t\t\t\t\t\thtml = `<a href=\"${user.url}\" target=\"_blank\">${html}</a>`;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tthis.bar.status.innerHTML = html;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpermission: \"logout\"\n\t\t\t},\n\n\t\t\tedit: {\n\t\t\t\taction: function() {\n\t\t\t\t\tif (this.editing) {\n\t\t\t\t\t\tthis.done();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.edit();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpermission: [\"edit\", \"add\", \"delete\"],\n\t\t\t\tcleanup: function() {\n\t\t\t\t\tif (this.editing) {\n\t\t\t\t\t\tthis.done();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tsave: {\n\t\t\t\taction: function() {\n\t\t\t\t\tthis.save();\n\t\t\t\t},\n\t\t\t\tevents: {\n\t\t\t\t\t\"mouseenter focus\": function() {\n\t\t\t\t\t\tthis.element.classList.add(\"mv-highlight-unsaved\");\n\t\t\t\t\t},\n\t\t\t\t\t\"mouseleave blur\": function() {\n\t\t\t\t\t\tthis.element.classList.remove(\"mv-highlight-unsaved\");\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tpermission: \"save\",\n\t\t\t\tcondition: function() {\n\t\t\t\t\treturn !this.autoSave || this.autoSaveDelay > 0;\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tclear: {\n\t\t\t\taction: function() {\n\t\t\t\t\tthis.clear();\n\t\t\t\t},\n\t\t\t\tpermission: \"delete\"\n\t\t\t},\n\n\t\t\tlogin: {\n\t\t\t\taction: function() {\n\t\t\t\t\tthis.primaryBackend.login();\n\t\t\t\t},\n\t\t\t\tpermission: \"login\"\n\t\t\t},\n\n\t\t\tlogout: {\n\t\t\t\taction: function() {\n\t\t\t\t\tthis.primaryBackend.logout();\n\t\t\t\t},\n\t\t\t\tpermission: \"logout\"\n\t\t\t}\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function ($, $$) {\n\nvar _ = Mavo.UI.Message = $.Class({\n\tconstructor: function(mavo, message, o) {\n\t\tthis.mavo = mavo;\n\t\tthis.message = message;\n\t\tthis.closed = Mavo.defer();\n\n\t\tthis.element = $.create({\n\t\t\tclassName: \"mv-ui mv-message\",\n\t\t\tinnerHTML: this.message,\n\t\t\tevents: {\n\t\t\t\tclick: e => Mavo.scrollIntoViewIfNeeded(this.mavo.element)\n\t\t\t},\n\t\t\tafter: this.mavo.bar.element\n\t\t});\n\n\t\tif (o.classes) {\n\t\t\tthis.element.classList.add(o.classes);\n\t\t}\n\n\t\to.dismiss = o.dismiss || {};\n\n\t\tif (typeof o.dismiss == \"string\" || Array.isArray(o.dismiss)) {\n\t\t\tvar dismiss = {};\n\t\t\tfor (let prop of Mavo.toArray(o.dismiss)) {\n\t\t\t\tdismiss[prop] = true;\n\t\t\t}\n\t\t\to.dismiss = dismiss;\n\t\t}\n\n\t\tif (o.dismiss.button) {\n\t\t\t$.create(\"button\", {\n\t\t\t\tclassName: \"mv-close mv-ui\",\n\t\t\t\ttextContent: \"\",\n\t\t\t\tevents: {\n\t\t\t\t\t\"click\": evt => this.close()\n\t\t\t\t},\n\t\t\t\tstart: this.element\n\t\t\t});\n\t\t}\n\n\t\tif (o.dismiss.timeout) {\n\t\t\tvar timeout = typeof o.dismiss.timeout === \"number\"? o.dismiss.timeout : 5000;\n\t\t\tvar closeTimeout;\n\n\t\t\t$.events(this.element, {\n\t\t\t\tmouseenter: e => clearTimeout(closeTimeout),\n\t\t\t\tmouseleave: Mavo.rr(e => closeTimeout = setTimeout(() => this.close(), timeout)),\n\t\t\t});\n\t\t}\n\n\t\tif (o.dismiss.submit) {\n\t\t\tthis.element.addEventListener(\"submit\", evt => {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.close(evt.target);\n\t\t\t});\n\t\t}\n\t},\n\n\tclose: function(resolve) {\n\t\t$.transition(this.element, {opacity: 0}).then(() => {\n\t\t\t$.remove(this.element);\n\t\t\tthis.closed.resolve(resolve);\n\t\t});\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($) {\n\nvar _ = Mavo.Permissions = $.Class({\n\tconstructor: function(o) {\n\t\tthis.triggers = [];\n\t\tthis.hooks = new $.Hooks();\n\n\t\t// If we dont do this, there is no way to retrieve this from inside parentChanged\n\t\tthis.parentChanged = _.prototype.parentChanged.bind(this);\n\n\t\tthis.set(o);\n\t},\n\n\t// Set multiple permissions at once\n\tset: function(o) {\n\t\tfor (var action in o) {\n\t\t\tthis[action] = o[action];\n\t\t}\n\t},\n\n\t// Set a bunch of permissions to true. Chainable.\n\ton: function(actions) {\n\t\tMavo.toArray(actions).forEach(action => this[action] = true);\n\n\t\treturn this;\n\t},\n\n\t// Set a bunch of permissions to false. Chainable.\n\toff: function(actions) {\n\t\tactions = Array.isArray(actions)? actions : [actions];\n\n\t\tactions.forEach(action => this[action] = false);\n\n\t\treturn this;\n\t},\n\n\t// Fired once at least one of the actions passed can be performed\n\t// Kind of like a Promise that can be resolved multiple times.\n\tcan: function(actions, callback, cannot) {\n\t\tthis.observe(actions, true, callback);\n\n\t\tif (cannot) {\n\t\t\t// Fired once the action cannot be done anymore, even though it could be done before\n\t\t\tthis.cannot(actions, cannot);\n\t\t}\n\t},\n\n\t// Fired once NONE of the actions can be performed\n\tcannot: function(actions, callback) {\n\t\tthis.observe(actions, false, callback);\n\t},\n\n\t// Schedule a callback for when a set of permissions changes value\n\tobserve: function(actions, value, callback) {\n\t\tactions = Mavo.toArray(actions);\n\n\t\tif (this.is(actions, value)) {\n\t\t\t// Should be fired immediately\n\t\t\tcallback();\n\t\t}\n\n\t\t// For future transitions\n\t\tthis.triggers.push({ actions, value, callback, active: true });\n\t},\n\n\t// Compare a set of permissions with true or false\n\t// If comparing with true, we want at least one to be true, i.e. OR\n\t// If comparing with false, we want ALL to be false, i.e. NOR\n\tis: function(actions, able = true) {\n\t\tvar or = Mavo.toArray(actions).map(action => !!this[action])\n\t\t                .reduce((prev, current) => prev || current);\n\n\t\treturn able? or : !or;\n\t},\n\n\t// Monitor all changes\n\tonchange: function(callback) {\n\t\t// Future changes\n\t\tthis.hooks.add(\"change\", callback);\n\n\t\t// Fire for current values\n\t\tfor (let action of _.actions) {\n\t\t\tcallback.call(this, {action, value: this[action]});\n\t\t}\n\t},\n\n\tparentChanged: function(o = {}) {\n\t\tvar localValue = this[\"_\" + o.action];\n\n\t\tif (localValue !== undefined || o.from == o.value) {\n\t\t\t// We have a local value so we dont care about parent changes OR nothing changed\n\t\t\treturn;\n\t\t}\n\n\t\tthis.fireTriggers(o.action);\n\n\t\tthis.hooks.run(\"change\", $.extend({context: this}, o));\n\t},\n\n\t// A single permission changed value\n\tchanged: function(action, value, from) {\n\t\tfrom = !!from;\n\t\tvalue = !!value;\n\n\t\tif (value == from) {\n\t\t\t// Nothing changed\n\t\t\treturn;\n\t\t}\n\n\t\t// $.live() calls the setter before the actual property is set so we\n\t\t// need to set it manually, otherwise it still has its previous value\n\t\tthis[\"_\" + action] = value;\n\n\t\tthis.fireTriggers(action);\n\n\t\tthis.hooks.run(\"change\", {action, value, from, context: this});\n\t},\n\n\tfireTriggers: function(action) {\n\t\tfor (let trigger of this.triggers) {\n\t\t\tvar match = this.is(trigger.actions, trigger.value);\n\n\t\t\tif (trigger.active && trigger.actions.indexOf(action) > -1 && match) {\n\n\t\t\t\ttrigger.active = false;\n\t\t\t\ttrigger.callback();\n\t\t\t}\n\t\t\telse if (!match) {\n\t\t\t\t// This is so that triggers can only be executed in an actual transition\n\t\t\t\t// And that if there is a trigger for [a,b] it won't be executed twice\n\t\t\t\t// if a and b are set to true one after the other\n\t\t\t\ttrigger.active = true;\n\t\t\t}\n\t\t}\n\t},\n\n\tor: function(permissions) {\n\t\tfor (let action of _.actions) {\n\t\t\tthis[action] = this[action] || permissions[action];\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tlive: {\n\t\tparent: function(parent) {\n\t\t\tvar oldParent = this._parent;\n\n\t\t\tif (oldParent == parent) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._parent = parent;\n\n\t\t\t// Remove previous trigger, if any\n\t\t\tif (oldParent) {\n\t\t\t\tMavo.delete(oldParent.hooks.change, this.parentChanged);\n\t\t\t}\n\n\t\t\t// What changes does this cause? Fire triggers for them\n\t\t\tfor (let action of _.actions) {\n\t\t\t\tthis.parentChanged({\n\t\t\t\t\taction,\n\t\t\t\t\tvalue: parent? parent[action] : undefined,\n\t\t\t\t\tfrom: oldParent? oldParent[action] : undefined\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (parent) {\n\t\t\t\t// Add new trigger\n\t\t\t\tparent.onchange(this.parentChanged);\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tactions: [],\n\n\t\t// Register a new permission type\n\t\tregister: function(action, setter) {\n\t\t\tif (Array.isArray(action)) {\n\t\t\t\taction.forEach(action => _.register(action, setter));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$.live(_.prototype, action, {\n\t\t\t\tget: function() {\n\t\t\t\t\tvar ret = this[\"_\" + action];\n\n\t\t\t\t\tif (ret === undefined && this.parent) {\n\t\t\t\t\t\treturn this.parent[action];\n\t\t\t\t\t}\n\n\t\t\t\t\treturn ret;\n\t\t\t\t},\n\t\t\t\tset: function(able, previous) {\n\t\t\t\t\tif (setter) {\n\t\t\t\t\t\tsetter.call(this, able, previous);\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.changed(action, able, previous);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t_.actions.push(action);\n\t\t}\n\t}\n});\n\n_.register([\"read\", \"save\"]);\n\n_.register(\"login\", function(can) {\n\tif (can && this.logout) {\n\t\tthis.logout = false;\n\t}\n});\n\n_.register(\"logout\", function(can) {\n\tif (can && this.login) {\n\t\tthis.login = false;\n\t}\n});\n\n_.register(\"edit\", function(can) {\n\tif (can) {\n\t\tthis.add = this.delete = true;\n\t}\n});\n\n_.register([\"add\", \"delete\"], function(can) {\n\tif (!can) {\n\t\tthis.edit = false;\n\t}\n});\n\n})(Bliss);\n\n(function($) {\n\n/**\n * Base class for all backends\n */\nvar _ = Mavo.Backend = $.Class({\n\tconstructor: function(url, o = {}) {\n\t\tthis.source = url;\n\t\tthis.url = new URL(this.source, Mavo.base);\n\t\tthis.mavo = o.mavo;\n\t\tthis.format = Mavo.Formats.create(o.format, this);\n\n\t\t// Permissions of this particular backend.\n\t\tthis.permissions = new Mavo.Permissions();\n\t},\n\n\tget: function() {\n\t\tvar url = new URL(this.url);\n\t\turl.searchParams.set(\"timestamp\", Date.now()); // ensure fresh copy\n\n\t\treturn $.fetch(this.url.href).then(xhr => Promise.resolve(xhr.responseText), () => Promise.resolve(null));\n\t},\n\n\tload: function() {\n\t\treturn this.ready\n\t\t\t.then(() => this.get())\n\t\t\t.then(response => {\n\t\t\tif (typeof response != \"string\") {\n\t\t\t\t// Backend did the parsing, we're done here\n\t\t\t\treturn response;\n\t\t\t}\n\n\t\t\tresponse = response.replace(/^\\ufeff/, \"\"); // Remove Unicode BOM\n\n\t\t\treturn this.format.parse(response);\n\t\t});\n\t},\n\n\tstore: function(data, {path, format = this.format} = {}) {\n\t\treturn this.ready.then(() => {\n\t\t\tvar serialize = typeof data === \"string\"? Promise.resolve(data) : format.stringify(data);\n\n\t\t\treturn serialize.then(serialized => this.put(serialized, path).then(() => {\n\t\t\t\treturn {data, serialized};\n\t\t\t}));\n\t\t});\n\t},\n\n\t// To be be overriden by subclasses\n\tready: Promise.resolve(),\n\tlogin: () => Promise.resolve(),\n\tlogout: () => Promise.resolve(),\n\n\tisAuthenticated: function() {\n\t\treturn !!this.accessToken;\n\t},\n\n\t// Any extra params to be passed to the oAuth URL.\n\toAuthParams: () => \"\",\n\n\ttoString: function() {\n\t\treturn `${this.id} (${this.url})`;\n\t},\n\n\tequals: function(backend) {\n\t\treturn backend === this || (backend && this.id == backend.id && this.source == backend.source);\n\t},\n\n\t/**\n\t * Helper for making OAuth requests with JSON-based APIs.\n\t */\n\trequest: function(call, data, method = \"GET\", req = {}) {\n\t\treq.method = req.method || method;\n\t\treq.responseType = req.responseType || \"json\";\n\t\treq.headers = req.headers || {};\n\t\treq.headers[\"Content-Type\"] = req.headers[\"Content-Type\"] || \"application/json; charset=utf-8\";\n\t\treq.data = data;\n\n\t\tif (this.isAuthenticated()) {\n\t\t\treq.headers[\"Authorization\"] = req.headers[\"Authorization\"] || `Bearer ${this.accessToken}`;\n\t\t}\n\n\t\tif ($.type(req.data) === \"object\") {\n\t\t\tif (req.method == \"GET\") {\n\t\t\t\treq.data = Object.keys(req.data).map(p => p + \"=\" + encodeURIComponent(req.data[p])).join(\"&\");\n\t\t\t}\n\t\t\telse {\n\t\t\t\treq.data = JSON.stringify(req.data);\n\t\t\t}\n\t\t}\n\n\t\tcall = new URL(call, this.constructor.apiDomain);\n\n\t\treturn $.fetch(call, req)\n\t\t\t.catch(err => {\n\t\t\t\tif (err && err.xhr) {\n\t\t\t\t\treturn Promise.reject(err.xhr);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.mavo.error(\"Something went wrong while connecting to \" + this.id, err);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(xhr => req.method == \"HEAD\"? xhr : xhr.response);\n\t},\n\n\t/**\n\t * Helper method for authenticating in OAuth APIs\n\t */\n\toAuthenticate: function(passive) {\n\t\treturn this.ready.then(() => {\n\t\t\tif (this.isAuthenticated()) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tvar id = this.id.toLowerCase();\n\n\t\t\t\tif (passive) {\n\t\t\t\t\tthis.accessToken = localStorage[`mavo:${id}token`];\n\n\t\t\t\t\tif (this.accessToken) {\n\t\t\t\t\t\tresolve(this.accessToken);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Show window\n\t\t\t\t\tvar popup = {\n\t\t\t\t\t\twidth: Math.min(1000, innerWidth - 100),\n\t\t\t\t\t\theight: Math.min(800, innerHeight - 100)\n\t\t\t\t\t};\n\n\t\t\t\t\tpopup.top = (innerHeight - popup.height)/2 + (screen.top || screenTop);\n\t\t\t\t\tpopup.left = (innerWidth - popup.width)/2 + (screen.left || screenLeft);\n\n\t\t\t\t\tvar state = {\n\t\t\t\t\t\turl: location.href,\n\t\t\t\t\t\tbackend: this.id\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.authPopup = open(`${this.constructor.oAuth}?client_id=${this.key}&state=${encodeURIComponent(JSON.stringify(state))}` + this.oAuthParams(),\n\t\t\t\t\t\t\"popup\", `width=${popup.width},height=${popup.height},left=${popup.left},top=${popup.top}`);\n\n\t\t\t\t\taddEventListener(\"message\", evt => {\n\t\t\t\t\t\tif (evt.source === this.authPopup) {\n\t\t\t\t\t\t\tif (evt.data.backend == this.id) {\n\t\t\t\t\t\t\t\tthis.accessToken = localStorage[`mavo:${id}token`] = evt.data.token;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!this.accessToken) {\n\t\t\t\t\t\t\t\treject(Error(\"Authentication error\"));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve(this.accessToken);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\t/**\n\t * oAuth logout helper\n\t */\n\toAuthLogout: function() {\n\t\tif (this.isAuthenticated()) {\n\t\t\tvar id = this.id.toLowerCase();\n\n\t\t\tlocalStorage.removeItem(`mavo:${id}token`);\n\t\t\tdelete this.accessToken;\n\n\t\t\tthis.permissions.off([\"edit\", \"add\", \"delete\", \"save\"]).on(\"login\");\n\n\t\t\tthis.mavo.element._.fire(\"mavo:logout\", {backend: this});\n\t\t}\n\n\t\treturn Promise.resolve();\n\t},\n\n\tstatic: {\n\t\t// Return the appropriate backend(s) for this url\n\t\tcreate: function(url, o) {\n\t\t\tif (url) {\n\t\t\t\tvar Backend = _.types.filter(Backend => Backend.test(url))[0] || _.Remote;\n\n\t\t\t\treturn new Backend(url, o);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\ttypes: [],\n\n\t\tregister: function(Class) {\n\t\t\t_[Class.prototype.id] = Class;\n\t\t\t_.types.push(Class);\n\t\t\treturn Class;\n\t\t}\n\t}\n});\n\n/**\n * Save in an HTML element\n */\n_.register($.Class({\n\tid: \"Element\",\n\textends: _,\n\tconstructor: function () {\n\t\tthis.permissions.on([\"read\", \"edit\", \"save\"]);\n\n\t\tthis.element = $(this.source) || $.create(\"script\", {\n\t\t\ttype: \"application/json\",\n\t\t\tid: this.source.slice(1),\n\t\t\tinside: document.body\n\t\t});\n\t},\n\n\tget: function() {\n\t\treturn Promise.resolve(this.element.textContent);\n\t},\n\n\tput: function(serialized) {\n\t\treturn Promise.resolve(this.element.textContent = serialized);\n\t},\n\n\tstatic: {\n\t\ttest: url => url.indexOf(\"#\") === 0\n\t}\n}));\n\n// Load from a remote URL, no save\n_.register($.Class({\n\tid: \"Remote\",\n\textends: _,\n\tconstructor: function() {\n\t\tthis.permissions.on(\"read\");\n\t},\n\n\tstatic: {\n\t\ttest: url => false\n\t}\n}));\n\n// Save in localStorage\n_.register($.Class({\n\textends: _,\n\tid: \"Local\",\n\tconstructor: function() {\n\t\tthis.permissions.on([\"read\", \"edit\", \"save\"]);\n\t\tthis.key = this.mavo.id;\n\t},\n\n\tget: function() {\n\t\treturn Promise[this.key in localStorage? \"resolve\" : \"reject\"](localStorage[this.key]);\n\t},\n\n\tput: function(serialized) {\n\t\tif (!serialized) {\n\t\t\tdelete localStorage[this.key];\n\t\t}\n\t\telse {\n\t\t\tlocalStorage[this.key] = serialized;\n\t\t}\n\n\t\treturn Promise.resolve(serialized);\n\t},\n\n\tstatic: {\n\t\ttest: value => value == \"local\"\n\t}\n}));\n\n})(Bliss);\n\n(function($, $$) {\n\nvar _ = Mavo.Formats = {};\n\nvar base = _.Base = $.Class({\n\tabstract: true,\n\tconstructor: function(backend) {\n\t\tthis.backend = backend;\n\t},\n\tproxy: {\n\t\t\"mavo\": \"backend\"\n\t},\n\n\t// So that child classes can only override the static methods if they don't\n\t// need access to any instance variables.\n\tparse: function(content) {\n\t\treturn this.constructor.parse(content, this);\n\t},\n\tstringify: function(data) {\n\t\treturn this.constructor.stringify(data, this);\n\t},\n\n\tstatic: {\n\t\tparse: serialized => Promise.resolve(serialized),\n\t\tstringify: data => Promise.resolve(data),\n\t\textensions: [],\n\t\tdependencies: [],\n\t\tready: function() {\n\t\t\treturn Promise.all(this.dependencies.map(d => $.include(d.test(), d.url)));\n\t\t}\n\t}\n});\n\nvar json = _.JSON = $.Class({\n\textends: _.Base,\n\tstatic: {\n\t\tparse: serialized => Promise.resolve(serialized? JSON.parse(serialized) : null),\n\t\tstringify: data => Promise.resolve(Mavo.toJSON(data)),\n\t\textensions: [\".json\", \".jsonld\"]\n\t}\n});\n\nvar text = _.Text = $.Class({\n\textends: _.Base,\n\tconstructor: function(backend) {\n\t\tthis.property = this.mavo.root.getNames(\"Primitive\")[0];\n\t},\n\n\tstatic: {\n\t\textensions: [\".txt\"],\n\t\tparse: (serialized, me) => Promise.resolve({[me? me.property : \"content\"]: serialized}),\n\t\tstringify: (data, me) => Promise.resolve(data[me? me.property : \"content\"])\n\t}\n});\n\nvar csv = _.CSV = $.Class({\n\textends: _.Base,\n\tconstructor: function(backend) {\n\t\tthis.property = this.mavo.root.getNames(\"Collection\")[0];\n\t\tthis.options = $.extend({}, _.CSV.defaultOptions);\n\t},\n\n\tstatic: {\n\t\textensions: [\".csv\", \".tsv\"],\n\t\tdefaultOptions: {\n\t\t\theader: true,\n\t\t\tdynamicTyping: true,\n\t\t\tskipEmptyLines: true\n\t\t},\n\t\tdependencies: [{\n\t\t\ttest: () => self.Papa,\n\t\t\turl: \"https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.4/papaparse.min.js\"\n\t\t}],\n\t\tready: base.ready,\n\t\tparse: (serialized, me) => csv.ready().then(() => {\n\t\t\tvar data = Papa.parse(serialized, csv.defaultOptions);\n\t\t\tvar property = me? me.property : \"content\";\n\n\t\t\tif (me) {\n\t\t\t\t// Get delimiter & linebreak for serialization\n\t\t\t\tme.options.delimiter = data.meta.delimiter;\n\t\t\t\tme.options.linebreak = data.meta.linebreak;\n\t\t\t}\n\n\t\t\tif (data.meta.aborted) {\n\t\t\t\tthrow data.meta.errors.pop();\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t[property]: data.data\n\t\t\t};\n\t\t}),\n\n\t\tstringify: (serialized, me) => csv.ready().then(() => {\n\t\t\tvar property = me? me.property : \"content\";\n\t\t\tvar options = me? me.options : csv.defaultOptions;\n\t\t\treturn Papa.unparse(data[property], options);\n\t\t})\n\t}\n});\n\nObject.defineProperty(_, \"create\", {\n\tvalue: function(format, backend) {\n\t\tif (format && typeof format === \"object\") {\n\t\t\treturn format;\n\t\t}\n\n\t\tif (typeof format === \"string\") {\n\t\t\t// Search by id\n\t\t\tformat = format.toLowerCase();\n\n\t\t\tfor (var id in _) {\n\t\t\t\tvar Format = _[id];\n\n\t\t\t\tif (id.toLowerCase() == format) {\n\t\t\t\t\treturn new Format(backend);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!format) {\n\t\t\tvar url = backend.url? backend.url.pathname : backend.source;\n\t\t\tvar extension = (url.match(/\\.\\w+$/) || [])[0] || \".json\";\n\t\t\tvar Format = _.JSON;\n\n\t\t\tfor (var id in _) {\n\t\t\t\tif (_[id].extensions.indexOf(extension) > -1) {\n\t\t\t\t\t// Do not return match, as we may find another match later\n\t\t\t\t\t// and last match wins\n\t\t\t\t\tFormat = _[id];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new Format(backend);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.Node = $.Class({\n\tabstract: true,\n\tconstructor: function (element, mavo, options = {}) {\n\t\tif (!element || !mavo) {\n\t\t\tthrow new Error(\"Mavo.Node constructor requires an element argument and a mavo object\");\n\t\t}\n\n\t\tvar env = {context: this, options};\n\n\t\t// Set these first, for debug reasons\n\t\tthis.uid = ++_.maxId;\n\t\tthis.nodeType = this.nodeType;\n\t\tthis.property = null;\n\t\tthis.element = element;\n\n\t\t$.extend(this, env.options);\n\n\t\t_.all.set(element, [...(_.all.get(this.element) || []), this]);\n\n\t\tthis.template = env.options.template;\n\n\t\tif (this.template) {\n\t\t\t// TODO remove if this is deleted\n\t\t\tthis.template.copies.push(this);\n\t\t}\n\t\telse {\n\t\t\tthis.copies = [];\n\t\t}\n\n\t\tthis.mavo = mavo;\n\t\tthis.group = this.parentGroup = env.options.group;\n\n\t\tif (!this.fromTemplate(\"property\", \"type\")) {\n\t\t\tthis.property = _.getProperty(element);\n\t\t\tthis.type = Mavo.Group.normalize(element);\n\t\t\tthis.storage = this.element.getAttribute(\"mv-storage\"); // TODO rename to storage\n\t\t}\n\n\t\tthis.modes = this.element.getAttribute(\"mv-mode\");\n\n\t\tMavo.hooks.run(\"node-init-start\", env);\n\n\t\tthis.mode = Mavo.getStyle(this.element, \"--mv-mode\") || \"read\";\n\n\t\tthis.collection = env.options.collection;\n\n\t\tif (this.collection) {\n\t\t\t// This is a collection item\n\t\t\tthis.group = this.parentGroup = this.collection.parentGroup;\n\t\t}\n\n\t\t// Must run before collections have a marker which messes up paths\n\t\tvar template = this.template;\n\n\t\tif (template && template.expressions) {\n\t\t\t// We know which expressions we have, don't traverse again\n\t\t\tthis.expressions = template.expressions.map(et => new Mavo.DOMExpression({\n\t\t\t\ttemplate: et,\n\t\t\t\titem: this,\n\t\t\t\tmavo: this.mavo\n\t\t\t}));\n\t\t}\n\n\t\tMavo.hooks.run(\"node-init-end\", env);\n\t},\n\n\tget editing() {\n\t\treturn this.mode == \"edit\";\n\t},\n\n\tget isRoot() {\n\t\treturn !this.property;\n\t},\n\n\tget name() {\n\t\treturn Mavo.Functions.readable(this.property || this.type).toLowerCase();\n\t},\n\n\tget saved() {\n\t\treturn this.storage !== \"none\";\n\t},\n\n\tget path() {\n\t\tvar path = this.parentGroup? this.parentGroup.path : [];\n\n\t\treturn this.property? [...path, this.property] : path;\n\t},\n\n\t/**\n\t * Runs after the constructor is done (including the constructor of the inheriting class), synchronously\n\t */\n\tpostInit: function() {\n\t\tif (this.modes == \"edit\") {\n\t\t\tthis.edit();\n\t\t}\n\t},\n\n\tdestroy: function() {\n\t\tif (this.template) {\n\t\t\tMavo.delete(this.template.copies, this);\n\t\t}\n\t},\n\n\tgetData: function(o = {}) {\n\t\tif (this.isDataNull(o)) {\n\t\t\treturn null;\n\t\t}\n\t},\n\n\tisDataNull: function(o) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tresult: this.deleted || !this.saved && !o.live\n\t\t};\n\n\t\tMavo.hooks.run(\"unit-isdatanull\", env);\n\n\t\treturn env.result;\n\t},\n\n\t/**\n\t * Execute a callback on every node of the Mavo tree\n\t * If callback returns (strict) false, walk stops.\n\t * @return false if was stopped via a false return value, true otherwise\n\t */\n\twalk: function(callback, path = []) {\n\t\tvar walker = (obj, path) => {\n\t\t\tvar ret = callback(obj, path);\n\n\t\t\tif (ret !== false) {\n\t\t\t\tfor (let i in obj.children) {\n\t\t\t\t\tlet node = obj.children[i];\n\n\t\t\t\t\tif (node instanceof Mavo.Node) {\n\t\t\t\t\t\tvar ret = walker.call(node, node, [...path, i]);\n\n\t\t\t\t\t\tif (ret === false) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ret !== false;\n\t\t};\n\n\t\treturn walker(this, path);\n\t},\n\n\twalkUp: function(callback) {\n\t\tvar group = this;\n\n\t\twhile (group = group.parentGroup) {\n\t\t\tvar ret = callback(group);\n\n\t\t\tif (ret !== undefined) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t},\n\n\tedit: function() {\n\t\tthis.mode = \"edit\";\n\n\t\tif (this.mode != \"edit\") {\n\t\t\treturn false;\n\t\t}\n\n\t\tMavo.hooks.run(\"node-edit-end\", this);\n\t},\n\n\tdone: function() {\n\t\tthis.mode = Mavo.getStyle(this.element.parentNode, \"--mv-mode\") || \"read\";\n\n\t\tif (this.mode != \"read\") {\n\t\t\treturn false;\n\t\t}\n\n\t\t$.unbind(this.element, \".mavo:edit\");\n\n\t\tthis.propagate(\"done\");\n\n\t\tMavo.hooks.run(\"node-done-end\", this);\n\t},\n\n\tpropagate: function(callback) {\n\t\tfor (let i in this.children) {\n\t\t\tlet node = this.children[i];\n\n\t\t\tif (node instanceof Mavo.Node) {\n\t\t\t\tif (typeof callback === \"function\") {\n\t\t\t\t\tcallback.call(node, node);\n\t\t\t\t}\n\t\t\t\telse if (callback in node) {\n\t\t\t\t\tnode[callback]();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tpropagated: [\"save\", \"destroy\"],\n\n\ttoJSON: Mavo.prototype.toJSON,\n\n\tfromTemplate: function(...properties) {\n\t\tif (this.template) {\n\t\t\tfor (let property of properties) {\n\t\t\t\tthis[property] = this.template[property];\n\t\t\t}\n\t\t}\n\n\t\treturn !!this.template;\n\t},\n\n\trender: function(data) {\n\t\tthis.oldData = this.data;\n\t\tthis.data = data;\n\n\t\tdata = Mavo.subset(data, this.inPath);\n\n\t\tvar env = {context: this, data};\n\n\t\tMavo.hooks.run(\"node-render-start\", env);\n\n\t\tif (this.nodeType != \"Collection\" && Array.isArray(data)) {\n\t\t\t// We are rendering an array on a singleton, what to do?\n\t\t\tvar properties;\n\t\t\tif (this.isRoot && (properties = Object.keys(this.children)).length === 1 && this.children[properties[0]].nodeType === \"Collection\") {\n\t\t\t\t// If it's root with only one collection property, render on that property\n\t\t\t\tenv.data = {\n\t\t\t\t\t[properties[0]]: env.data\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Otherwise, render first item\n\t\t\t\tthis.inPath.push(\"0\");\n\t\t\t\tenv.data = env.data[0];\n\t\t\t}\n\t\t}\n\n\t\tif (this.editing) {\n\t\t\tthis.done();\n\t\t\tthis.dataRender(env.data);\n\t\t\tthis.edit();\n\t\t}\n\t\telse {\n\t\t\tthis.dataRender(env.data);\n\t\t}\n\n\t\tthis.save();\n\n\t\tMavo.hooks.run(\"node-render-end\", env);\n\t},\n\n\tdataChanged: function(action, o = {}) {\n\t\t$.fire(o.element || this.element, \"mavo:datachange\", $.extend({\n\t\t\tproperty: this.property,\n\t\t\taction,\n\t\t\tmavo: this.mavo,\n\t\t\tnode: this\n\t\t}, o));\n\t},\n\n\ttoString: function() {\n\t\treturn `#${this.uid}: ${this.nodeType} (${this.property})`;\n\t},\n\n\tgetClosestCollection: function() {\n\t\treturn this.collection ||\n\t\t\t   this.group.collection ||\n\t\t\t   (this.parentGroup? this.parentGroup.closestCollection : null);\n\t},\n\n\t/**\n\t * Check if this unit is either deleted or inside a deleted group\n\t */\n\tisDeleted: function() {\n\t\tvar ret = this.deleted;\n\n\t\tif (this.deleted) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !!this.parentGroup && this.parentGroup.isDeleted();\n\t},\n\n\tlazy: {\n\t\tclosestCollection: function() {\n\t\t\treturn this.getClosestCollection();\n\t\t},\n\n\t\t// Are were only rendering and editing a subset of the data?\n\t\tinPath: function() {\n\t\t\tif (this.nodeType != \"Collection\") {\n\t\t\t\treturn (this.element.getAttribute(\"mv-path\") || \"\").split(\"/\").filter(p => p.length);\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t},\n\n\tlive: {\n\t\tstore: function(value) {\n\t\t\t$.toggleAttribute(this.element, \"mv-storage\", value);\n\t\t},\n\n\t\tunsavedChanges: function(value) {\n\t\t\tif (value && (!this.saved || !this.editing)) {\n\t\t\t\tvalue = false;\n\t\t\t}\n\n\t\t\tthis.element.classList.toggle(\"mv-unsaved-changes\", value);\n\n\t\t\treturn value;\n\t\t},\n\n\t\tmode: function (value) {\n\t\t\tif (this._mode != value) {\n\t\t\t\t// Is it allowed?\n\t\t\t\tif (this.modes && value != this.modes) {\n\t\t\t\t\tvalue = this.modes;\n\t\t\t\t}\n\n\t\t\t\t// If we don't do this, setting the attribute below will\n\t\t\t\t// result in infinite recursion\n\t\t\t\tthis._mode = value;\n\n\t\t\t\tif (!(this instanceof Mavo.Collection) && [null, \"\", \"read\", \"edit\"].indexOf(this.element.getAttribute(\"mv-mode\")) > -1) {\n\t\t\t\t\t// If attribute is not one of the recognized values, leave it alone\n\t\t\t\t\tvar set = this.modes || value == \"edit\";\n\t\t\t\t\tMavo.Observer.sneak(this.mavo.modeObserver, () => {\n\t\t\t\t\t\t$.toggleAttribute(this.element, \"mv-mode\", value, set);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\n\t\tmodes: function(value) {\n\t\t\tif (value && value != \"read\" && value != \"edit\") {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tthis._modes = value;\n\n\t\t\tif (value && this.mode != value) {\n\t\t\t\tthis.mode = value;\n\t\t\t}\n\t\t},\n\n\t\tdeleted: function(value) {\n\t\t\tthis.element.classList.toggle(\"mv-deleted\", value);\n\n\t\t\tif (value) {\n\t\t\t\t// Soft delete, store element contents in a fragment\n\t\t\t\t// and replace them with an undo prompt.\n\t\t\t\tthis.elementContents = document.createDocumentFragment();\n\t\t\t\t$$(this.element.childNodes).forEach(node => {\n\t\t\t\t\tthis.elementContents.appendChild(node);\n\t\t\t\t});\n\n\t\t\t\t$.contents(this.element, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\tclassName: \"mv-close mv-ui\",\n\t\t\t\t\t\ttextContent: \"\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": function(evt) {\n\t\t\t\t\t\t\t\t$.remove(this.parentNode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"Deleted \" + this.name,\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\tclassName: \"mv-undo mv-ui\",\n\t\t\t\t\t\ttextContent: \"Undo\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": evt => this.deleted = false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]);\n\n\t\t\t\tthis.element.classList.remove(\"mv-highlight\");\n\t\t\t}\n\t\t\telse if (this.deleted) {\n\t\t\t\t// Undelete\n\t\t\t\tthis.element.textContent = \"\";\n\t\t\t\tthis.element.appendChild(this.elementContents);\n\n\t\t\t\t// otherwise expressions won't update because this will still seem as deleted\n\t\t\t\t// Alternatively, we could fire datachange with a timeout.\n\t\t\t\tthis._deleted = false;\n\n\t\t\t\tthis.dataChanged(\"undelete\");\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tmaxId: 0,\n\n\t\tall: new WeakMap(),\n\n\t\tcreate: function(element, mavo, o = {}) {\n\t\t\tif (Mavo.is(\"multiple\", element) && !o.collection) {\n\t\t\t\treturn new Mavo.Collection(element, mavo, o);\n\t\t\t}\n\n\t\t\treturn new Mavo[Mavo.is(\"group\", element)? \"Group\" : \"Primitive\"](element, mavo, o);\n\t\t},\n\n\t\t/**\n\t\t * Get & normalize property name, if exists\n\t\t */\n\t\tgetProperty: function(element) {\n\t\t\tvar property = element.getAttribute(\"property\") || element.getAttribute(\"itemprop\");\n\n\t\t\tif (!property && element.hasAttribute(\"property\")) {\n\t\t\t\tproperty = element.name || element.id || element.classList[0];\n\t\t\t}\n\n\t\t\tif (property) {\n\t\t\t\telement.setAttribute(\"property\", property);\n\t\t\t}\n\n\t\t\treturn property;\n\t\t},\n\n\t\tget: function(element, prioritizePrimitive) {\n\t\t\tvar nodes = (_.all.get(element) || []).filter(node => !(node instanceof Mavo.Collection));\n\n\t\t\tif (nodes.length < 2 || !prioritizePrimitive) {\n\t\t\t\treturn nodes[0];\n\t\t\t}\n\n\t\t\tif (nodes[0] instanceof Mavo.Group) {\n\t\t\t\treturn node[1];\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get all properties that are inside an element but not nested into other properties\n\t\t */\n\t\tchildren: function(element) {\n\t\t\tvar ret = Mavo.Node.get(element);\n\n\t\t\tif (ret) {\n\t\t\t\t// element is a Mavo node\n\t\t\t\treturn [ret];\n\t\t\t}\n\n\t\t\tret = $$(Mavo.selectors.property, element)\n\t\t\t\t.map(e => Mavo.Node.get(e))\n\t\t\t\t.filter(e => !element.contains(e.parentGroup.element)) // drop nested properties\n\t\t\t\t.map(e => e.collection || e);\n\n\t\t\treturn Mavo.Functions.unique(ret);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.Group = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Group\",\n\tconstructor: function (element, mavo, o) {\n\t\tthis.children = {};\n\n\t\tthis.group = this;\n\n\t\tMavo.hooks.run(\"group-init-start\", this);\n\n\t\t// Should this element also create a primitive?\n\t\tif (Mavo.Primitive.getValueAttribute(this.element)) {\n\t\t\tvar obj = this.children[this.property] = new Mavo.Primitive(this.element, this.mavo, {group: this});\n\t\t}\n\n\t\t// Create Mavo objects for all properties in this group (primitives or groups),\n\t\t// but not properties in descendant groups (they will be handled by their group)\n\t\t$$(Mavo.selectors.property, this.element).forEach(element => {\n\t\t\tvar property = Mavo.Node.getProperty(element);\n\n\t\t\tif (this.contains(element)) {\n\t\t\t\tvar existing = this.children[property];\n\t\t\t\tvar template = this.template? this.template.children[property] : null;\n\t\t\t\tvar constructorOptions = {template, group: this};\n\n\t\t\t\tif (existing) {\n\t\t\t\t\t// Twogroups with the same property, convert to static collection\n\t\t\t\t\tvar collection = existing;\n\n\t\t\t\t\tif (!(existing instanceof Mavo.Collection)) {\n\t\t\t\t\t\tcollection = new Mavo.Collection(existing.element, this.mavo, constructorOptions);\n\t\t\t\t\t\tthis.children[property] = existing.collection = collection;\n\t\t\t\t\t\tcollection.add(existing);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!collection.mutable && Mavo.is(\"multiple\", element)) {\n\t\t\t\t\t\tcollection.mutable = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tcollection.add(element);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// No existing properties with this id, normal case\n\t\t\t\t\tvar obj = Mavo.Node.create(element, this.mavo, constructorOptions);\n\n\t\t\t\t\tthis.children[property] = obj;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tvar vocabElement = (this.isRoot? this.element.closest(\"[vocab]\") : null) || this.element;\n\t\tthis.vocab = vocabElement.getAttribute(\"vocab\");\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"group-init-end\", this);\n\t},\n\n\tget isRoot() {\n\t\treturn !this.property;\n\t},\n\n\tgetNames: function(type = \"Node\") {\n\t\treturn Object.keys(this.children).filter(p => this.children[p] instanceof Mavo[type]);\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: this.super.getData.call(this, o)\n\t\t};\n\n\t\tif (env.data !== undefined) {\n\t\t\t// Super method returned something\n\t\t\treturn env.data;\n\t\t}\n\n\t\tenv.data = this.data? Mavo.clone(Mavo.subset(this.data, this.inPath)) : {};\n\n\t\tfor (let property in this.children) {\n\t\t\tlet obj = this.children[property];\n\n\t\t\tif (obj.saved || env.options.live) {\n\t\t\t\tlet data = obj.getData(o);\n\n\t\t\t\tif (data !== null || env.options.live) {\n\t\t\t\t\tenv.data[obj.property] = data;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!env.options.live) { // Stored data\n\t\t\t// If storing, use the rendered data too\n\t\t\tenv.data = Mavo.subset(this.data, this.inPath, env.data);\n\t\t}\n\n\t\t// {foo: {foo: 5}} should become {foo: 5}\n\t\tvar properties = Object.keys(env.data);\n\n\t\tif (properties.length == 1 && properties[0] == this.property) {\n\t\t\tenv.data = env.data[this.property];\n\t\t}\n\n\t\tif (!env.options.live) { // Stored data again\n\t\t\tif (!properties.length && !this.isRoot) {\n\t\t\t\t// Avoid {} in the data\n\t\t\t\tenv.data = null;\n\t\t\t}\n\t\t\telse if (env.data && typeof env.data === \"object\") {\n\t\t\t\t// Add JSON-LD stuff\n\t\t\t\tif (this.type && this.type != _.DEFAULT_TYPE) {\n\t\t\t\t\tenv.data[\"@type\"] = this.type;\n\t\t\t\t}\n\n\t\t\t\tif (this.vocab) {\n\t\t\t\t\tenv.data[\"@context\"] = this.vocab;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn env.data;\n\t},\n\n\t/**\n\t * Search entire subtree for property, return relative value\n\t * @return {Mavo.Node}\n\t */\n\tfind: function(property, o = {}) {\n\t\tif (this.property == property) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif (property in this.children) {\n\t\t\treturn this.children[property].find(property, o);\n\t\t}\n\n\t\tvar all = [];\n\n\t\tfor (var prop in this.children) {\n\t\t\tvar ret = this.children[prop].find(property, o);\n\n\t\t\tif (ret !== undefined) {\n\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\tall.push(...ret);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (all.length) {\n\t\t\treturn all;\n\t\t}\n\t},\n\n\tedit: function() {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\t\t\n\t\tthis.propagate(\"edit\");\n\t},\n\n\tsave: function() {\n\t\tthis.unsavedChanges = false;\n\t},\n\n\tpropagated: [\"save\", \"import\", \"clear\"],\n\n\t// Do not call directly, call this.render() instead\n\tdataRender: function(data) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\t// What if data is not an object?\n\t\tif (typeof data !== \"object\") {\n\t\t\t// Data is a primitive, render it on this.property or failing that, any writable property\n\t\t\tvar score = prop => (prop == this.property)\n\t\t\t\t+ (!this.children[prop].expressionText)\n\t\t\t\t+ (this.children[prop] instanceof Mavo.Primitive);\n\t\t\tvar property = Object.keys(this.children).sort((prop1, prop2) => score(prop1) - score(prop2)).reverse()[0];\n\n\t\t\tdata = {[property]: data};\n\n\t\t\tthis.data = Mavo.subset(this.data, this.inPath, data);\n\n\t\t\tthis.propagate(obj => {\n\t\t\t\tobj.render(data[obj.property]);\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\tthis.propagate(obj => {\n\t\t\t\tobj.render(data[obj.property]);\n\t\t\t});\n\n\t\t\t// Fire datachange events for properties not in the template,\n\t\t\t// since nothing else will and they can still be referenced in expressions\n\t\t\tvar oldData = Mavo.subset(this.oldData, this.inPath);\n\n\t\t\tfor (let property in data) {\n\t\t\t\tif (!(property in this.children)) {\n\t\t\t\t\tlet value = data[property];\n\n\t\t\t\t\tif (typeof value != \"object\" && (!oldData || oldData[property] != value)) {\n\t\t\t\t\t\tthis.dataChanged(\"propertychange\", {property});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\t// Check if this group contains a property\n\tcontains: function(property) {\n\t\tif (property instanceof Mavo.Node) {\n\t\t\treturn property.parentGroup === this;\n\t\t}\n\n\t\treturn property.parentNode && (this.element === property.parentNode.closest(Mavo.selectors.group));\n\t},\n\n\tstatic: {\n\t\tall: new WeakMap(),\n\n\t\tDEFAULT_TYPE: \"Item\",\n\n\t\tnormalize: function(element) {\n\t\t\t// Get & normalize typeof name, if exists\n\t\t\tif (Mavo.is(\"group\", element)) {\n\t\t\t\tvar type = Mavo.getAttribute(element, \"typeof\", \"itemtype\") || _.DEFAULT_TYPE;\n\n\t\t\t\telement.setAttribute(\"typeof\", type);\n\n\t\t\t\treturn type;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.Primitive = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Primitive\",\n\tconstructor: function (element, mavo, o) {\n\t\tif (!this.fromTemplate(\"config\", \"attribute\", \"templateValue\")) {\n\t\t\tthis.config = _.getConfig(element);\n\n\t\t\t// Which attribute holds the data, if any?\n\t\t\t// \"null\" or null for none (i.e. data is in content).\n\t\t\tthis.attribute = this.config.attribute;\n\t\t}\n\n\t\tthis.datatype = this.config.datatype;\n\n\t\tif (\"modes\" in this.config) {\n\t\t\t// If modes are related to element type, this overrides everything\n\t\t\t// because it means the other mode makes no sense for that element\n\t\t\tthis.modes = this.config.modes;\n\t\t\tthis.element.setAttribute(\"mv-mode\", this.config.modes);\n\t\t}\n\n\t\tMavo.hooks.run(\"primitive-init-start\", this);\n\n\t\t// Link primitive with its expressionText object\n\t\t// We need to do this before any editing UI is generated\n\t\tthis.expressionText = Mavo.DOMExpression.search(this.element, this.attribute);\n\n\t\tif (this.expressionText && !this.expressionText.mavoNode) {\n\t\t\tthis.expressionText.primitive = this;\n\t\t\tthis.storage = this.storage || \"none\";\n\t\t\tthis.modes = \"read\";\n\t\t}\n\n\t\tif (this.config.init) {\n\t\t\tthis.config.init.call(this, this.element);\n\t\t}\n\n\t\tif (this.config.changeEvents) {\n\t\t\t$.events(this.element, this.config.changeEvents, evt => {\n\t\t\t\tif (evt.target === this.element) {\n\t\t\t\t\tthis.value = this.getValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Set up input widget\n\t\t */\n\n\t\t // Linked widgets\n\t\tif (!this.editor && this.element.hasAttribute(\"mv-edit\")) {\n\t\t\tvar original = $(this.element.getAttribute(\"mv-edit\"));\n\n\t\t\tif (original) {\n\t\t\t\tthis.editor = original.cloneNode(true);\n\n\t\t\t\t// Update editor if original mutates\n\t\t\t\t// This means that expressions on mv-edit for individual collection items will not be picked up\n\t\t\t\tif (!this.template) {\n\t\t\t\t\tnew Mavo.Observer(original, \"all\", records => {\n\t\t\t\t\t\tvar all = this.copies.concat(this);\n\n\t\t\t\t\t\tfor (let primitive of all) {\n\t\t\t\t\t\t\tprimitive.editor = original.cloneNode(true);\n\t\t\t\t\t\t\tprimitive.setValue(primitive.value, {force: true, silent: true});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Nested widgets\n\t\tif (!this.editor && !this.attribute) {\n\t\t\tthis.editor = $$(this.element.children).filter(function (el) {\n\t\t\t    return el.matches(Mavo.selectors.formControl) && !el.matches(Mavo.selectors.property);\n\t\t\t})[0];\n\n\t\t\tif (this.editor) {\n\t\t\t\tthis.element.textContent = this.editorValue;\n\t\t\t\t$.remove(this.editor);\n\t\t\t}\n\t\t}\n\n\t\tthis.templateValue = this.getValue();\n\n\t\tthis._default = this.element.getAttribute(\"mv-default\");\n\n\t\tif (this.default === null) { // no mv-default\n\t\t\tthis._default = this.modes === \"read\"? this.templateValue : (this.editor? this.editorValue : undefined);\n\t\t}\n\t\telse if (this.default === \"\") { // mv-default exists, no value, default is template value\n\t\t\tthis._default = this.templateValue;\n\t\t}\n\t\telse { // mv-default with value\n\t\t\tthis.defaultObserver = new Mavo.Observer(this.element, \"mv-default\", record => {\n\t\t\t\tthis.default = this.element.getAttribute(\"mv-default\");\n\t\t\t});\n\t\t}\n\n\t\tthis.initialValue = (!this.template && this.default === undefined? this.templateValue : this.default) || this.emptyValue;\n\n\t\tthis.setValue(this.initialValue, {silent: true});\n\n\t\t// Observe future mutations to this property, if possible\n\t\t// Properties like input.checked or input.value cannot be observed that way\n\t\t// so we cannot depend on mutation observers for everything :(\n\t\tthis.observer = new Mavo.Observer(this.element, this.attribute, records => {\n\t\t\tif (this.attribute || !this.editing) {\n\t\t\t\tthis.value = this.getValue();\n\t\t\t}\n\t\t});\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"primitive-init-end\", this);\n\t},\n\n\tget editorValue() {\n\t\tif (this.config.getEditorValue) {\n\t\t\treturn this.config.getEditorValue.call(this);\n\t\t}\n\n\t\tif (this.editor) {\n\t\t\tif (this.editor.matches(Mavo.selectors.formControl)) {\n\t\t\t\treturn _.getValue(this.editor, {datatype: this.datatype});\n\t\t\t}\n\n\t\t\t// if we're here, this.editor is an entire HTML structure\n\t\t\tvar output = $(Mavo.selectors.output + \", \" + Mavo.selectors.formControl, this.editor);\n\n\t\t\tif (output) {\n\t\t\t\treturn _.getValue(output);\n\t\t\t}\n\t\t}\n\t},\n\n\tset editorValue(value) {\n\t\tif (this.config.setEditorValue) {\n\t\t\treturn this.config.setEditorValue.call(this, value);\n\t\t}\n\n\t\tif (this.editor) {\n\t\t\tif (this.editor.matches(Mavo.selectors.formControl)) {\n\t\t\t\t_.setValue(this.editor, value, {config: this.editorDefaults});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// if we're here, this.editor is an entire HTML structure\n\t\t\t\tvar output = $(Mavo.selectors.output + \", \" + Mavo.selectors.formControl, this.editor);\n\n\t\t\t\tif (output) {\n\t\t\t\t\t_.setValue(output, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tdestroy: function() {\n\t\tthis.super.destroy.call(this);\n\n\t\tthis.defaultObserver && this.defaultObserver.destroy();\n\t\tthis.observer && this.observer.destroy();\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: this.super.getData.call(this, o)\n\t\t};\n\n\t\tif (env.data !== undefined) {\n\t\t\treturn env.data;\n\t\t}\n\n\t\tenv.data = this.value;\n\n\t\tif (env.data === \"\") {\n\t\t\tenv.data = null;\n\t\t}\n\n\t\tif (!o.live && this.inPath.length) {\n\t\t\tenv.data = Mavo.subset(this.data, this.inPath, env.data);\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn env.data;\n\t},\n\n\tsneak: function(callback) {\n\t\treturn Mavo.Observer.sneak(this.observer, callback);\n\t},\n\n\tsave: function() {\n\t\tthis.savedValue = this.value;\n\t\tthis.unsavedChanges = false;\n\t},\n\n\t// Called only the first time this primitive is edited\n\tinitEdit: function () {\n\t\tif (!this.editor) {\n\t\t\t// No editor provided, use default for element type\n\t\t\t// Find default editor for datatype\n\t\t\tvar editor = this.config.editor || Mavo.Elements.defaultEditors[this.datatype] || Mavo.Elements.defaultEditors.string;\n\n\t\t\tthis.editor = $.create($.type(editor) === \"function\"? editor.call(this) : editor);\n\t\t\tthis.editorValue = this.value;\n\t\t}\n\n\t\t$.events(this.editor, {\n\t\t\t\"input change\": evt => {\n\t\t\t\tthis.value = this.editorValue;\n\t\t\t},\n\t\t\t\"focus\": evt => {\n\t\t\t\tthis.editor.select && this.editor.select();\n\t\t\t},\n\t\t\t\"mavo:datachange\": evt => {\n\t\t\t\tif (evt.property === \"output\") {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t$.fire(this.editor, \"input\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (\"placeholder\" in this.editor) {\n\t\t\tthis.editor.placeholder = \"(\" + this.label + \")\";\n\t\t}\n\n\t\t// Copy any data-input-* attributes from the element to the editor\n\t\tvar dataInput = /^mv-edit-/i;\n\t\t$$(this.element.attributes).forEach(function (attribute) {\n\t\t\tif (dataInput.test(attribute.name)) {\n\t\t\t\tthis.editor.setAttribute(attribute.name.replace(dataInput, \"\"), attribute.value);\n\t\t\t}\n\t\t}, this);\n\n\t\tif (this.attribute || this.config.popup) {\n\t\t\tthis.popup = new Mavo.UI.Popup(this);\n\t\t}\n\n\t\tif (!this.popup) {\n\t\t\tthis.editor.classList.add(\"mv-editor\");\n\t\t}\n\n\t\tthis.initEdit = null;\n\t},\n\n\tedit: function () {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Make element focusable, so it can actually receive focus\n\t\tthis.element._.data.prevTabindex = this.element.getAttribute(\"tabindex\");\n\t\tthis.element.tabIndex = 0;\n\n\t\t// Prevent default actions while editing\n\t\t// e.g. following links etc\n\t\tthis.element.addEventListener(\"click.mavo:edit\", evt => evt.preventDefault());\n\n\t\tthis.preEdit = Mavo.defer((resolve, reject) => {\n\t\t\t// Empty properties should become editable immediately\n\t\t\t// otherwise they could be invisible!\n\t\t\tif (this.empty && !this.attribute) {\n\t\t\t\treturn requestAnimationFrame(resolve);\n\t\t\t}\n\n\t\t\tvar timer;\n\n\t\t\tvar events = \"click focus dragover dragenter\".split(\" \").map(e => e + \".mavo:preedit\").join(\" \");\n\t\t\t$.events(this.element, events, resolve);\n\n\t\t\tif (!this.attribute) {\n\t\t\t\t// Hovering over the element for over 150ms will trigger edit\n\t\t\t\t$.events(this.element, {\n\t\t\t\t\t\"mouseenter.mavo:preedit\": e => {\n\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\ttimer = setTimeout(resolve, 150);\n\t\t\t\t\t},\n\t\t\t\t\t\"mouseleave.mavo:preedit\": e => {\n\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}).then(() => $.unbind(this.element, \".mavo:preedit\"));\n\n\t\tif (this.config.edit) {\n\t\t\tthis.config.edit.call(this);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.preEdit.then(() => {\n\t\t\t// Actual edit\n\t\t\tif (this.initEdit) {\n\t\t\t\tthis.initEdit();\n\t\t\t}\n\n\t\t\tif (this.popup) {\n\t\t\t\tthis.popup.show();\n\t\t\t}\n\n\t\t\tif (!this.attribute && !this.popup) {\n\t\t\t\tif (this.editor.parentNode != this.element) {\n\t\t\t\t\tthis.editorValue = this.value;\n\t\t\t\t\tthis.element.textContent = \"\";\n\n\t\t\t\t\tthis.element.appendChild(this.editor);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}, // edit\n\n\tdone: function () {\n\t\tif (this.super.done.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\"preEdit\" in this) {\n\t\t\t$.unbind(this.element, \".mavo:preedit .mavo:edit\");\n\t\t}\n\n\t\tthis.sneak(() => {\n\t\t\tif (this.config.done) {\n\t\t\t\tthis.config.done.call(this);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.popup) {\n\t\t\t\tthis.popup.close();\n\t\t\t}\n\t\t\telse if (!this.attribute && this.editor) {\n\t\t\t\t$.remove(this.editor);\n\t\t\t\tthis.element.textContent = this.editorValue;\n\t\t\t}\n\t\t});\n\n\t\t// Revert tabIndex\n\t\tif (this.element._.data.prevTabindex !== null) {\n\t\t\tthis.element.tabIndex = this.element._.data.prevTabindex;\n\t\t}\n\t\telse {\n\t\t\tthis.element.removeAttribute(\"tabindex\");\n\t\t}\n\t},\n\n\tclear: function() {\n\t\tthis.value = this.templateValue;\n\t},\n\n\tdataRender: function(data) {\n\t\tif (data && typeof data === \"object\") {\n\t\t\tif (Symbol.toPrimitive in data) {\n\t\t\t\tdata = data[Symbol.toPrimitive]();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Candidate properties to get a value from\n\t\t\t\tfor (let property of [this.property, \"value\", ...Object.keys(data)]) {\n\t\t\t\t\tif (property in data) {\n\t\t\t\t\t\tdata = data[property];\n\t\t\t\t\t\tthis.inPath.push(property);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data === undefined) {\n\t\t\t// New property has been added to the schema and nobody has saved since\n\t\t\tif (this.modes != \"read\") {\n\t\t\t\tthis.value = this.closestCollection? this.default : this.templateValue;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tthis.value = data;\n\t\t}\n\t},\n\n\tfind: function(property) {\n\t\tif (this.property == property) {\n\t\t\treturn this;\n\t\t}\n\t},\n\n\t/**\n\t * Get value from the DOM\n\t */\n\tgetValue: function(o) {\n\t\treturn _.getValue(this.element, {\n\t\t\tconfig: this.config,\n\t\t\tattribute: this.attribute,\n\t\t\tdatatype: this.datatype\n\t\t});\n\t},\n\n\tlazy: {\n\t\tlabel: function() {\n\t\t\treturn Mavo.Functions.readable(this.property);\n\t\t},\n\n\t\temptyValue: function() {\n\t\t\tswitch (this.datatype) {\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\treturn false;\n\t\t\t\tcase \"number\":\n\t\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t},\n\n\t\teditorDefaults: function() {\n\t\t\treturn this.editor && _.getConfig(this.editor);\n\t\t}\n\t},\n\n\tsetValue: function (value, o = {}) {\n\t\tthis.sneak(() => {\n\t\t\tif ($.type(value) == \"object\" && \"value\" in value) {\n\t\t\t\tvar presentational = value.presentational;\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\n\t\t\t// Convert nulls and undefineds to empty string\n\t\t\tvalue = value || value === 0? value : \"\";\n\n\t\t\t// If there's no datatype, adopt that of the value\n\t\t\tif (!this.datatype && (typeof value == \"number\" || typeof value == \"boolean\")) {\n\t\t\t\tthis.datatype = typeof value;\n\t\t\t}\n\n\t\t\tvalue = _.safeCast(value, this.datatype);\n\n\t\t\tif (value == this._value && !o.force) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (this.editor && document.activeElement != this.editor) {\n\t\t\t\tthis.editorValue = value;\n\t\t\t}\n\n\t\t\tif (this.config.humanReadable && this.attribute) {\n\t\t\t\tpresentational = this.config.humanReadable.call(this, value);\n\t\t\t}\n\n\t\t\tif (!this.editing || this.popup || !this.editor) {\n\t\t\t\tif (this.config.setValue) {\n\t\t\t\t\tthis.config.setValue.call(this, this.element, value);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (this.editor && this.editor.matches(\"select\") && this.editor.selectedOptions[0]) {\n\t\t\t\t\t\tpresentational = this.editor.selectedOptions[0].textContent;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!o.dataOnly) {\n\t\t\t\t\t\t_.setValue(this.element, {value, presentational}, {\n\t\t\t\t\t\t\tconfig: this.config,\n\t\t\t\t\t\t\tattribute: this.attribute,\n\t\t\t\t\t\t\tdatatype: this.datatype\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.empty = value === \"\";\n\n\t\t\tthis._value = value;\n\n\t\t\tif (!o.silent) {\n\t\t\t\tif (this.saved) {\n\t\t\t\t\tthis.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t\t\t}\n\n\t\t\t\tthis.dataChanged(\"propertychange\", {value});\n\t\t\t}\n\t\t});\n\n\t\treturn value;\n\t},\n\n\tdataChanged: function(action = \"propertychange\", o) {\n\t\treturn this.super.dataChanged.call(this, action, o);\n\t},\n\n\tlive: {\n\t\tdefault: function (value) {\n\t\t\tif (this.value == this._default) {\n\n\t\t\t\tthis.value = value;\n\t\t\t}\n\t\t},\n\n\t\tvalue: function (value) {\n\t\t\treturn this.setValue(value);\n\t\t},\n\n\t\tempty: function (value) {\n\t\t\tvar hide = value && // is empty\n\t\t\t           !this.modes && // and supports both modes\n\t\t\t\t\t   this.config.default && // and using the default settings\n\t\t\t           !(this.attribute && $(Mavo.selectors.property, this.element)); // and has no property inside\n\n\t\t\tthis.element.classList.toggle(\"mv-empty\", !!hide);\n\t\t}\n\t},\n\n\tstatic: {\n\t\tall: new WeakMap(),\n\n\t\tgetValueAttribute: function (element, config = Mavo.Elements.search(element)) {\n\t\t\tvar ret = element.getAttribute(\"mv-attribute\") || config.attribute;\n\n\t\t\tif (!ret || ret === \"null\" || ret === \"none\") {\n\t\t\t\tret = null;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t/**\n\t\t * Only cast if conversion is lossless\n\t\t */\n\t\tsafeCast: function(value, datatype) {\n\t\t\tvar existingType = typeof value;\n\t\t\tvar cast = _.cast(value, datatype);\n\n\t\t\tif (value === null || value === undefined) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (datatype == \"boolean\") {\n\t\t\t\tif (value === \"false\" || value === 0 || value === \"\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (value === \"true\" || value > 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (datatype == \"number\") {\n\t\t\t\tif (/^[-+]?[0-9.e]+$/i.test(value + \"\")) {\n\t\t\t\t\treturn cast;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\treturn cast;\n\t\t},\n\n\t\t/**\n\t\t * Cast to a different primitive datatype\n\t\t */\n\t\tcast: function(value, datatype) {\n\t\t\tswitch (datatype) {\n\t\t\t\tcase \"number\": return +value;\n\t\t\t\tcase \"boolean\": return !!value;\n\t\t\t\tcase \"string\": return value + \"\";\n\t\t\t}\n\n\t\t\treturn value;\n\t\t},\n\n\t\tgetValue: function (element, {config, attribute, datatype} = {}) {\n\t\t\tif (!config) {\n\t\t\t\tconfig = _.getConfig(element, attribute);\n\t\t\t}\n\n\t\t\tattribute = config.attribute;\n\t\t\tdatatype = config.datatype;\n\n\t\t\tif (config.getValue && attribute == config.attribute) {\n\t\t\t\treturn config.getValue(element);\n\t\t\t}\n\n\t\t\tvar ret;\n\n\t\t\tif (attribute in element && _.useProperty(element, attribute)) {\n\t\t\t\t// Returning properties (if they exist) instead of attributes\n\t\t\t\t// is needed for dynamic elements such as checkboxes, sliders etc\n\t\t\t\tret = element[attribute];\n\t\t\t}\n\t\t\telse if (attribute) {\n\t\t\t\tret = element.getAttribute(attribute);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tret = element.getAttribute(\"content\") || element.textContent || null;\n\t\t\t}\n\n\t\t\treturn _.safeCast(ret, datatype);\n\t\t},\n\n\t\tgetConfig: function(element, attribute, datatype) {\n\t\t\tif (attribute === undefined) {\n\t\t\t\tattribute = element.getAttribute(\"mv-attribute\") || undefined;\n\t\t\t}\n\n\t\t\tif (attribute == \"null\" || attribute == \"none\") {\n\t\t\t\tattribute = null;\n\t\t\t}\n\n\t\t\tdatatype = element.getAttribute(\"datatype\") || undefined;\n\n\t\t\tvar config = Mavo.Elements.search(element, attribute, datatype);\n\n\t\t\tif (config.attribute === undefined) {\n\t\t\t\tconfig.attribute = attribute || null;\n\t\t\t}\n\n\t\t\tif (config.datatype === undefined) {\n\t\t\t\tconfig.datatype = datatype;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t},\n\n\t\tsetValue: function (element, value, {config, attribute, datatype} = {}) {\n\t\t\tif ($.type(value) == \"object\" && \"value\" in value) {\n\t\t\t\tvar presentational = value.presentational;\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\n\t\t\tif (element.nodeType === 1) {\n\t\t\t\tif (!config) {\n\t\t\t\t\tconfig = _.getConfig(element, attribute);\n\t\t\t\t}\n\n\t\t\t\tattribute = config.attribute;\n\n\t\t\t\tdatatype = datatype !== undefined? datatype : config.datatype;\n\n\t\t\t\tif (config.setValue && attribute == config.attribute) {\n\t\t\t\t\treturn config.setValue(element, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (attribute) {\n\t\t\t\tif (attribute in element && _.useProperty(element, attribute) && element[attribute] !== value) {\n\t\t\t\t\t// Setting properties (if they exist) instead of attributes\n\t\t\t\t\t// is needed for dynamic elements such as checkboxes, sliders etc\n\t\t\t\t\ttry {\n\t\t\t\t\t\telement[attribute] = value;\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {}\n\t\t\t\t}\n\n\t\t\t\t// Set attribute anyway, even if we set a property because when\n\t\t\t\t// they're not in sync it gets really fucking confusing.\n\t\t\t\tif (datatype == \"boolean\") {\n\t\t\t\t\tif (value != element.hasAttribute(attribute)) {\n\t\t\t\t\t\t$.toggleAttribute(element, attribute, value, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (element.getAttribute(attribute) != value) {  // intentionally non-strict, e.g. \"3.\" !== 3\n\t\t\t\t\telement.setAttribute(attribute, value);\n\n\t\t\t\t\tif (presentational) {\n\t\t\t\t\t\telement.textContent = presentational;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (datatype === \"number\" && !presentational) {\n\t\t\t\t\tpresentational = _.formatNumber(value);\n\t\t\t\t}\n\n\t\t\t\telement.textContent = presentational || value;\n\n\t\t\t\tif (presentational && element.setAttribute) {\n\t\t\t\t\telement.setAttribute(\"content\", value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *  Set/get a property or an attribute?\n\t\t * @return {Boolean} true to use a property, false to use the attribute\n\t\t */\n\t\tuseProperty: function(element, attribute) {\n\t\t\tif ([\"href\", \"src\"].indexOf(attribute) > -1) {\n\t\t\t\t// URL properties resolve \"\" as location.href, fucking up emptiness checks\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (element.namespaceURI == \"http://www.w3.org/2000/svg\") {\n\t\t\t\t// SVG has a fucked up DOM, do not use these properties\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tlazy: {\n\t\t\tformatNumber: () => {\n\t\t\t\tvar numberFormat = new Intl.NumberFormat(\"en-US\", {maximumFractionDigits:2});\n\n\t\t\t\treturn function(value) {\n\t\t\t\t\tif (value === Infinity || value === -Infinity) {\n\t\t\t\t\t\t// Pretty print infinity\n\t\t\t\t\t\treturn value < 0? \"-\" : \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn numberFormat.format(value);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.UI.Popup = $.Class({\n\tconstructor: function(primitive) {\n\t\tthis.primitive = primitive;\n\n\t\t// Need to be defined here so that this is what expected\n\t\tthis.position = evt => {\n\t\t\tvar bounds = this.element.getBoundingClientRect();\n\t\t\tvar x = bounds.left;\n\t\t\tvar y = bounds.bottom;\n\n\t\t\tif (this.popup.offsetHeight) {\n\t\t\t\t// Is in the DOM, check if it fits\n\t\t\t\tvar popupBounds = this.popup.getBoundingClientRect();\n\n\t\t\t\tif (popupBounds.height + y > innerHeight) {\n\t\t\t\t\ty = innerHeight - popupBounds.height - 20;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t$.style(this.popup, { top:  `${y}px`, left: `${x}px` });\n\t\t};\n\n\t\tthis.popup = $.create(\"div\", {\n\t\t\tclassName: \"mv-popup\",\n\t\t\thidden: true,\n\t\t\tcontents: {\n\t\t\t\ttag: \"fieldset\",\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"legend\",\n\t\t\t\t\t\ttextContent: this.primitive.label + \":\"\n\t\t\t\t\t},\n\t\t\t\t\tthis.editor\n\t\t\t\t]\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tkeyup: evt => {\n\t\t\t\t\tif (evt.keyCode == 13 || evt.keyCode == 27) {\n\t\t\t\t\t\tif (this.popup.contains(document.activeElement)) {\n\t\t\t\t\t\t\tthis.element.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ttransitionend: this.position\n\t\t\t}\n\t\t});\n\n\t\t// No point in having a dropdown in a popup\n\t\tif (this.editor.matches(\"select\")) {\n\t\t\tthis.editor.size = Math.min(10, this.editor.children.length);\n\t\t}\n\t},\n\n\tshow: function() {\n\t\t$.unbind([this.element, this.popup], \".mavo:showpopup\");\n\n\t\tthis.shown = true;\n\n\t\tthis.hideCallback = evt => {\n\t\t\tif (!this.popup.contains(evt.target) && !this.element.contains(evt.target)) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.position();\n\n\t\tdocument.body.appendChild(this.popup);\n\n\t\trequestAnimationFrame(e => this.popup.removeAttribute(\"hidden\")); // trigger transition\n\n\t\t$.events(document, \"focus click\", this.hideCallback, true);\n\t\twindow.addEventListener(\"scroll\", this.position);\n\t},\n\n\thide: function() {\n\t\t$.unbind(document, \"focus click\", this.hideCallback, true);\n\t\twindow.removeEventListener(\"scroll\", this.position);\n\t\tthis.popup.setAttribute(\"hidden\", \"\"); // trigger transition\n\t\tthis.shown = false;\n\n\t\tsetTimeout(() => {\n\t\t\t$.remove(this.popup);\n\t\t}, parseFloat(getComputedStyle(this.popup).transitionDuration) * 1000 || 400); // TODO transition-duration could override this\n\n\t\t$.events(this.element, {\n\t\t\t\"click.mavo:showpopup\": evt => {\n\t\t\t\tthis.show();\n\t\t\t},\n\t\t\t\"keyup.mavo:showpopup\": evt => {\n\t\t\t\tif ([13, 113].indexOf(evt.keyCode) > -1) { // Enter or F2\n\t\t\t\t\tthis.show();\n\t\t\t\t\tthis.editor.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tclose: function() {\n\t\tthis.hide();\n\t\t$.unbind(this.element, \".mavo:edit .mavo:preedit .mavo:showpopup\");\n\t},\n\n\tproxy: {\n\t\t\"editor\": \"primitive\",\n\t\t\"element\": \"primitive\"\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n/**\n * Configuration for different types of elements. Options:\n * - attribute {String}\n * - useProperty {Boolean}\n * - datatype {\"number\"|\"boolean\"|\"string\"} Default is \"string\"\n * - modes\n * - editor {Object|Function}\n * - setEditorValue temporary\n * - edit\n * - done\n * - observe\n * - default: If there is no attribute, can we use that rule to pick one?\n * @\n */\n(function($, $$) {\n\nvar _ = Mavo.Elements = {};\n\nObject.defineProperties(_, {\n\t\"register\": {\n\t\tvalue: function(id, o) {\n\t\t\tif (typeof arguments[0] === \"object\") {\n\t\t\t\t// Multiple definitions\n\t\t\t\tfor (let s in arguments[0]) {\n\t\t\t\t\t_.register(s, arguments[0][s]);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar all = Mavo.toArray(arguments[1]);\n\n\t\t\tfor (config of all) {\n\t\t\t\tconfig.attribute = Mavo.toArray(config.attribute || null);\n\n\t\t\t\tfor (attribute of config.attribute) {\n\t\t\t\t\tlet o = $.extend({}, config);\n\t\t\t\t\to.attribute = attribute;\n\t\t\t\t\to.selector = o.selector || id;\n\t\t\t\t\to.id = id;\n\n\t\t\t\t\t_[id] = _[id] || [];\n\t\t\t\t\t_[id].push(o);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _;\n\t\t}\n\t},\n\t\"search\": {\n\t\tvalue: function(element, attribute, datatype) {\n\t\t\tvar matches = _.matches(element, attribute, datatype);\n\n\t\t\treturn matches[matches.length - 1] || { attribute };\n\t\t}\n\t},\n\t\"matches\": {\n\t\tvalue: function(element, attribute, datatype) {\n\t\t\tvar matches = [];\n\n\t\t\tselectorloop: for (var id in _) {\n\t\t\t\tfor (var o of _[id]) {\n\t\t\t\t\t// Passes attribute test?\n\t\t\t\t\tvar attributeMatches = attribute === undefined && o.default || attribute === o.attribute;\n\n\t\t\t\t\tif (!attributeMatches) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Passes datatype test?\n\t\t\t\t\tif (datatype !== undefined && datatype !== \"string\" && datatype !== o.datatype) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Passes selector test?\n\t\t\t\t\tvar selector = o.selector || id;\n\t\t\t\t\tif (!element.matches(selector)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Passes arbitrary test?\n\t\t\t\t\tif (o.test && !o.test(element, attribute, datatype)) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\n\t\t\t\t\t// All tests have passed\n\t\t\t\t\tmatches.push(o);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn matches;\n\t\t}\n\t},\n\n\tisSVG: {\n\t\tvalue: e => e.namespaceURI == \"http://www.w3.org/2000/svg\"\n\t},\n\n\tdefaultEditors: {\n\t\tvalue: {\n\t\t\t\"string\":  { tag: \"input\" },\n\t\t\t\"number\":  { tag: \"input\", type: \"number\" },\n\t\t\t\"boolean\": { tag: \"input\", type: \"checkbox\" }\n\t\t}\n\t}\n});\n\n_.register({\n\t\"*\": [\n\t\t{\n\t\t\ttest: (e, a) => a == \"hidden\",\n\t\t\tattribute: \"hidden\",\n\t\t\tdatatype: \"boolean\"\n\t\t},\n\t\t{\n\t\t\ttest: _.isSVG,\n\t\t\tattribute: \"y\",\n\t\t\tdatatype: \"number\"\n\t\t},\n\t\t{\n\t\t\tdefault: true,\n\t\t\ttest: _.isSVG,\n\t\t\tattribute: \"x\",\n\t\t\tdatatype: \"number\"\n\t\t},\n\t],\n\n\t\"media\": {\n\t\tdefault: true,\n\t\tselector: \"img, video, audio\",\n\t\tattribute: \"src\",\n\t\teditor: function() {\n\t\t\tvar uploadBackend = this.mavo.storage && this.mavo.storage.upload? this.mavo.storage : this.uploadBackend;\n\n\t\t\tvar mainInput = $.create(\"input\", {\n\t\t\t\t\"type\": \"url\",\n\t\t\t\t\"placeholder\": \"http://example.com/image.png\",\n\t\t\t\t\"className\": \"mv-output\",\n\t\t\t\t\"aria-label\": \"URL to image\"\n\t\t\t});\n\n\t\t\tif (uploadBackend && self.FileReader) {\n\t\t\t\tvar popup;\n\t\t\t\tvar type = this.element.nodeName.toLowerCase();\n\t\t\t\ttype = type == \"img\"? \"image\" : type;\n\t\t\t\tvar path = this.element.getAttribute(\"mv-uploads\") || type + \"s\";\n\n\t\t\t\tvar upload = (file, name = file.name) => {\n\t\t\t\t\tif (file && file.type.indexOf(type + \"/\") === 0) {\n\t\t\t\t\t\tthis.mavo.upload(file, path + \"/\" + name).then(url => {\n\t\t\t\t\t\t\tmainInput.value = url;\n\t\t\t\t\t\t\t$.fire(mainInput, \"input\");\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tvar uploadEvents = {\n\t\t\t\t\t\"paste\": evt => {\n\t\t\t\t\t\tvar item = evt.clipboardData.items[0];\n\n\t\t\t\t\t\tif (item.kind == \"file\" && item.type.indexOf(type + \"/\") === 0) {\n\t\t\t\t\t\t\t// Is a file of the correct type, upload!\n\t\t\t\t\t\t\tvar name = `pasted-${type}-${Date.now()}.${item.type.slice(6)}`; // image, video, audio are all 5 chars\n\t\t\t\t\t\t\tupload(item.getAsFile(), name);\n\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"drag dragstart dragend dragover dragenter dragleave drop\": evt => {\n\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t},\n\t\t\t\t\t\"dragover dragenter\": evt => {\n\t\t\t\t\t\tpopup.classList.add(\"mv-dragover\");\n\t\t\t\t\t\tthis.element.classList.add(\"mv-dragover\");\n\t\t\t\t\t},\n\t\t\t\t\t\"dragleave dragend drop\": evt => {\n\t\t\t\t\t\tpopup.classList.remove(\"mv-dragover\");\n\t\t\t\t\t\tthis.element.classList.remove(\"mv-dragover\");\n\t\t\t\t\t},\n\t\t\t\t\t\"drop\": evt => {\n\t\t\t\t\t\tupload(evt.dataTransfer.files[0]);\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\t$.events(this.element, uploadEvents);\n\n\t\t\t\treturn popup = $.create({\n\t\t\t\t\tclassName: \"mv-upload-popup\",\n\t\t\t\t\tcontents: [\n\t\t\t\t\t\tmainInput, {\n\t\t\t\t\t\t\ttag: \"input\",\n\t\t\t\t\t\t\ttype: \"file\",\n\t\t\t\t\t\t\t\"aria-label\": \"Upload image\",\n\t\t\t\t\t\t\taccept: type + \"/*\",\n\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\tchange: evt => {\n\t\t\t\t\t\t\t\t\tvar file = evt.target.files[0];\n\n\t\t\t\t\t\t\t\t\tif (!file) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tupload(file);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\tclassName: \"mv-tip\",\n\t\t\t\t\t\t\tinnerHTML: \"<strong>Tip:</strong> You can also drag & drop or paste!\"\n\t\t\t\t\t\t}\n\t\t\t\t\t],\n\t\t\t\t\tevents: uploadEvents\n\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn mainInput;\n\t\t\t}\n\t\t}\n\t},\n\n\t\"video, audio\": {\n\t\tattribute: [\"autoplay\", \"buffered\", \"loop\"],\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"a, link\": {\n\t\tdefault: true,\n\t\tattribute: \"href\"\n\t},\n\n\t\"input, select, button, textarea\": {\n\t\tattribute: \"disabled\",\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"select, input\": {\n\t\tdefault: true,\n\t\tattribute: \"value\",\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"input change\"\n\t},\n\n\t\"textarea\": {\n\t\tdefault: true,\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"input\",\n\t\tgetValue: element => element.value,\n\t\tsetValue: (element, value) => element.value = value\n\t},\n\n\t\"input[type=range], input[type=number]\": {\n\t\tdefault: true,\n\t\tattribute: \"value\",\n\t\tdatatype: \"number\",\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"input change\"\n\t},\n\n\t\"input[type=checkbox]\": {\n\t\tdefault: true,\n\t\tattribute: \"checked\",\n\t\tdatatype: \"boolean\",\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"click\"\n\t},\n\n\t\"input[type=radio]\": {\n\t\tdefault: true,\n\t\tattribute: \"checked\",\n\t\tmodes: \"read\",\n\t\tgetValue: element => {\n\t\t\tif (element.form) {\n\t\t\t\treturn element.form[element.name].value;\n\t\t\t}\n\n\t\t\tvar checked = $(`input[type=radio][name=\"${element.name}\"]:checked`);\n\t\t\treturn checked && checked.value;\n\t\t},\n\t\tsetValue: (element, value) => {\n\t\t\tif (element.form) {\n\t\t\t\telement.form[element.name].value = value;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar toCheck = $(`input[type=radio][name=\"${element.name}\"][value=\"${value}\"]`);\n\t\t\t$.properties(toCheck, {checked: true});\n\t\t},\n\t\tinit: function(element) {\n\t\t\tthis.mavo.element.addEventListener(\"change\", evt => {\n\t\t\t\tif (evt.target.name == element.name) {\n\t\t\t\t\tthis.value = this.getValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t\"button, .counter\": {\n\t\tdefault: true,\n\t\tattribute: \"mv-clicked\",\n\t\tdatatype: \"number\",\n\t\tmodes: \"read\",\n\t\tinit: function(element) {\n\t\t\tif (this.attribute === \"mv-clicked\") {\n\t\t\t\telement.setAttribute(\"mv-clicked\", \"0\");\n\n\t\t\t\telement.addEventListener(\"click\", evt => {\n\t\t\t\t\tlet clicked = +element.getAttribute(\"mv-clicked\") || 0;\n\t\t\t\t\tthis.value = ++clicked;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\t\"meter, progress\": {\n\t\tdefault: true,\n\t\tattribute: \"value\",\n\t\tdatatype: \"number\",\n\t\tedit: function() {\n\t\t\tvar min = +this.element.getAttribute(\"min\") || 0;\n\t\t\tvar max = +this.element.getAttribute(\"max\") || 1;\n\t\t\tvar range = max - min;\n\t\t\tvar step = +this.element.getAttribute(\"mv-edit-step\") || (range > 1? 1 : range/100);\n\n\t\t\tthis.element.addEventListener(\"mousemove.mavo:edit\", evt => {\n\t\t\t\t// Change property as mouse moves\n\t\t\t\tvar left = this.element.getBoundingClientRect().left;\n\t\t\t\tvar offset = Math.max(0, (evt.clientX - left) / this.element.offsetWidth);\n\t\t\t\tvar newValue = min + range * offset;\n\t\t\t\tvar mod = newValue % step;\n\n\t\t\t\tnewValue += mod > step/2? step - mod : -mod;\n\t\t\t\tnewValue = Math.max(min, Math.min(newValue, max));\n\n\t\t\t\tthis.sneak(() => this.element.setAttribute(\"value\", newValue));\n\t\t\t});\n\n\t\t\tthis.element.addEventListener(\"mouseleave.mavo:edit\", evt => {\n\t\t\t\t// Return to actual value\n\t\t\t\tthis.sneak(() => this.element.setAttribute(\"value\", this.value));\n\t\t\t});\n\n\t\t\tthis.element.addEventListener(\"click.mavo:edit\", evt => {\n\t\t\t\t// Register change\n\t\t\t\tthis.value = this.getValue();\n\t\t\t});\n\n\t\t\tthis.element.addEventListener(\"keydown.mavo:edit\", evt => {\n\t\t\t\t// Edit with arrow keys\n\t\t\t\tif (evt.target == this.element && (evt.keyCode == 37 || evt.keyCode == 39)) {\n\t\t\t\t\tvar increment = step * (evt.keyCode == 39? 1 : -1) * (evt.shiftKey? 10 : 1);\n\t\t\t\t\tvar newValue = this.value + increment;\n\t\t\t\t\tnewValue = Math.max(min, Math.min(newValue, max));\n\n\t\t\t\t\tthis.element.setAttribute(\"value\", newValue);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdone: function() {\n\t\t\t$.unbind(this.element, \".mavo:edit\");\n\t\t}\n\t},\n\n\t\"meta\": {\n\t\tdefault: true,\n\t\tattribute: \"content\"\n\t},\n\n\t\"block\": {\n\t\tdefault: true,\n\t\tselector: \"p, div, li, dt, dd, h1, h2, h3, h4, h5, h6, article, section, address\",\n\t\teditor: function() {\n\t\t\tvar display = getComputedStyle(this.element).display;\n\t\t\tvar tag = display.indexOf(\"inline\") === 0? \"input\" : \"textarea\";\n\t\t\tvar editor = $.create(tag);\n\n\t\t\tif (tag == \"textarea\") {\n\t\t\t\t// Actually multiline\n\t\t\t\tvar width = this.element.offsetWidth;\n\n\t\t\t\tif (width) {\n\t\t\t\t\teditor.width = width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn editor;\n\t\t},\n\n\t\tsetEditorValue: function(value) {\n\t\t\tif (this.datatype && this.datatype != \"string\") {\n\t\t\t\tvalue = value + \"\";\n\t\t\t}\n\n\t\t\tvar cs = getComputedStyle(this.element);\n\t\t\tvalue = value || \"\";\n\n\t\t\tif ([\"normal\", \"nowrap\"].indexOf(cs.whiteSpace) > -1) {\n\t\t\t\t// Collapse lines\n\t\t\t\tvalue = value.replace(/\\r?\\n/g, \" \");\n\t\t\t}\n\n\t\t\tif ([\"normal\", \"nowrap\", \"pre-line\"].indexOf(cs.whiteSpace) > -1) {\n\t\t\t\t// Collapse whitespace\n\t\t\t\tvalue = value.replace(/^[ \\t]+|[ \\t]+$/gm, \"\").replace(/[ \\t]+/g, \" \");\n\t\t\t}\n\n\t\t\tthis.editor.value = value;\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t\"time\": {\n\t\tattribute: \"datetime\",\n\t\tdefault: true,\n\t\teditor: function() {\n\t\t\tvar types = {\n\t\t\t\t\"date\": /^[Y\\d]{4}-[M\\d]{2}-[D\\d]{2}$/i,\n\t\t\t\t\"month\": /^[Y\\d]{4}-[M\\d]{2}$/i,\n\t\t\t\t\"time\": /^[H\\d]{2}:[M\\d]{2}/i,\n\t\t\t\t\"week\": /[Y\\d]{4}-W[W\\d]{2}$/i,\n\t\t\t\t\"datetime-local\": /^[Y\\d]{4}-[M\\d]{2}-[D\\d]{2} [H\\d]{2}:[M\\d]{2}/i\n\t\t\t};\n\n\t\t\tvar datetime = this.element.getAttribute(\"datetime\") || \"YYYY-MM-DD\";\n\n\t\t\tfor (var type in types) {\n\t\t\t\tif (types[type].test(datetime)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {tag: \"input\", type};\n\t\t},\n\t\thumanReadable: function (value) {\n\t\t\tvar date = new Date(value);\n\n\t\t\tif (!value || isNaN(date)) {\n\t\t\t\treturn \"(No \" + this.label + \")\";\n\t\t\t}\n\n\t\t\t// TODO do this properly (account for other datetime datatypes and different formats)\n\t\t\tvar options = {\n\t\t\t\t\"date\": {day: \"numeric\", month: \"short\", year: \"numeric\"},\n\t\t\t\t\"month\": {month: \"long\"},\n\t\t\t\t\"time\": {hour: \"numeric\", minute: \"numeric\"},\n\t\t\t\t\"datetime-local\": {day: \"numeric\", month: \"short\", year: \"numeric\", hour: \"numeric\", minute: \"numeric\"}\n\t\t\t};\n\n\t\t\tvar format = options[this.editor && this.editor.type] || options.date;\n\t\t\tformat.timeZone = \"UTC\";\n\n\t\t\treturn date.toLocaleString(\"en-GB\", format);\n\t\t}\n\t},\n\n\t\"circle\": [\n\t\t{\n\t\t\tdefault: true,\n\t\t\tattribute: \"r\",\n\t\t\tdatatype: \"number\"\n\t\t}, {\n\t\t\tattribute: [\"cx\", \"cy\"],\n\t\t\tdatatype: \"number\"\n\t\t}\n\t],\n\n\t\"text\": {\n\t\tdefault: true,\n\t\tpopup: true\n\t},\n\n\t\"[role=checkbox]\": {\n\t\tdefault: true,\n\t\tattribute: \"aria-checked\",\n\t\tdatatype: \"boolean\",\n\t\tedit: function() {\n\t\t\tthis.element.addEventListener(\"click.mavo:edit\", evt => {\n\t\t\t\tthis.value = !this.value;\n\t\t\t\tevt.preventDefault();\n\t\t\t});\n\t\t},\n\t\tdone: function() {\n\t\t\t$.unbind(this.element, \".mavo:edit\");\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nMavo.attributes.push(\"mv-multiple\", \"mv-order\", \"mv-accepts\");\n\nvar _ = Mavo.Collection = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Collection\",\n\tconstructor: function (element, mavo, o) {\n\t\t/*\n\t\t * Create the template, remove it from the DOM and store it\n\t\t */\n\t\tthis.templateElement = this.element;\n\n\t\tthis.children = [];\n\n\t\t// ALL descendant property names as an array\n\t\tif (!this.fromTemplate(\"properties\", \"mutable\", \"templateElement\", \"accepts\")) {\n\t\t\tthis.properties = $$(Mavo.selectors.property, this.templateElement).map(Mavo.Node.getProperty);\n\t\t\tthis.mutable = this.templateElement.matches(Mavo.selectors.multiple);\n\t\t\tthis.accepts = (this.templateElement.getAttribute(\"mv-accepts\") || \"\").split(/\\s+/);\n\n\t\t\t// Must clone because otherwise once expressions are parsed on the template element\n\t\t\t// we will not be able to pick them up from subsequent items\n\t\t\tthis.templateElement = this.templateElement.cloneNode(true);\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\tvar item = this.createItem(this.element);\n\t\t\tthis.add(item);\n\t\t\tthis.itemTemplate = item.template || item;\n\t\t}\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"collection-init-end\", this);\n\t},\n\n\tget length() {\n\t\treturn this.children.length;\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: []\n\t\t};\n\n\t\tfor (item of this.children) {\n\t\t\tif (!item.deleted || env.options.live) {\n\t\t\t\tlet itemData = item.getData(env.options);\n\n\t\t\t\tif (itemData || env.options.live) {\n\t\t\t\t\tenv.data.push(itemData);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!this.mutable) {\n\t\t\t// If immutable, drop nulls\n\n\t\t\tenv.data = env.data.filter(item => item !== null);\n\n\t\t\tif (env.options.live && env.data.length === 1) {\n\t\t\t\t// If immutable with only 1 item, return the item\n\t\t\t\t// See https://github.com/LeaVerou/mavo/issues/50#issuecomment-266079652\n\t\t\t\tenv.data = env.data[0];\n\t\t\t}\n\t\t\telse if (this.data && !env.options.live) {\n\t\t\t\tvar rendered = Mavo.subset(this.data, this.inPath);\n\t\t\t\tenv.data = env.data.concat(rendered.slice(env.data.length));\n\t\t\t}\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn env.data;\n\t},\n\n\t// Create item but don't insert it anywhere\n\t// Mostly used internally\n\tcreateItem: function (element) {\n\t\tif (!element) {\n\t\t\telement = this.templateElement.cloneNode(true);\n\t\t}\n\n\t\tvar item = Mavo.Node.create(element, this.mavo, {\n\t\t\tcollection: this,\n\t\t\ttemplate: this.itemTemplate || (this.template? this.template.itemTemplate : null),\n\t\t\tproperty: this.property,\n\t\t\ttype: this.type\n\t\t});\n\n\t\treturn item;\n\t},\n\n\t/**\n\t * Add a new item to this collection\n\t * @param item {Node|Mavo.Node} Optional. Element or Mavo object for the new item\n\t * @param index {Number} Optional. Index of existing item, will be added opposite to list direction\n\t * @param silent {Boolean} Optional. Throw a datachange event? Mainly used internally.\n\t */\n\tadd: function(item, index, o = {}) {\n\t\tif (item instanceof Node) {\n\t\t\titem = Mavo.Node.get(item) || this.createItem(item);\n\t\t}\n\t\telse {\n\t\t\titem = item || this.createItem();\n\t\t}\n\n\t\tif (item.collection != this) {\n\t\t\tthis.adopt(item);\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\t// Add it to the DOM, or fix its place\n\t\t\tvar rel = this.children[index]? this.children[index].element : this.marker;\n\t\t\t$[this.bottomUp? \"after\" : \"before\"](item.element, rel);\n\n\t\t\tif (index === undefined) {\n\t\t\t\tindex = this.bottomUp? 0 : this.length;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tindex = this.length;\n\t\t}\n\n\t\tvar env = {context: this, item};\n\n\t\tenv.previousIndex = item.index;\n\n\t\t// Update internal data model\n\t\tenv.changed = this.splice({\n\t\t\tremove: env.item\n\t\t}, {\n\t\t\tindex: index,\n\t\t\tadd: env.item\n\t\t});\n\n\t\trequestAnimationFrame(() => {\n\t\t\tif (!o.silent) {\n\t\t\t\tenv.changed.forEach(i => {\n\t\t\t\t\ti.dataChanged(i == env.item && env.previousIndex === undefined? \"add\" : \"move\");\n\t\t\t\t\ti.unsavedChanges = true;\n\t\t\t\t});\n\n\t\t\t\tthis.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t\t}\n\n\t\t\tthis.mavo.expressions.update(env.item.element);\n\t\t});\n\n\t\tMavo.hooks.run(\"collection-add-end\", env);\n\n\t\treturn env.item;\n\t},\n\n\tsplice: function(...actions) {\n\t\tfor (let action of actions) {\n\t\t\tif (action.index === undefined && action.remove && isNaN(action.remove)) {\n\t\t\t\t// Remove is an item\n\t\t\t\taction.index = this.children.indexOf(action.remove);\n\t\t\t\taction.remove = 1;\n\t\t\t}\n\t\t}\n\n\t\t// Sort in reverse index order\n\t\tactions.sort((a, b) => b.index - a.index);\n\n\t\t// FIXME this could still result in buggy behavior.\n\t\t// Think of e.g. adding items on i, then removing > 1 items on i-1.\n\t\t// The new items would get removed instead of the old ones.\n\t\t// Not a pressing issue though since we always remove 1 max when adding things too.\n\t\tfor (let action of actions) {\n\t\t\tif (action.index > -1 && (action.remove || action.add)) {\n\t\t\t\taction.remove = action.remove || 0;\n\t\t\t\taction.add = Mavo.toArray(action.add);\n\n\t\t\t\tthis.children.splice(action.index, +action.remove, ...action.add);\n\t\t\t}\n\t\t}\n\n\t\tvar changed = [];\n\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tlet item = this.children[i];\n\n\t\t\tif (item && item.index !== i) {\n\t\t\t\titem.index = i;\n\t\t\t\tchanged.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t},\n\n\tadopt: function(item) {\n\t\tif (item.collection) {\n\t\t\t// It belongs to another collection, delete from there first\n\t\t\titem.collection.splice({remove: item});\n\t\t\titem.collection.dataChanged(\"delete\");\n\t\t}\n\n\t\t // Update collection & closestCollection properties\n\t\tthis.walk(obj => {\n\t\t\tif (obj.closestCollection === item.collection) {\n\t\t\t\tobj.closestCollection = this;\n\t\t\t}\n\n\t\t\t// Belongs to another Mavo?\n\t\t\tif (item.mavo != this.mavo) {\n\t\t\t\titem.mavo = this.mavo;\n\t\t\t}\n\t\t});\n\n\t\titem.collection = this;\n\n\t\t// Adjust templates and their copies\n\t\tif (item.template) {\n\t\t\tMavo.delete(item.template.copies, item);\n\n\t\t\titem.template = this.itemTemplate;\n\t\t}\n\t},\n\n\tdelete: function(item, hard) {\n\t\tif (hard) {\n\t\t\t// Hard delete\n\t\t\t$.remove(item.element);\n\t\t\tthis.splice({remove: item});\n\t\t\titem.destroy();\n\t\t\treturn;\n\t\t}\n\n\t\treturn $.transition(item.element, {opacity: 0}).then(() => {\n\t\t\titem.deleted = true; // schedule for deletion\n\t\t\titem.element.style.opacity = \"\";\n\n\t\t\titem.dataChanged(\"delete\");\n\n\t\t\tthis.unsavedChanges = item.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t});\n\t},\n\n\t/**\n\t * Move existing item to a new position. Wraps around if position is out of bounds.\n\t * @offset relative position\n\t */\n\tmove: function(item, offset) {\n\t\tindex = item.index + offset + (offset > 0);\n\n\t\tif (index < 0) {\n\t\t\tindex = this.children.length;\n\t\t}\n\t\telse if (index > this.children.length) {\n\t\t\tindex = 0;\n\t\t}\n\n\t\tthis.add(item, index);\n\t},\n\n\teditItem: function(item) {\n\t\tif (!item.itemControls) {\n\t\t\titem.itemControls = new Mavo.UI.Itembar(item);\n\t\t}\n\n\t\titem.itemControls.add();\n\n\t\titem.edit();\n\t},\n\n\tedit: function() {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\t// Insert the add button if it's not already in the DOM\n\t\t\tif (!this.addButton.parentNode) {\n\t\t\t\tvar tag = this.element.tagName.toLowerCase();\n\t\t\t\tvar containerSelector = Mavo.selectors.container[tag];\n\t\t\t\tvar rel = containerSelector? this.marker.parentNode.closest(containerSelector) : this.marker;\n\t\t\t\t$[this.bottomUp? \"before\" : \"after\"](this.addButton, rel);\n\t\t\t}\n\n\t\t\t// Insert item controls\n\t\t\tthis.propagate(item => {\n\t\t\t\tthis.editItem(item);\n\t\t\t});\n\n\t\t\t// Set up drag & drop\n\t\t\t_.dragula.then(() => {\n\t\t\t\tthis.getDragula();\n\t\t\t});\n\t\t}\n\t},\n\n\tdone: function() {\n\t\tif (this.super.done.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\tif (this.addButton.parentNode) {\n\t\t\t\tthis.addButton.remove();\n\t\t\t}\n\n\t\t\tthis.propagate(item => {\n\t\t\t\tif (item.itemControls) {\n\t\t\t\t\titem.itemControls.remove();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t/**\n\t * Delete all items in the collection. Not undoable.\n\t */\n\tclear: function() {\n\t\tif (this.mutable) {\n\t\t\tfor (var i = 1, item; item = this.children[i]; i++) {\n\t\t\t\titem.element.remove();\n\t\t\t\titem.destroy();\n\t\t\t}\n\n\t\t\tthis.children = this.children.slice(0, 1);\n\n\t\t\tthis.dataChanged(\"clear\");\n\t\t}\n\n\t\tthis.propagate(\"clear\");\n\t},\n\n\tdataChanged: function(action, o = {}) {\n\t\to.element = o.element || this.marker;\n\t\treturn this.super.dataChanged.call(this, action, o);\n\t},\n\n\tsave: function() {\n\t\tfor (let item of this.children) {\n\t\t\tif (item.deleted) {\n\t\t\t\tthis.delete(item, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\titem.unsavedChanges = false;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropagated: [\"save\"],\n\n\tdataRender: function(data) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata = Mavo.toArray(data);\n\n\t\tif (!this.mutable) {\n\t\t\tthis.children.forEach((item, i) => item.render(data && data[i]));\n\t\t}\n\t\telse {\n\t\t\t// First render on existing items\n\t\t\tfor (var i = 0; i < this.children.length; i++) {\n\t\t\t\tif (i < data.length) {\n\t\t\t\t\tthis.children[i].render(data[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.children[i].dataChanged(\"delete\");\n\t\t\t\t\tthis.delete(this.children[i], true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.length > i) {\n\t\t\t\t// There are still remaining items\n\t\t\t\t// Using document fragments improves performance by 60%\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\n\t\t\t\tfor (var j = i; j < data.length; j++) {\n\t\t\t\t\tvar item = this.createItem();\n\n\t\t\t\t\titem.render(data[j]);\n\n\t\t\t\t\tthis.children.push(item);\n\t\t\t\t\titem.index = j;\n\n\t\t\t\t\tfragment.appendChild(item.element);\n\n\t\t\t\t\tvar env = {context: this, item};\n\t\t\t\t\tMavo.hooks.run(\"collection-add-end\", env);\n\n\t\t\t\t\titem.dataChanged(\"add\");\n\t\t\t\t}\n\n\t\t\t\tif (this.bottomUp) {\n\t\t\t\t\t$.after(fragment, i > 0? this.children[i-1].element : this.marker);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$.before(fragment, this.marker);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tfind: function(property, o = {}) {\n\t\tvar items = this.children.filter(item => !item.deleted);\n\n\t\tif (this.property == property) {\n\t\t\treturn o.collections? this : items;\n\t\t}\n\n\t\tif (this.properties.indexOf(property) > -1) {\n\t\t\tvar ret = items.map(item => item.find(property, o));\n\n\t\t\treturn Mavo.flatten(ret);\n\t\t}\n\t},\n\n\tisCompatible: function(c) {\n\t\treturn c && this.itemTemplate.nodeType == c.itemTemplate.nodeType && (c === this\n\t\t       || c.template == this || this.template == c || this.template && this.template == c.template\n\t\t       || this.accepts.indexOf(c.property) > -1);\n\t},\n\n\tlive: {\n\t\tmutable: function(value) {\n\t\t\tif (value && value !== this.mutable) {\n\t\t\t\t// Why is all this code here? Because we want it executed\n\t\t\t\t// every time mutable changes, not just in the constructor\n\t\t\t\t// (think multiple elements with the same property name, where only one has mv-multiple)\n\t\t\t\tthis._mutable = value;\n\n\t\t\t\t// Keep position of the template in the DOM, since we might remove it\n\t\t\t\tthis.marker = document.createComment(\"mv-marker\");\n\t\t\t\tMavo.data(this.marker, \"collection\", this);\n\t\t\t\t$.after(this.marker, this.templateElement);\n\t\t\t}\n\t\t}\n\t},\n\n\t// Make sure to only call after dragula has loaded\n\tgetDragula: function() {\n\t\tif (this.dragula) {\n\t\t\treturn this.dragula;\n\t\t}\n\n\t\tif (this.template) {\n\t\t\tMavo.pushUnique(this.template.getDragula().containers, this.marker.parentNode);\n\t\t\treturn this.dragula = this.template.dragula || this.template.getDragula();\n\t\t}\n\n\t\tvar me = this;\n\t\tthis.dragula = dragula({\n\t\t\tcontainers: [this.marker.parentNode],\n\t\t\tisContainer: el => {\n\t\t\t\tif (this.accepts.length) {\n\t\t\t\t\treturn Mavo.flatten(this.accepts.map(property => this.mavo.root.find(property, {collections: true})))\n\t\t\t\t\t\t\t\t.filter(c => c && c instanceof _)\n\t\t\t\t\t\t\t\t.map(c => c.marker.parentNode)\n\t\t\t\t\t\t\t\t.indexOf(el) > -1;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tmoves: (el, container, handle) => {\n\t\t\t\treturn handle.classList.contains(\"mv-drag-handle\") && handle.closest(Mavo.selectors.multiple) == el;\n\t\t\t},\n\t\t\taccepts: function(el, target, source, next) {\n\t\t\t\tif (el.contains(target)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar previous = next? next.previousElementSibling : target.lastElementChild;\n\n\t\t\t\tvar collection = _.get(previous) || _.get(next);\n\n\t\t\t\tif (!collection) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar item = Mavo.Node.get(el);\n\n\t\t\t\treturn item && item.collection.isCompatible(collection);\n\t\t\t}\n\t\t});\n\n\t\tthis.dragula.on(\"drop\", (el, target, source) => {\n\t\t\tvar item = Mavo.Node.get(el);\n\t\t\tvar oldIndex = item && item.index;\n\t\t\tvar next = el.nextElementSibling;\n\t\t\tvar previous = el.previousElementSibling;\n\t\t\tvar collection = _.get(previous) || _.get(next);\n\t\t\tvar closestItem = Mavo.Node.get(previous) || Mavo.Node.get(next);\n\n\t\t\tif (closestItem && closestItem.collection != collection) {\n\t\t\t\tclosestItem = null;\n\t\t\t}\n\n\t\t\tif (item.collection.isCompatible(collection)) {\n\t\t\t\tvar index = closestItem? closestItem.index + (closestItem.element === previous) : collection.length;\n\t\t\t\tcollection.add(item, index);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.dragula.cancel(true);\n\t\t\t}\n\t\t});\n\n\t\t_.dragulas.push(this.dragula);\n\n\t\treturn this.dragula;\n\t},\n\n\tlazy: {\n\t\tbottomUp: function() {\n\t\t\t/*\n\t\t\t * Add new items at the top or bottom?\n\t\t\t */\n\n\t\t\tif (!this.mutable) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar order = this.templateElement.getAttribute(\"mv-order\");\n\t\t\tif (order !== null) {\n\t\t\t\t// Attribute has the highest priority and overrides any heuristics\n\t\t\t\treturn /^desc\\b/i.test(order);\n\t\t\t}\n\n\t\t\tif (!this.addButton.parentNode) {\n\t\t\t\t// If add button not in DOM, do the default\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// If add button is already in the DOM and *before* our template, then we default to prepending\n\t\t\treturn !!(this.addButton.compareDocumentPosition(this.marker) & Node.DOCUMENT_POSITION_FOLLOWING);\n\t\t},\n\n\t\tclosestCollection: function() {\n\t\t\tvar parent = this.marker? this.marker.parentNode : this.templateElement.parentNode;\n\n\t\t\treturn parent.closest(Mavo.selectors.multiple);\n\t\t},\n\n\t\taddButton: function() {\n\t\t\t// Find add button if provided, or generate one\n\t\t\tvar selector = `button.mv-add-${this.property}`;\n\t\t\tvar group = this.closestCollection || this.marker.parentNode.closest(Mavo.selectors.group);\n\n\t\t\tif (group) {\n\t\t\t\tvar button = $$(selector, group).filter(button => {\n\t\t\t\t\treturn !this.templateElement.contains(button);\n\t\t\t\t})[0];\n\t\t\t}\n\n\t\t\tif (!button) {\n\t\t\t\tbutton = $.create(\"button\", {\n\t\t\t\t\tclassName: \"mv-add\",\n\t\t\t\t\ttextContent: \"Add \" + this.name\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tbutton.classList.add(\"mv-ui\", \"mv-add\");\n\t\t\tMavo.data(button, \"collection\", this);\n\n\t\t\tif (this.property) {\n\t\t\t\tbutton.classList.add(`mv-add-${this.property}`);\n\t\t\t}\n\n\t\t\tbutton.addEventListener(\"click\", evt => {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tthis.editItem(this.add());\n\t\t\t});\n\n\t\t\treturn button;\n\t\t}\n\t},\n\n\tstatic: {\n\t\tdragulas: [],\n\t\tget: element => {\n\t\t\t// Is it an add button or a marker?\n\t\t\tvar collection = Mavo.data(element, \"collection\");\n\n\t\t\tif (collection) {\n\t\t\t\treturn collection;\n\t\t\t}\n\n\t\t\t// Maybe it's a collection item?\n\t\t\tvar item = Mavo.Node.get(element);\n\n\t\t\treturn item && item.collection || null;\n\t\t},\n\n\t\tlazy: {\n\t\t\tdragula: () => $.include(self.dragula, \"https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.2/dragula.min.js\")\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.UI.Itembar = $.Class({\n\tconstructor: function(item) {\n\t\tthis.item = item;\n\n\t\tthis.element = $$(`.mv-item-bar:not([mv-rel]), .mv-item-bar[mv-rel=\"${this.item.property}\"]`, this.item.element).filter(el => {\n\n\t\t\t\t\t\t\t\t   // Remove item controls meant for other collections\n\t\t\t\t\t\t\t\t   return el.closest(Mavo.selectors.multiple) == this.item.element && !Mavo.data(el, \"item\");\n\t\t\t\t\t\t\t   })[0];\n\n\t\tthis.element = this.element || $.create({\n\t\t\tclassName: \"mv-item-bar mv-ui\"\n\t\t});\n\n\t\tMavo.data(this.element, \"item\", this.item);\n\n\t\t$.set(this.element, {\n\t\t\t\"mv-rel\": this.item.property,\n\t\t\tcontents: [\n\t\t\t\t{\n\t\t\t\t\ttag: \"button\",\n\t\t\t\t\ttitle: \"Delete this \" + this.item.name,\n\t\t\t\t\tclassName: \"mv-delete\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\"click\": evt => this.item.collection.delete(item)\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\ttag: \"button\",\n\t\t\t\t\ttitle: `Add new ${this.item.name.replace(/s$/i, \"\")} ${this.collection.bottomUp? \"after\" : \"before\"}`,\n\t\t\t\t\tclassName: \"mv-add\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\"click\": evt => {\n\t\t\t\t\t\t\tvar newItem = this.collection.add(null, this.item.index);\n\n\t\t\t\t\t\t\tif (evt[Mavo.superKey]) {\n\t\t\t\t\t\t\t\tnewItem.render(this.item.data);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tMavo.scrollIntoViewIfNeeded(newItem.element);\n\n\t\t\t\t\t\t\treturn this.collection.editItem(newItem);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {\n\t\t\t\t\ttag: \"button\",\n\t\t\t\t\ttitle: \"Drag to reorder \" + this.item.name,\n\t\t\t\t\tclassName: \"mv-drag-handle\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: evt => evt.target.focus(),\n\t\t\t\t\t\tkeydown: evt => {\n\t\t\t\t\t\t\tif (evt.keyCode >= 37 && evt.keyCode <= 40) {\n\t\t\t\t\t\t\t\t// Arrow keys\n\t\t\t\t\t\t\t\tthis.move(this.item, evt.keyCode <= 38? -1 : 1);\n\n\t\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t\tevt.target.focus();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tmouseenter: evt => {\n\t\t\t\t\tthis.item.element.classList.add(\"mv-highlight\");\n\t\t\t\t},\n\t\t\t\tmouseleave: evt => {\n\t\t\t\t\tthis.item.element.classList.remove(\"mv-highlight\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tadd: function() {\n\t\tif (!this.element.parentNode) {\n\t\t\tif (!Mavo.revocably.add(this.element)) {\n\t\t\t\tif (this.item instanceof Mavo.Primitive && !this.item.attribute) {\n\t\t\t\t\tthis.element.classList.add(\"mv-adjacent\");\n\t\t\t\t\t$.after(this.element, this.item.element);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.item.element.appendChild(this.element);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tremove: function() {\n\t\t Mavo.revocably.remove(this.element);\n\t},\n\n\tproxy: {\n\t\tcollection: \"item\",\n\t\tmavo: \"item\"\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($) {\n\nMavo.attributes.push(\"mv-expressions\");\n\nvar _ = Mavo.Expression = $.Class({\n\tconstructor: function(expression) {\n\t\tthis.expression = expression;\n\t},\n\n\teval: function(data) {\n\t\tthis.oldValue = this.value;\n\n\t\tMavo.hooks.run(\"expression-eval-beforeeval\", this);\n\n\t\ttry {\n\t\t\tif (!this.function) {\n\t\t\t\tthis.function = _.compile(this.expression);\n\t\t\t\tthis.identifiers = this.expression.match(/[$a-z][$\\w]*/ig) || [];\n\t\t\t}\n\n\t\t\tthis.value = this.function(data);\n\t\t}\n\t\tcatch (exception) {\n\t\t\tconsole.info(\"%cExpression error!\", \"color: red; font-weight: bold\", `${exception.message} in expression ${this.expression}`);\n\n\t\t\tMavo.hooks.run(\"expression-eval-error\", {context: this, exception});\n\n\t\t\tthis.value = exception;\n\t\t}\n\n\t\treturn this.value;\n\t},\n\n\ttoString() {\n\t\treturn this.expression;\n\t},\n\n\tchangedBy: function(evt) {\n\t\tif (!evt) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!this.identifiers) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.identifiers.indexOf(evt.property) > -1) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (Mavo.hasIntersection(evt.properties, this.identifiers)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (evt.action != \"propertychange\") {\n\t\t\tif (Mavo.hasIntersection([\"$index\", \"$all\", \"$previous\", \"$next\"], this.identifiers)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar collection = evt.node.collection || evt.node;\n\n\t\t\tif (Mavo.hasIntersection(collection.properties, this.identifiers)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tlive: {\n\t\texpression: function(value) {\n\t\t\tvar code = value = value;\n\n\t\t\tthis.function = null;\n\t\t}\n\t},\n\n\tstatic: {\n\t\t/**\n\t\t * These serializers transform the AST into JS\n\t\t */\n\t\tserializers: {\n\t\t\t\"BinaryExpression\": node => `${_.serialize(node.left)} ${node.operator} ${_.serialize(node.right)}`,\n\t\t\t\"UnaryExpression\": node => `${node.operator}${_.serialize(node.argument)}`,\n\t\t\t\"CallExpression\": node => `${_.serialize(node.callee)}(${node.arguments.map(_.serialize).join(\", \")})`,\n\t\t\t\"ConditionalExpression\": node => `${_.serialize(node.test)}? ${_.serialize(node.consequent)} : ${_.serialize(node.alternate)}`,\n\t\t\t\"MemberExpression\": node => `get(${_.serialize(node.object)}, \"${node.property.name || node.property.value}\")`,\n\t\t\t\"ArrayExpression\": node => `[${node.elements.map(_.serialize).join(\", \")}]`,\n\t\t\t\"Literal\": node => node.raw,\n\t\t\t\"Identifier\": node => node.name,\n\t\t\t\"ThisExpression\": node => \"this\",\n\t\t\t\"Compound\": node => node.body.map(_.serialize).join(\" \")\n\t\t},\n\n\t\t/**\n\t\t * These are run before the serializers and transform the expression to support MavoScript\n\t\t */\n\t\ttransformations: {\n\t\t\t\"BinaryExpression\": node => {\n\t\t\t\tlet name = Mavo.Script.getOperatorName(node.operator);\n\t\t\t\tlet details = Mavo.Script.operators[name];\n\n\t\t\t\t// Flatten same operator calls\n\t\t\t\tvar nodeLeft = node;\n\t\t\t\tvar args = [];\n\n\t\t\t\tdo {\n\t\t\t\t\targs.unshift(nodeLeft.right);\n\t\t\t\t\tnodeLeft = nodeLeft.left;\n\t\t\t\t} while (Mavo.Script.getOperatorName(nodeLeft.operator) === name);\n\n\t\t\t\targs.unshift(nodeLeft);\n\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\treturn `${name}(${args.map(_.serialize).join(\", \")})`;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"CallExpression\": node => {\n\t\t\t\tif (node.callee.type == \"Identifier\" && node.callee.name == \"if\") {\n\t\t\t\t\tnode.callee.name = \"iff\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tserialize: node => {\n\t\t\tif (_.transformations[node.type]) {\n\t\t\t\tvar ret = _.transformations[node.type](node);\n\n\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _.serializers[node.type](node);\n\t\t},\n\n\t\trewrite: function(code) {\n\t\t\ttry {\n\t\t\t\treturn _.serialize(_.parse(code));\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\t// Parsing as MavoScript failed, falling back to plain JS\n\t\t\t\treturn code;\n\t\t\t}\n\t\t},\n\n\t\tcompile: function(code) {\n\t\t\tcode = _.rewrite(code);\n\n\t\t\treturn new Function(\"data\", `with(Mavo.Functions._Trap)\n\t\t\t\t\twith (data || {}) {\n\t\t\t\t\t\treturn ${code};\n\t\t\t\t\t}`);\n\t\t},\n\n\t\tparse: self.jsep,\n\t}\n});\n\nif (self.jsep) {\n\tjsep.addBinaryOp(\"and\", 2);\n\tjsep.addBinaryOp(\"or\", 2);\n\tjsep.addBinaryOp(\"=\", 6);\n\tjsep.addBinaryOp(\"mod\", 10);\n\tjsep.removeBinaryOp(\"===\");\n}\n\n_.serializers.LogicalExpression = _.serializers.BinaryExpression;\n_.transformations.LogicalExpression = _.transformations.BinaryExpression;\n\n_.Syntax = $.Class({\n\tconstructor: function(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis.regex = RegExp(`${Mavo.escapeRegExp(start)}([\\\\S\\\\s]+?)${Mavo.escapeRegExp(end)}`, \"gi\");\n\t},\n\n\ttest: function(str) {\n\t\tthis.regex.lastIndex = 0;\n\n\t\treturn this.regex.test(str);\n\t},\n\n\ttokenize: function(str) {\n\t\tvar match, ret = [], lastIndex = 0;\n\n\t\tthis.regex.lastIndex = 0;\n\n\t\twhile ((match = this.regex.exec(str)) !== null) {\n\t\t\t// Literal before the expression\n\t\t\tif (match.index > lastIndex) {\n\t\t\t\tret.push(str.substring(lastIndex, match.index));\n\t\t\t}\n\n\t\t\tlastIndex = this.regex.lastIndex;\n\n\t\t\tret.push(new Mavo.Expression(match[1]));\n\t\t}\n\n\t\t// Literal at the end\n\t\tif (lastIndex < str.length) {\n\t\t\tret.push(str.substring(lastIndex));\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tstatic: {\n\t\tcreate: function(element) {\n\t\t\tif (element) {\n\t\t\t\tvar syntax = element.getAttribute(\"mv-expressions\");\n\n\t\t\t\tif (syntax) {\n\t\t\t\t\tsyntax = syntax.trim();\n\t\t\t\t\treturn /\\s/.test(syntax)? new _.Syntax(...syntax.split(/\\s+/)) : _.Syntax.ESCAPE;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tESCAPE: -1\n\t}\n});\n\n_.Syntax.default = new _.Syntax(\"[\", \"]\");\n\n})(Bliss);\n\n(function($) {\n\nvar _ = Mavo.DOMExpression = $.Class({\n\tconstructor: function(o = {}) {\n\t\tthis.mavo = o.mavo;\n\t\tthis.template = o.template && o.template.template || o.template;\n\n\t\tfor (let prop of [\"item\", \"path\", \"syntax\", \"fallback\", \"attribute\"]) {\n\t\t\tthis[prop] = o[prop] === undefined && this.template? this.template[prop] : o[prop];\n\t\t}\n\n\t\tthis.node = o.node;\n\n\t\tif (!this.node) {\n\t\t\t// No node provided, figure it out from path\n\t\t\tthis.node = this.path.reduce((node, index) => {\n\t\t\t\treturn node.childNodes[index];\n\t\t\t}, this.item.element);\n\t\t}\n\n\t\tthis.element = this.node;\n\t\tthis.attribute = this.attribute || null;\n\n\t\tMavo.hooks.run(\"domexpression-init-start\", this);\n\n\t\tif (!this.expression) { // Still unhandled?\n\t\t\tif (this.node.nodeType === 3) {\n\t\t\t\tthis.element = this.node.parentNode;\n\n\t\t\t\t// If no element siblings make this.node the element, which is more robust\n\t\t\t\t// Same if attribute, there are no attributes on a text node!\n\t\t\t\tif (!this.node.parentNode.children.length || this.attribute) {\n\t\t\t\t\tthis.node = this.element;\n\t\t\t\t\tthis.element.normalize();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.attribute) {\n\t\t\t\tthis.expression = this.node.getAttribute(this.attribute).trim();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Move whitespace outside to prevent it from messing with types\n\t\t\t\tthis.node.normalize();\n\n\t\t\t\tif (this.node.firstChild && this.node.childNodes.length === 1 && this.node.firstChild.nodeType === 3) {\n\t\t\t\t\tvar whitespace = this.node.firstChild.textContent.match(/^\\s*|\\s*$/g);\n\n\t\t\t\t\tif (whitespace[1]) {\n\t\t\t\t\t\tthis.node.firstChild.splitText(this.node.firstChild.textContent.length - whitespace[1].length);\n\t\t\t\t\t\t$.after(this.node.lastChild, this.node);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (whitespace[0]) {\n\t\t\t\t\t\tthis.node.firstChild.splitText(whitespace[0].length);\n\t\t\t\t\t\tthis.node.parentNode.insertBefore(this.node.firstChild, this.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.expression = this.node.textContent;\n\t\t\t}\n\n\n\t\t\tthis.parsed = o.template? o.template.parsed : this.syntax.tokenize(this.expression);\n\t\t}\n\n\t\tthis.oldValue = this.value = this.parsed.map(x => x instanceof Mavo.Expression? x.expression : x);\n\n\t\tthis.mavo.treeBuilt.then(() => {\n\t\t\tif (!this.template) {\n\t\t\t\tthis.item = Mavo.Node.get(this.element.closest(Mavo.selectors.multiple + \", \" + Mavo.selectors.group));\n\t\t\t\tthis.item.expressions = [...(this.item.expressions || []), this];\n\t\t\t}\n\n\t\t\tMavo.hooks.run(\"domexpression-init-treebuilt\", this);\n\t\t});\n\n\t\tMavo.hooks.run(\"domexpression-init-end\", this);\n\n\t\t_.elements.set(this.element, [...(_.elements.get(this.element) || []), this]);\n\t},\n\n\tchangedBy: function(evt) {\n\t\treturn !this.parsed.every(expr => !(expr instanceof Mavo.Expression) || !expr.changedBy(evt));\n\t},\n\n\tupdate: function(data = this.data, event) {\n\t\tvar env = {context: this, ret: {}, event};\n\t\tvar parentEnv = env;\n\t\t\n\t\tthis.data = data;\n\n\t\tenv.ret = {};\n\n\t\tMavo.hooks.run(\"domexpression-update-start\", env);\n\n\t\tthis.oldValue = this.value;\n\n\t\tenv.ret.value = this.value = this.parsed.map((expr, i) => {\n\t\t\tif (expr instanceof Mavo.Expression) {\n\t\t\t\tif (expr.changedBy(parentEnv.event)) {\n\t\t\t\t\tvar env = {context: this, expr, parentEnv};\n\n\t\t\t\t\tMavo.hooks.run(\"domexpression-update-beforeeval\", env);\n\n\t\t\t\t\tenv.value = env.expr.eval(data);\n\n\t\t\t\t\tMavo.hooks.run(\"domexpression-update-aftereval\", env);\n\n\t\t\t\t\tif (env.value instanceof Error) {\n\t\t\t\t\t\treturn this.fallback !== undefined? this.fallback : env.expr.expression;\n\t\t\t\t\t}\n\t\t\t\t\tif (env.value === undefined || env.value === null) {\n\t\t\t\t\t\t// Dont print things like \"undefined\" or \"null\"\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn env.value;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn this.oldValue[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn expr;\n\t\t});\n\n\t\tif (!this.attribute) {\n\t\t\t// Separate presentational & actual values only apply when content is variable\n\t\t\tenv.ret.presentational = this.value.map(value => {\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\treturn value.join(\", \");\n\t\t\t\t}\n\n\t\t\t\tif (typeof value == \"number\") {\n\t\t\t\t\treturn Mavo.Primitive.formatNumber(value);\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t});\n\n\t\t\tenv.ret.presentational = env.ret.presentational.length === 1? env.ret.presentational[0] : env.ret.presentational.join(\"\");\n\t\t}\n\n\t\tenv.ret.value = env.ret.value.length === 1? env.ret.value[0] : env.ret.value.join(\"\");\n\n\t\tif (this.primitive && this.parsed.length === 1) {\n\t\t\tif (typeof env.ret.value === \"number\") {\n\t\t\t\tthis.primitive.datatype = \"number\";\n\t\t\t}\n\t\t\telse if (typeof env.ret.value === \"boolean\") {\n\t\t\t\tthis.primitive.datatype = \"boolean\";\n\t\t\t}\n\t\t}\n\n\t\tif (env.ret.presentational === env.ret.value) {\n\t\t\tret = env.ret.value;\n\t\t}\n\n\t\tthis.output(env.ret);\n\n\t\tMavo.hooks.run(\"domexpression-update-end\", env);\n\t},\n\n\toutput: function(value) {\n\t\tif (this.primitive) {\n\t\t\tthis.primitive.value = value;\n\t\t}\n\t\telse {\n\t\t\tvalue = value.presentational || value;\n\t\t\tMavo.Primitive.setValue(this.node, value, {attribute: this.attribute});\n\t\t}\n\t},\n\n\tstatic: {\n\t\telements: new WeakMap(),\n\n\t\t/**\n\t\t * Search for Mavo.DOMExpression object(s) associated with a given element\n\t\t * and optionally an attribute.\n\t\t *\n\t\t * @return If one argument, array of matching DOMExpression objects.\n\t\t *         If two arguments, the matching DOMExpression object or null\n\t\t */\n\t\tsearch: function(element, attribute) {\n\t\t\tvar all = _.elements.get(element) || [];\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tif (!all.length) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn all.filter(et => et.attribute === attribute)[0] || null;\n\t\t\t}\n\n\t\t\treturn all;\n\t\t}\n\t}\n});\n\n})(Bliss);\n\n(function($, $$) {\n\nvar _ = Mavo.Expressions = $.Class({\n\tconstructor: function(mavo) {\n\t\tthis.mavo = mavo;\n\t\tthis.active = true;\n\n\t\tthis.expressions = [];\n\n\t\tvar syntax = Mavo.Expression.Syntax.create(this.mavo.element.closest(\"[mv-expressions]\")) || Mavo.Expression.Syntax.default;\n\t\tthis.traverse(this.mavo.element, undefined, syntax);\n\n\t\tthis.scheduled = new Set();\n\n\t\tthis.mavo.treeBuilt.then(() => {\n\t\t\tthis.expressions = [];\n\n\t\t\t// Watch changes and update value\n\t\t\tdocument.documentElement.addEventListener(\"mavo:datachange\", evt => {\n\t\t\t\tif (!this.active) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (evt.action == \"propertychange\" && evt.node.closestCollection) {\n\t\t\t\t\t// Throttle propertychange events in collections and events from other Mavos\n\t\t\t\t\tif (!this.scheduled.has(evt.property)) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.scheduled.delete(evt.property);\n\t\t\t\t\t\t\tthis.update(evt);\n\t\t\t\t\t\t}, _.PROPERTYCHANGE_THROTTLE);\n\n\t\t\t\t\t\tthis.scheduled.add(evt.property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\trequestAnimationFrame(() => this.update(evt));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.update();\n\t\t});\n\t},\n\n\tupdate: function(evt) {\n\t\tvar root, rootGroup;\n\n\t\tif (evt instanceof Element) {\n\t\t\troot = evt.closest(Mavo.selectors.group);\n\t\t\tevt = null;\n\t\t}\n\n\t\troot = root || this.mavo.element;\n\t\trootGroup = Mavo.Node.get(root);\n\n\t\tvar data = rootGroup.getData({live: true});\n\n\t\trootGroup.walk((obj, path) => {\n\t\t\tif (obj.expressions && obj.expressions.length && !obj.isDeleted()) {\n\t\t\t\tlet env = { context: this, data: $.value(data, ...path) };\n\n\t\t\t\tMavo.hooks.run(\"expressions-update-start\", env);\n\t\t\t\tfor (let et of obj.expressions) {\n\t\t\t\t\tif (et.changedBy(evt)) {\n\t\t\t\t\t\tet.update(env.data, evt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\textract: function(node, attribute, path, syntax) {\n\t\tif (attribute && attribute.name == \"mv-expressions\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((attribute && _.directives.indexOf(attribute.name) > -1) ||\n\t\t    syntax.test(attribute? attribute.value : node.textContent)\n\t\t) {\n\t\t\tthis.expressions.push(new Mavo.DOMExpression({\n\t\t\t\tnode, syntax,\n\t\t\t\tpath: path? path.slice(1).split(\"/\").map(i => +i) : [],\n\t\t\t\tattribute: attribute && attribute.name,\n\t\t\t\tmavo: this.mavo\n\t\t\t}));\n\t\t}\n\t},\n\n\t// Traverse an element, including attribute nodes, text nodes and all descendants\n\ttraverse: function(node, path = \"\", syntax) {\n\t\tif (node.nodeType === 8) {\n\t\t\t// We don't want expressions to be picked up from comments!\n\t\t\t// Commenting stuff out is a common debugging technique\n\t\t\treturn;\n\t\t}\n\n\t\tif (node.nodeType === 3) { // Text node\n\t\t\t// Leaf node, extract references from content\n\t\t\tthis.extract(node, null, path, syntax);\n\t\t}\n\t\telse {\n\t\t\tnode.normalize();\n\n\t\t\tsyntax = Mavo.Expression.Syntax.create(node) || syntax;\n\n\t\t\tif (syntax === Mavo.Expression.Syntax.ESCAPE) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Mavo.is(\"multiple\", node)) {\n\t\t\t\tpath = \"\";\n\t\t\t}\n\n\t\t\t$$(node.attributes).forEach(attribute => this.extract(node, attribute, path, syntax));\n\t\t\t$$(node.childNodes).forEach((child, i) => this.traverse(child, `${path}/${i}`, syntax));\n\t\t}\n\t},\n\n\tstatic: {\n\t\tdirectives: [],\n\n\t\tPROPERTYCHANGE_THROTTLE: 50,\n\n\t\tdirective: function(name, o) {\n\t\t\t_.directives.push(name);\n\t\t\tMavo.attributes.push(name);\n\t\t\to.name = name;\n\t\t\tMavo.Plugins.register(o);\n\t\t}\n\t}\n});\n\nif (self.Proxy) {\n\tMavo.hooks.add(\"node-getdata-end\", function(env) {\n\t\tif (env.options.live && (env.data && (typeof env.data === \"object\" || this.collection))) {\n\t\t\tvar data = env.data;\n\n\t\t\tif (typeof env.data !== \"object\") {\n\t\t\t\tenv.data = {\n\t\t\t\t\t[Symbol.toPrimitive]: () => data,\n\t\t\t\t\t[this.property]: data\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tenv.data = new Proxy(env.data, {\n\t\t\t\tget: (data, property, proxy) => {\n\t\t\t\t\t// Checking if property is in proxy might add it to the data\n\t\t\t\t\tif (property in data || (property in proxy && property in data)) {\n\t\t\t\t\t\treturn data[property];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\thas: (data, property) => {\n\t\t\t\t\tif (property in data) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Property does not exist, look for it elsewhere\n\n\t\t\t\t\tswitch(property) {\n\t\t\t\t\t\tcase \"$index\":\n\t\t\t\t\t\t\tdata[property] = this.index || 0;\n\t\t\t\t\t\t\treturn true; // if index is 0 it's falsy and has would return false!\n\t\t\t\t\t\tcase \"$all\":\n\t\t\t\t\t\t\treturn data[property] = this.closestCollection? this.closestCollection.getData(env.options) : [env.data];\n\t\t\t\t\t\tcase \"$next\":\n\t\t\t\t\t\tcase \"$previous\":\n\t\t\t\t\t\t\tif (this.closestCollection) {\n\t\t\t\t\t\t\t\treturn data[property] = this.closestCollection.getData(env.options)[this.index + (property == \"$next\"? 1 : -1)];\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tdata[property] = null;\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\tcase \"$edit\":\n\t\t\t\t\t\t\tdata[property] = this.editing;\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this instanceof Mavo.Group && property == this.property && this.collection) {\n\t\t\t\t\t\treturn data[property] = env.data;\n\t\t\t\t\t}\n\n\t\t\t\t\t// First look in ancestors\n\t\t\t\t\tvar ret = this.walkUp(group => {\n\t\t\t\t\t\tif (property in group.children) {\n\t\t\t\t\t\t\treturn group.children[property];\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\t\tif (ret === undefined) {\n\t\t\t\t\t\t// Still not found, look in descendants\n\t\t\t\t\t\tret = this.find(property);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\t\t\tret = ret.map(item => item.getData(env.options))\n\t\t\t\t\t\t\t\t\t .filter(item => item !== null);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (ret instanceof Mavo.Node) {\n\t\t\t\t\t\t\tret = ret.getData(env.options);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata[property] = ret;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Does it reference another Mavo?\n\t\t\t\t\tif (property in Mavo.all && Mavo.all[property].root) {\n\t\t\t\t\t\treturn data[property] = Mavo.all[property].root.getData(env.options);\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\tset: function(data, property, value) {\n\t\t\t\t\tthrow Error(\"You cant set data via expressions.\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n}\n\n})(Bliss, Bliss.$);\n\n// mv-if plugin\n(function($, $$) {\n\nMavo.Expressions.directive(\"mv-if\", {\n\textend: {\n\t\t\"Primitive\": {\n\t\t\tlive: {\n\t\t\t\t\"hidden\": function(value) {\n\t\t\t\t\tif (this._hidden !== value) {\n\t\t\t\t\t\tthis._hidden = value;\n\t\t\t\t\t\tthis.dataChanged();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"DOMExpression\": {\n\t\t\tlazy: {\n\t\t\t\t\"childProperties\": function() {\n\t\t\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar properties = $$(Mavo.selectors.property, this.element)\n\t\t\t\t\t\t\t\t\t.filter(el => el.closest(\"[mv-if]\") == this.element)\n\t\t\t\t\t\t\t\t\t.map(el => Mavo.Node.get(el));\n\n\t\t\t\t\t// When the element is detached, datachange events from properties\n\t\t\t\t\t// do not propagate up to the group so expressions do not recalculate.\n\t\t\t\t\t// We must do this manually.\n\t\t\t\t\tthis.element.addEventListener(\"mavo:datachange\", evt => {\n\t\t\t\t\t\t// Cannot redispatch synchronously [why??]\n\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\tif (!this.element.parentNode) { // out of the DOM?\n\t\t\t\t\t\t\tthis.item.element.dispatchEvent(evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\treturn properties;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\thooks: {\n\t\t\"domexpression-init-start\": function() {\n\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.expression = this.element.getAttribute(\"mv-if\");\n\t\t\tthis.parsed = [new Mavo.Expression(this.expression)];\n\t\t\tthis.expression = this.syntax.start + this.expression + this.syntax.end;\n\n\t\t\tthis.parentIf = this.element.parentNode && Mavo.DOMExpression.search(this.element.parentNode.closest(\"[mv-if]\"), \"mv-if\");\n\n\t\t\tif (this.parentIf) {\n\t\t\t\tthis.parentIf.childIfs = (this.parentIf.childIfs || new Set()).add(this);\n\t\t\t}\n\t\t},\n\t\t\"domexpression-update-end\": function() {\n\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar value = this.value[0];\n\t\t\tvar oldValue = this.oldValue[0];\n\n\t\t\t// Only apply this after the tree is built, otherwise any properties inside the if will go missing!\n\t\t\tthis.item.mavo.treeBuilt.then(() => {\n\t\t\t\tif (this.parentIf) {\n\t\t\t\t\tvar parentValue = this.parentIf.value[0];\n\t\t\t\t\tthis.value[0] = value = value && parentValue;\n\t\t\t\t}\n\n\t\t\t\tif (value === oldValue) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (parentValue !== false) { // If parent if was false, it wouldn't matter whether this is in the DOM or not\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t// Is removed from the DOM and needs to get back\n\t\t\t\t\t\tMavo.revocably.add(this.element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.element.parentNode) {\n\t\t\t\t\t\t// Is in the DOM and needs to be removed\n\t\t\t\t\t\tMavo.revocably.remove(this.element, \"mv-if\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Mark any properties inside as hidden or not\n\t\t\t\tif (this.childProperties) {\n\t\t\t\t\tfor (let property of this.childProperties) {\n\t\t\t\t\t\tproperty.hidden = !value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.childIfs) {\n\t\t\t\t\tfor (let childIf of this.childIfs) {\n\t\t\t\t\t\tchildIf.update();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"unit-isdatanull\": function(env) {\n\t\t\tenv.result = env.result || (this.hidden && env.options.live);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n// mv-value plugin\nMavo.Expressions.directive(\"mv-value\", {\n\thooks: {\n\t\t\"node-init-start\": function() {\n\t\t\tif (!(this instanceof Mavo.Group || this.collection)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar et = Mavo.DOMExpression.search(this.element).filter(et => et.originalAttribute == \"mv-value\")[0];\n\n\t\t\tif (!et) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tet.mavoNode = this;\n\t\t\tthis.expressionText = et;\n\t\t\tthis.storage = this.storage || \"none\";\n\t\t\tthis.modes = \"read\";\n\n\t\t\tif (this.collection) {\n\t\t\t\tthis.collection.expressions = [...(this.collection.expressions || []), et];\n\t\t\t\tet.mavoNode = this.collection;\n\t\t\t\tthis.collection.storage = this.collection.storage || \"none\";\n\t\t\t\tthis.collection.modes = \"read\";\n\t\t\t}\n\t\t},\n\t\t\"domexpression-init-start\": function() {\n\t\t\tif (this.attribute != \"mv-value\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.originalAttribute = \"mv-value\";\n\t\t\tthis.attribute = Mavo.Primitive.getValueAttribute(this.element);\n\t\t\tthis.fallback = this.fallback || Mavo.Primitive.getValue(this.element, {attribute: this.attribute});\n\t\t\tthis.expression = this.element.getAttribute(\"mv-value\");\n\t\t\tthis.element.removeAttribute(\"mv-value\");\n\n\t\t\tthis.parsed = [new Mavo.Expression(this.expression)];\n\t\t\tthis.expression = this.syntax.start + this.expression + this.syntax.end;\n\t\t},\n\t\t\"domexpression-init-treebuilt\": function() {\n\t\t\tif (this.originalAttribute != \"mv-value\" ||\n\t\t\t   !this.mavoNode ||\n\t\t\t   !(this.mavoNode == this.item || this.mavoNode == this.item.collection)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.mavoNode == this.item.collection) {\n\t\t\t\tMavo.delete(this.item.expressions, this);\n\t\t\t}\n\n\t\t\tthis.output = function(value) {\n\t\t\t\tvalue = value.value || value;\n\n\t\t\t\tthis.mavoNode.render(value);\n\t\t\t};\n\n\t\t\tthis.changedBy = evt => true;\n\t\t},\n\t\t\"domexpression-update-start\": function() {\n\t\t\tif (this.originalAttribute != \"mv-value\" || this.mavoNode != this.item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n});\n\n/**\n * Functions available inside Mavo expressions\n */\n\n(function() {\n\nvar _ = Mavo.Functions = {\n\toperators: {\n\t\t\"=\": \"eq\"\n\t},\n\n\t/**\n\t * Get a property of an object. Used by the . operator to prevent TypeErrors\n\t */\n\tget: function(obj, property) {\n\t\tif (obj && obj[property] !== undefined) {\n\t\t\treturn obj[property];\n\t\t}\n\n\t\tif (Array.isArray(obj) && isNaN(property) && typeof obj[0] === \"object\") {\n\t\t\t// Array and non-numerical property, try by id\n\t\t\tfor (var i=0; i<obj.length; i++) {\n\t\t\t\tif (obj[i] && obj[i].id == property) {\n\t\t\t\t\treturn obj[i];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Not found :(\n\t\treturn null;\n\t},\n\n\tunique: function(arr) {\n\t\treturn [...new Set(arr)];\n\t},\n\n\t/*********************\n\t * Number functions\n\t *********************/\n\n\t/**\n\t * Aggregate sum\n\t */\n\tsum: function(array) {\n\t\treturn numbers(array, arguments).reduce((prev, current) => {\n\t\t\treturn +prev + (+current || 0);\n\t\t}, 0);\n\t},\n\n\t/**\n\t * Average of an array of numbers\n\t */\n\taverage: function(array) {\n\t\tarray = numbers(array, arguments);\n\n\t\treturn array.length && _.sum(array) / array.length;\n\t},\n\n\t/**\n\t * Min of an array of numbers\n\t */\n\tmin: function(array) {\n\t\treturn Math.min(...numbers(array, arguments));\n\t},\n\n\t/**\n\t * Max of an array of numbers\n\t */\n\tmax: function(array) {\n\t\treturn Math.max(...numbers(array, arguments));\n\t},\n\n\tcount: function(array) {\n\t\treturn Mavo.toArray(array).filter(a => a !== null && a !== false && a !== \"\").length;\n\t},\n\n\tround: function(num, decimals) {\n\t\tif (!num || !decimals || !isFinite(num)) {\n\t\t\treturn Math.round(num);\n\t\t}\n\n\t\treturn +num.toLocaleString(\"en-US\", {\n\t\t\tuseGrouping: false,\n\t\t\tmaximumFractionDigits: decimals\n\t\t});\n\t},\n\n\tiff: function(condition, iftrue, iffalse=\"\") {\n\t\tif (Array.isArray(condition)) {\n\t\t\treturn condition.map((c, i) => {\n\t\t\t\tvar ret = c? iftrue : iffalse;\n\n\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\treturn ret[Math.min(i, ret.length - 1)];\n\t\t\t\t}\n\n\t\t\t\treturn ret;\n\t\t\t});\n\t\t}\n\n\t\treturn condition? iftrue : iffalse;\n\t},\n\n\t/*********************\n\t * String functions\n\t *********************/\n\n\t/**\n\t * Replace all occurences of a string with another string\n\t */\n\treplace: function(haystack, needle, replacement = \"\", iterations = 1) {\n\t\tif (Array.isArray(haystack)) {\n\t\t\treturn haystack.map(item => _.replace(item, needle, replacement));\n\t\t}\n\n\t\t// Simple string replacement\n\t\tvar needleRegex = RegExp(Mavo.escapeRegExp(needle), \"g\");\n\t\tvar ret = haystack, prev;\n\t\tvar counter = 0;\n\n\t\twhile (ret != prev && (counter++ < iterations)) {\n\t\t\tprev = ret;\n\t\t\tret = ret.replace(needleRegex, replacement);\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tlen: str => (str || \"\").length,\n\t/**\n\t * Case insensitive search\n\t */\n\tsearch: (haystack, needle) => haystack && needle? (haystack + \"\").toLowerCase().indexOf((needle + \"\").toLowerCase()) : -1,\n\n\tstarts: (haystack, needle) => _.search((haystack + \"\"), (needle + \"\")) === 0,\n\tends: function(haystack, needle) {\n\t\thaystack += \"\";\n\t\tneedle += \"\";\n\t\tvar i = _.search(haystack, needle);\n\t\treturn  i > -1 && i === haystack.length - needle.length;\n\t},\n\n\tjoin: function(array, glue = \"\") {\n\t\treturn Mavo.toArray(array).join(glue);\n\t},\n\n\tidify: function(readable) {\n\t\treturn ((readable || \"\") + \"\")\n\t\t\t.replace(/\\s+/g, \"-\") // Convert whitespace to hyphens\n\t\t\t.replace(/[^\\w-]/g, \"\") // Remove weird characters\n\t\t\t.toLowerCase();\n\t},\n\n\t// Convert an identifier to readable text that can be used as a label\n\treadable: function (identifier) {\n\t\t// Is it camelCase?\n\t\treturn identifier && identifier\n\t\t\t\t .replace(/([a-z])([A-Z])(?=[a-z])/g, ($0, $1, $2) => $1 + \" \" + $2.toLowerCase()) // camelCase?\n\t\t\t\t .replace(/([a-z])[_\\/-](?=[a-z])/g, \"$1 \") // Hyphen-separated / Underscore_separated?\n\t\t\t\t .replace(/^[a-z]/, $0 => $0.toUpperCase()); // Capitalize\n\t},\n\n\tuppercase: str => (str + \"\").toUpperCase(),\n\tlowercase: str => (str + \"\").toLowerCase(),\n\n\t/*********************\n\t * Date functions\n\t *********************/\n\n\tget $now() {\n\t\treturn new Date();\n\t},\n\n\tyear: getDateComponent(\"year\"),\n\tmonth: getDateComponent(\"month\"),\n\tday: getDateComponent(\"day\"),\n\tweekday: getDateComponent(\"weekday\"),\n\thour: getDateComponent(\"hour\"),\n\thour12: getDateComponent(\"hour\", \"numeric\", {hour12:true}),\n\tminute: getDateComponent(\"minute\"),\n\tsecond: getDateComponent(\"second\"),\n\n\tdate: date => {\n\t\treturn `${_.year(date)}-${_.month(date).twodigit}-${_.day(date).twodigit}`;\n\t},\n\ttime: date => {\n\t\treturn `${_.hour(date).twodigit}:${_.minute(date).twodigit}:${_.second(date).twodigit}`;\n\t},\n\n\tminutes: seconds => Math.floor(Math.abs(seconds) / 60),\n\thours: seconds => Math.floor(Math.abs(seconds) / 3600),\n\tdays: seconds => Math.floor(Math.abs(seconds) / 86400),\n\tweeks: seconds => Math.floor(Math.abs(seconds) / 604800),\n\tmonths: seconds => Math.floor(Math.abs(seconds) / (30.4368 * 86400)),\n\tyears: seconds => Math.floor(Math.abs(seconds) / (30.4368 * 86400 * 12)),\n\n\tlocalTimezone: -(new Date()).getTimezoneOffset(),\n\n\t// Log to the console and return\n\tlog: (...args) => {\n\t\tconsole.log(args);\n\t\treturn args[0];\n\t}\n};\n\n// $url: Read-only syntactic sugar for URL stuff\n$.lazy(Mavo.Functions, \"$url\", function() {\n\tvar ret = {};\n\tvar url = new URL(location);\n\n\tfor (let pair of url.searchParams) {\n\t\tret[pair[0]] = pair[1];\n\t}\n\n\tObject.defineProperty(ret, \"toString\", {\n\t\tvalue: () => new URL(location)\n\t});\n\n\treturn ret;\n});\n\nMavo.Script = {\n\taddUnaryOperator: function(name, o) {\n\t\treturn operand => Array.isArray(operand)? operand.map(o.scalar) : o.scalar(operand);\n\t},\n\n\t/**\n\t * Extend a scalar operator to arrays, or arrays and scalars\n\t * The operation between arrays is applied element-wise.\n\t * The operation operation between a scalar and an array will result in\n\t * the operation being applied between the scalar and every array element.\n\t */\n\taddBinaryOperator: function(name, o) {\n\t\tif (o.symbol) {\n\t\t\t// Build map of symbols to function names for easy rewriting\n\t\t\tfor (let symbol of Mavo.toArray(o.symbol)) {\n\t\t\t\tMavo.Script.symbols[symbol] = name;\n\t\t\t}\n\t\t}\n\n\t\to.identity = o.identity === undefined? 0 : o.identity;\n\n\t\treturn _[name] = o.code || function(...operands) {\n\t\t\tif (operands.length === 1) {\n\t\t\t\tif (Array.isArray(operands[0])) {\n\t\t\t\t\t// Operand is an array of operands, expand it out\n\t\t\t\t\toperands = [...operands[0]];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar prev = o.logical? o.identity : operands[0], result;\n\n\t\t\tfor (let i = 1; i < operands.length; i++) {\n\t\t\t\tlet a = o.logical? operands[i - 1] : prev;\n\t\t\t\tlet b = operands[i];\n\n\t\t\t\tif (Array.isArray(b)) {\n\t\t\t\t\tif (typeof o.identity == \"number\") {\n\t\t\t\t\t\tb = numbers(b);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t\tresult = [\n\t\t\t\t\t\t\t...b.map((n, i) => o.scalar(a[i] === undefined? o.identity : a[i], n)),\n\t\t\t\t\t\t\t...a.slice(b.length)\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresult = b.map(n => o.scalar(a, n));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (Array.isArray(a)) {\n\t\t\t\t\tresult = a.map(n => o.scalar(n, b));\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tresult = o.scalar(a, b);\n\t\t\t\t}\n\n\t\t\t\tif (o.reduce) {\n\t\t\t\t\tprev = o.reduce(prev, result, a, b);\n\t\t\t\t}\n\t\t\t\telse if (o.logical) {\n\t\t\t\t\tprev = prev && result;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tprev = result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn prev;\n\t\t};\n\t},\n\n\t/**\n\t * Mapping of operator symbols to function name.\n\t * Populated via addOperator() and addLogicalOperator()\n\t */\n\tsymbols: {},\n\n\tgetOperatorName: op => Mavo.Script.symbols[op] || op,\n\n\t/**\n\t * Operations for elements and scalars.\n\t * Operations between arrays happen element-wise.\n\t * Operations between a scalar and an array will result in the operation being performed between the scalar and every array element.\n\t * Ordered by precedence (higher to lower)\n\t * @param scalar {Function} The operation between two scalars\n\t * @param identity The operations identity element. Defaults to 0.\n\t */\n\toperators: {\n\t\t\"not\": {\n\t\t\tscalar: a => a => !a\n\t\t},\n\t\t\"multiply\": {\n\t\t\tscalar: (a, b) => a * b,\n\t\t\tidentity: 1,\n\t\t\tsymbol: \"*\"\n\t\t},\n\t\t\"divide\": {\n\t\t\tscalar: (a, b) => a / b,\n\t\t\tidentity: 1,\n\t\t\tsymbol: \"/\"\n\t\t},\n\t\t\"add\": {\n\t\t\tscalar: (a, b) => +a + +b,\n\t\t\tsymbol: \"+\"\n\t\t},\n\t\t\"subtract\": {\n\t\t\tscalar: (a, b) => {\n\t\t\t\tif (isNaN(a) || isNaN(b)) {\n\t\t\t\t\tvar dateA = toDate(a), dateB = toDate(b);\n\n\t\t\t\t\tif (dateA && dateB) {\n\t\t\t\t\t\treturn (dateA - dateB)/1000;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn a - b;\n\t\t\t},\n\t\t\tsymbol: \"-\"\n\t\t},\n\t\t\"mod\": {\n\t\t\tscalar: (a, b) => {\n\t\t\t\tvar ret = a % b;\n\t\t\t\tret += ret < 0? b : 0;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t},\n\t\t\"lte\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a <= b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \"<=\"\n\t\t},\n\t\t\"lt\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a < b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \"<\"\n\t\t},\n\t\t\"gte\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a >= b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \">=\"\n\t\t},\n\t\t\"gt\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a > b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \">\"\n\t\t},\n\t\t\"eq\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => a == b,\n\t\t\tsymbol: [\"=\", \"==\"],\n\t\t\tidentity: true\n\t\t},\n\t\t\"neq\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => a != b,\n\t\t\tsymbol: [\"!=\"],\n\t\t\tidentity: true\n\t\t},\n\t\t\"and\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => !!a && !!b,\n\t\t\tidentity: true,\n\t\t\tsymbol: \"&&\"\n\t\t},\n\t\t\"or\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => !!a || !!b,\n\t\t\treduce: (p, r) => p || r,\n\t\t\tidentity: false,\n\t\t\tsymbol: \"||\"\n\t\t},\n\t\t\"concatenate\": {\n\t\t\tsymbol: \"&\",\n\t\t\tidentity: \"\",\n\t\t\tscalar: (a, b) => \"\" + (a || \"\") + (b || \"\")\n\t\t},\n\t\t\"filter\": {\n\t\t\tscalar: (a, b) => b? a : null\n\t\t}\n\t},\n\n\tgetNumericalOperands: function(a, b) {\n\t\tif (isNaN(a) || isNaN(b)) {\n\t\t\t// Try comparing as dates\n\t\t\tvar da = toDate(a), db = toDate(b);\n\n\t\t\tif (da && db) {\n\t\t\t\t// Both valid dates\n\t\t\t\treturn [da, db];\n\t\t\t}\n\t\t}\n\n\t\treturn [a, b];\n\t}\n};\n\nfor (let name in Mavo.Script.operators) {\n\tlet details = Mavo.Script.operators[name];\n\n\tif (details.scalar.length < 2) {\n\t\tMavo.Script.addUnaryOperator(name, details);\n\t}\n\telse {\n\t\tMavo.Script.addBinaryOperator(name, details);\n\t}\n}\n\nvar aliases = {\n\taverage: \"avg\",\n\tiff: \"iff IF\",\n\tsubtract: \"minus\",\n\tmultiply: \"mult product\",\n\tdivide: \"div\",\n\tlt: \"lessThan smaller\",\n\tgt: \"moreThan greater greaterThan bigger\",\n\teq: \"equal equality\"\n};\n\nfor (let name in aliases) {\n\taliases[name].split(/\\s+/g).forEach(alias => _[alias] = _[name]);\n}\n\n// Make function names case insensitive\nMavo.Functions._Trap = self.Proxy? new Proxy(_, {\n\tget: (functions, property) => {\n\t\tif (property in functions) {\n\t\t\treturn functions[property];\n\t\t}\n\n\t\tvar propertyL = property.toLowerCase && property.toLowerCase();\n\n\t\tif (propertyL && functions.hasOwnProperty(propertyL)) {\n\t\t\treturn functions[propertyL];\n\t\t}\n\n\t\tif (property in Math || propertyL in Math) {\n\t\t\treturn Math[property] || Math[propertyL];\n\t\t}\n\n\t\tif (property in self) {\n\t\t\treturn self[property];\n\t\t}\n\n\t\t// Prevent undefined at all costs\n\t\treturn property;\n\t},\n\n\t// Super ugly hack, but otherwise data is not\n\t// the local variable it should be, but the string \"data\"\n\t// so all property lookups fail.\n\thas: (functions, property) => property != \"data\"\n}) : Mavo.Functions;\n\n/**\n * Private helper methods\n */\nfunction numbers(array, args) {\n\tarray = Array.isArray(array)? array : (args? $$(args) : [array]);\n\n\treturn array.filter(number => !isNaN(number) && number !== \"\").map(n => +n);\n}\n\nvar twodigits = new Intl.NumberFormat(\"en\", {\n\tminimumIntegerDigits: \"2\"\n});\n\ntwodigits = twodigits.format.bind(twodigits);\n\nfunction toDate(date) {\n\tif (!date) {\n\t\treturn null;\n\t}\n\n\tif ($.type(date) === \"string\") {\n\t\t// Fix up time format\n\n\t\tif (date.indexOf(\":\") === -1) {\n\t\t\t// Add a time if one doesn't exist\n\t\t\tdate += \"T00:00:00\";\n\t\t}\n\t\telse {\n\t\t\t// Make sure time starts with T, due to Safari bug\n\t\t\tdate = date.replace(/\\-(\\d{2})\\s+(?=\\d{2}:)/, \"-$1T\");\n\t\t}\n\n\t\t// Remove all whitespace\n\t\tdate = date.replace(/\\s+/g, \"\");\n\n\t\t// If no timezone, insert local\n\t\tvar timezone = (date.match(/[+-]\\d{2}:?\\d{2}|Z$/) || [])[0];\n\n\t\tif (!timezone) {\n\t\t\tvar local = _.localTimezone;\n\t\t\tvar minutes = Math.abs(local % 60);\n\t\t\tvar hours = (Math.abs(local) - minutes) / 60;\n\t\t\tvar sign = local < 0? \"-\" : \"+\";\n\t\t\tdate += sign + twodigits(hours) + \":\" + twodigits(minutes);\n\t\t}\n\t}\n\n\tdate = new Date(date);\n\n\tif (isNaN(date)) {\n\t\treturn null;\n\t}\n\n\treturn date;\n}\n\nfunction getDateComponent(component, option = \"numeric\", o) {\n\tvar locale = document.documentElement.lang || \"en-GB\";\n\n\treturn function(date, format = option) {\n\t\tdate = toDate(date);\n\n\t\tif (!date) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tvar options = $.extend({\n\t\t\t[component]: format,\n\t\t\thour12: false\n\t\t}, o);\n\n\t\tif (component == \"weekday\" && format == \"numeric\") {\n\t\t\tret = date.getDay() || 7;\n\t\t}\n\t\telse {\n\t\t\tvar ret = date.toLocaleString(locale, options);\n\t\t}\n\n\t\tif (format == \"numeric\" && !isNaN(ret)) {\n\t\t\tret = new Number(ret);\n\n\t\t\tif (component == \"month\" || component == \"weekday\") {\n\t\t\t\toptions[component] = \"long\";\n\t\t\t\tret.name = date.toLocaleString(locale, options);\n\n\t\t\t\toptions[component] = \"short\";\n\t\t\t\tret.shortname = date.toLocaleString(locale, options);\n\t\t\t}\n\n\t\t\tif (component != \"weekday\") {\n\t\t\t\toptions[component] = \"2-digit\";\n\t\t\t\tret.twodigit = date.toLocaleString(locale, options);\n\t\t\t}\n\t\t}\n\n\t\treturn ret;\n\t};\n}\n\n})();\n\n(function($) {\n\nvar _ = Mavo.Backend.register($.Class({\n\textends: Mavo.Backend,\n\tid: \"Dropbox\",\n\tconstructor: function() {\n\t\tthis.permissions.on([\"login\", \"read\"]);\n\n\t\tthis.key = this.mavo.element.getAttribute(\"mv-dropbox-key\") || \"2mx6061p054bpbp\";\n\n\t\t// Transform the dropbox shared URL into something raw and CORS-enabled\n\t\tthis.url = _.fixShareURL(this.url);\n\n\t\tthis.login(true);\n\t},\n\n\tupload: function(file, path) {\n\t\tpath = this.path.replace(/[^/]+$/, \"\") + path;\n\n\t\treturn this.put(file, path).then(fileInfo => this.getURL(path));\n\t},\n\n\tgetURL: function(path) {\n\t\treturn this.request(\"sharing/create_shared_link_with_settings\", {path}, \"POST\")\n\t\t\t.then(shareInfo => _.fixShareURL(shareInfo.url));\n\t},\n\n\t/**\n\t * Saves a file to the backend.\n\t * @param {Object} file - An object with name & data keys\n\t * @return {Promise} A promise that resolves when the file is saved.\n\t */\n\tput: function(serialized, path = this.path, o = {}) {\n\t\treturn this.request(\"https://content.dropboxapi.com/2/files/upload\", serialized, \"POST\", {\n\t\t\theaders: {\n\t\t\t\t\"Dropbox-API-Arg\": JSON.stringify({\n\t\t\t\t\tpath,\n\t\t\t\t\tmode: \"overwrite\"\n\t\t\t\t}),\n\t\t\t\t\"Content-Type\": \"application/octet-stream\"\n\t\t\t}\n\t\t});\n\t},\n\n\toAuthParams: () => `&redirect_uri=${encodeURIComponent(\"https://auth.mavo.io\")}&response_type=code`,\n\n\tgetUser: function() {\n\t\tif (this.user) {\n\t\t\treturn Promise.resolve(this.user);\n\t\t}\n\n\t\treturn this.request(\"users/get_current_account\", \"null\", \"POST\")\n\t\t\t.then(info => {\n\t\t\t\tthis.user = {\n\t\t\t\t\tusername: info.email,\n\t\t\t\t\tname: info.name.display_name,\n\t\t\t\t\tavatar: info.profile_photo_url,\n\t\t\t\t\tinfo\n\t\t\t\t};\n\t\t\t});\n\t},\n\n\tlogin: function(passive) {\n\t\treturn this.oAuthenticate(passive)\n\t\t\t.then(() => this.getUser())\n\t\t\t.then(u => {\n\t\t\t\tif (this.user) {\n\t\t\t\t\tthis.permissions.logout = true;\n\n\t\t\t\t\t// Check if can actually edit the file\n\t\t\t\t\tthis.request(\"sharing/get_shared_link_metadata\", {\n\t\t\t\t\t\t\"url\": this.source\n\t\t\t\t\t}, \"POST\").then(info => {\n\t\t\t\t\t\tthis.path = info.path_lower;\n\t\t\t\t\t\tthis.permissions.on([\"edit\", \"save\"]);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\tlogout: function() {\n\t\treturn this.oAuthLogout();\n\t},\n\n\tstatic: {\n\t\tapiDomain: \"https://api.dropboxapi.com/2/\",\n\t\toAuth: \"https://www.dropbox.com/oauth2/authorize\",\n\n\t\ttest: function(url) {\n\t\t\turl = new URL(url, Mavo.base);\n\t\t\treturn /dropbox.com/.test(url.host);\n\t\t},\n\n\t\tfixShareURL: url => {\n\t\t\turl = new URL(url, Mavo.base);\n\t\t\turl.hostname = \"dl.dropboxusercontent.com\";\n\t\t\turl.search = url.search.replace(/\\bdl=0|^$/, \"raw=1\");\n\t\t\treturn url;\n\t\t}\n\t}\n}));\n\n})(Bliss);\n\n(function($) {\n\nvar _ = Mavo.Backend.register($.Class({\n\textends: Mavo.Backend,\n\tid: \"Github\",\n\tconstructor: function() {\n\t\tthis.permissions.on([\"login\", \"read\"]);\n\n\t\tthis.key = this.mavo.element.getAttribute(\"mv-github-key\") || \"7e08e016048000bc594e\";\n\n\t\t// Extract info for username, repo, branch, filepath from URL\n\t\tvar parsedURL = _.parseURL(this.url);\n\n\t\tif (parsedURL.username) {\n\t\t\t$.extend(this, parsedURL);\n\t\t\tthis.repo = this.repo || \"mv-data\";\n\t\t\tthis.path = this.path || `${this.mavo.id}.json`;\n\t\t\tthis.apiCall = `repos/${this.username}/${this.repo}/contents/${this.path}`;\n\t\t}\n\t\telse {\n\t\t\tthis.apiCall = this.url.pathname.slice(1);\n\t\t}\n\n\t\tthis.login(true);\n\t},\n\n\tget: function() {\n\t\treturn this.request(this.apiCall)\n\t\t       .then(response => Promise.resolve(this.repo? _.atob(response.content) : response));\n\t},\n\n\tupload: function(file, path = this.path) {\n\t\treturn Mavo.readFile(file).then(dataURL => {\n\t\t\t\tvar base64 = dataURL.slice(5); // remove data:\n\t\t\t\tvar media = base64.match(/^\\w+\\/[\\w+]+/)[0];\n\t\t\t\tbase64 = base64.replace(RegExp(`^${media}(;base64)?,`), \"\");\n\t\t\t\tpath = this.path.replace(/[^/]+$/, \"\") + path;\n\n\t\t\t\treturn this.put(base64, path, {isEncoded: true});\n\t\t\t})\n\t\t\t.then(fileInfo => this.getURL(path, fileInfo.commit.sha));\n\t},\n\n\t/**\n\t * Saves a file to the backend.\n\t * @param {String} serialized - Serialized data\n\t * @param {String} path - Optional file path\n\t * @return {Promise} A promise that resolves when the file is saved.\n\t */\n\tput: function(serialized, path = this.path, o = {}) {\n\t\tif (!path) {\n\t\t\t// Raw API calls are read-only for now\n\t\t\treturn;\n\t\t}\n\n\t\tvar repoCall = `repos/${this.username}/${this.repo}`;\n\t\tvar fileCall = `${repoCall}/contents/${path}`;\n\t\tvar commitPrefix = this.mavo.element.getAttribute(\"mv-github-commit-prefix\");\n\n\t\t// Create repo if it doesnt exist\n\t\tvar repoInfo = this.repoInfo || this.request(\"user/repos\", {name: this.repo}, \"POST\").then(repoInfo => this.repoInfo = repoInfo);\n\n\t\tserialized = o.isEncoded? serialized : _.btoa(serialized);\n\n\t\treturn Promise.resolve(repoInfo)\n\t\t\t.then(repoInfo => {\n\t\t\t\tif (!this.canPush()) {\n\t\t\t\t\t// Does not have permission to commit, create a fork\n\t\t\t\t\treturn this.request(`${repoCall}/forks`, {name: this.repo}, \"POST\")\n\t\t\t\t\t\t.then(forkInfo => {\n\t\t\t\t\t\t\tfileCall = `repos/${forkInfo.full_name}/contents/${path}`;\n\t\t\t\t\t\t\treturn this.forkInfo = forkInfo;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(forkInfo => {\n\t\t\t\t\t\t\t// Ensure that fork is created (they take a while)\n\t\t\t\t\t\t\tvar timeout;\n\t\t\t\t\t\t\tvar test = (resolve, reject) => {\n\t\t\t\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t\t\t\t\tthis.request(`repos/${forkInfo.full_name}/commits`, {until: \"1970-01-01T00:00:00Z\"}, \"HEAD\")\n\t\t\t\t\t\t\t\t\t.then(x => {\n\t\t\t\t\t\t\t\t\t\tresolve(forkInfo);\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch(x => {\n\t\t\t\t\t\t\t\t\t\t// Try again after 1 second\n\t\t\t\t\t\t\t\t\t\ttimeout = setTimeout(test, 1000);\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t};\n\n\t\t\t\t\t\t\treturn new Promise(test);\n\t\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn repoInfo;\n\t\t\t})\n\t\t\t.then(repoInfo => {\n\t\t\t\treturn this.request(fileCall, {\n\t\t\t\t\tref: this.branch\n\t\t\t\t}).then(fileInfo => this.request(fileCall, {\n\t\t\t\t\tmessage: `${commitPrefix} Updated ${fileInfo.name || \"file\"}`,\n\t\t\t\t\tcontent: serialized,\n\t\t\t\t\tbranch: this.branch,\n\t\t\t\t\tsha: fileInfo.sha\n\t\t\t\t}, \"PUT\"), xhr => {\n\t\t\t\t\tif (xhr.status == 404) {\n\t\t\t\t\t\t// File does not exist, create it\n\t\t\t\t\t\treturn this.request(fileCall, {\n\t\t\t\t\t\t\tmessage: commitPrefix + \"Created file\",\n\t\t\t\t\t\t\tcontent: serialized,\n\t\t\t\t\t\t\tbranch: this.branch\n\t\t\t\t\t\t}, \"PUT\");\n\t\t\t\t\t}\n\n\t\t\t\t\treturn xhr;\n\t\t\t\t});\n\t\t\t})\n\t\t\t.then(fileInfo => {\n\t\t\t\tif (this.forkInfo) {\n\t\t\t\t\t// We saved in a fork, do we have a pull request?\n\t\t\t\t\tthis.request(`repos/${this.username}/${this.repo}/pulls`, {\n\t\t\t\t\t\thead: `${this.user.username}:${this.branch}`,\n\t\t\t\t\t\tbase: this.branch\n\t\t\t\t\t}).then(prs => {\n\t\t\t\t\t\tthis.pullRequest(prs[0]);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn fileInfo;\n\t\t\t});\n\t},\n\n\tpullRequest: function(existing) {\n\t\tvar previewURL = new URL(location);\n\t\tpreviewURL.searchParams.set(this.mavo.id + \"-storage\", `https://github.com/${this.forkInfo.full_name}/${this.path}`);\n\t\tvar message = `Your edits are saved to <a href=\"${previewURL}\" target=\"_blank\">your own profile</a>, because you are not allowed to edit this page.`;\n\n\t\tif (this.notice) {\n\t\t\tthis.notice.close();\n\t\t}\n\n\t\tif (existing) {\n\t\t\t// We already have a pull request, ask about closing it\n\t\t\tthis.notice = this.mavo.message(`${message}\n\t\t\t\tYou have selected to suggest your edits to the page admins. Your suggestions have not been reviewed yet.\n\t\t\t\t<form onsubmit=\"return false\">\n\t\t\t\t\t<button class=\"mv-danger\">Revoke edit suggestion</button>\n\t\t\t\t</form>`, {\n\t\t\t\t\tclasses: \"mv-inline\",\n\t\t\t\t\tdismiss: [\"button\", \"submit\"]\n\t\t\t\t});\n\n\t\t\tthis.notice.closed.then(form => {\n\t\t\t\tif (!form) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Close PR\n\t\t\t\tthis.request(`repos/${this.username}/${this.repo}/pulls/${existing.number}`, {\n\t\t\t\t\tstate: \"closed\"\n\t\t\t\t}, \"POST\").then(prInfo => {\n\t\t\t\t\tnew Mavo.UI.Message(this.mavo, `<a href=\"${prInfo.html_url}\">Edit suggestion cancelled successfully!</a>`, {\n\t\t\t\t\t\tdismiss: [\"button\", \"timeout\"]\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.pullRequest();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\telse {\n\t\t\t// Ask about creating a PR\n\t\t\tthis.notice = this.mavo.message(`${message}\n\t\t\t\tWrite a short description of your edits below to suggest them to the page admins:\n\t\t\t\t<form onsubmit=\"return false\">\n\t\t\t\t\t<textarea name=\"edits\" class=\"mv-autosize\" placeholder=\"I added / corrected / deleted ...\"></textarea>\n\t\t\t\t\t<button>Send edit suggestion</button>\n\t\t\t\t</form>`, {\n\t\t\t\t\tclasses: \"mv-inline\",\n\t\t\t\t\tdismiss: [\"button\", \"submit\"]\n\t\t\t\t});\n\n\t\t\tthis.notice.closed.then(form => {\n\t\t\t\tif (!form) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// We want to send a pull request\n\t\t\t\tthis.request(`repos/${this.username}/${this.repo}/pulls`, {\n\t\t\t\t\ttitle: \"Suggested edits to data\",\n\t\t\t\t\tbody: `Hello there! I used Mavo to suggest the following edits:\n${form.elements.edits.value}\nPreview my changes here: ${previewURL}`,\n\t\t\t\t\thead: `${this.user.username}:${this.branch}`,\n\t\t\t\t\tbase: this.branch\n\t\t\t\t}, \"POST\").then(prInfo => {\n\t\t\t\t\tnew Mavo.UI.Message(this.mavo, `<a href=\"${prInfo.html_url}\">Edit suggestion sent successfully!</a>`, {\n\t\t\t\t\t\tdismiss: [\"button\", \"timeout\"]\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.pullRequest(prInfo);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t},\n\n\tlogin: function(passive) {\n\t\treturn this.oAuthenticate(passive)\n\t\t\t.then(() => this.getUser())\n\t\t\t.catch(xhr => {\n\t\t\t\tif (xhr.status == 401) {\n\t\t\t\t\t// Unauthorized. Access token we have is invalid, discard it\n\t\t\t\t\tthis.logout();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(u => {\n\t\t\t\tif (this.user) {\n\t\t\t\t\tthis.permissions.on([\"edit\", \"save\", \"logout\"]);\n\n\t\t\t\t\tif (this.repo) {\n\t\t\t\t\t\treturn this.request(`repos/${this.username}/${this.repo}`)\n\t\t\t\t\t\t\t.then(repoInfo => {\n\t\t\t\t\t\t\t\tif (this.branch === undefined) {\n\t\t\t\t\t\t\t\t\tthis.branch = repoInfo.default_branch;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\treturn this.repoInfo = repoInfo;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t},\n\n\tcanPush: function() {\n\t\tif (this.repoInfo) {\n\t\t\treturn this.repoInfo.permissions.push;\n\t\t}\n\n\t\t// Repo does not exist so we can't check permissions\n\t\t// Just check if authenticated user is the same as our URL username\n\t\treturn this.user && this.user.username.toLowerCase() == this.username.toLowerCase();\n\t},\n\n\toAuthParams: () => \"&scope=repo,gist\",\n\n\tlogout: function() {\n\t\treturn this.oAuthLogout().then(() => {\n\t\t\tthis.user = null;\n\t\t});\n\t},\n\n\tgetUser: function() {\n\t\tif (this.user) {\n\t\t\treturn Promise.resolve(this.user);\n\t\t}\n\n\t\treturn this.request(\"user\").then(info => {\n\t\t\tthis.user = {\n\t\t\t\tusername: info.login,\n\t\t\t\tname: info.name || info.login,\n\t\t\t\tavatar: info.avatar_url,\n\t\t\t\turl: \"https://github.com/\" + info.login,\n\t\t\t\tinfo\n\t\t\t};\n\n\t\t\t$.fire(this.mavo.element, \"mavo:login\", { backend: this });\n\t\t});\n\t},\n\n\tgetURL: function(path = this.path, sha) {\n\t\tvar repo = `${this.username}/${this.repo}`;\n\t\tpath = path.replace(/ /g, \"%20\");\n\n\t\treturn this.request(`repos/${repo}/pages`, {}, \"GET\", {\n\t\t\theaders: {\n\t\t\t\t\"Accept\": \"application/vnd.github.mister-fantastic-preview+json\"\n\t\t\t}\n\t\t})\n\t\t.then(pagesInfo => pagesInfo.html_url + path)\n\t\t.catch(xhr => {\n\t\t\t// No Github Pages, return rawgit URL\n\t\t\tif (sha) {\n\t\t\t\treturn `https://cdn.rawgit.com/${repo}/${sha}/${path}`;\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn `https://rawgit.com/${repo}/${this.branch}/${path}`;\n\t\t\t}\n\t\t});\n\t},\n\n\tstatic: {\n\t\tapiDomain: \"https://api.github.com/\",\n\t\toAuth: \"https://github.com/login/oauth/authorize\",\n\n\t\ttest: function(url) {\n\t\t\turl = new URL(url, Mavo.base);\n\t\t\treturn /\\bgithub.com|raw.githubusercontent.com/.test(url.host);\n\t\t},\n\n\t\t/**\n\t\t * Parse Github URLs, return username, repo, branch, path\n\t\t */\n\t\tparseURL: function(url) {\n\t\t\tvar ret = {};\n\n\t\t\turl = new URL(url, Mavo.base);\n\n\t\t\tvar path = url.pathname.slice(1).split(\"/\");\n\n\t\t\tret.username = path.shift();\n\t\t\tret.repo = path.shift();\n\n\t\t\tif (/raw.githubusercontent.com$/.test(url.host)) {\n\t\t\t\tret.branch = path.shift();\n\t\t\t}\n\t\t\telse if (/api.github.com$/.test(url.host)) {\n\t\t\t\t// raw API call, stop parsing and just return\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\telse if (/github.com$/.test(url.host) && path[0] == \"blob\") {\n\t\t\t\tpath.shift();\n\t\t\t\tret.branch = path.shift();\n\t\t\t}\n\n\t\t\tret.path = path.join(\"/\");\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t// Fix atob() and btoa() so they can handle Unicode\n\t\tbtoa: str => btoa(unescape(encodeURIComponent(str))),\n\t\tatob: str => decodeURIComponent(escape(window.atob(str)))\n\t}\n}));\n\n})(Bliss);\n\n//# sourceMappingURL=maps/mavo.js.map\n"]}