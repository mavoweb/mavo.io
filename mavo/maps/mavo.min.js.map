{"version":3,"sources":["mavo.js"],"names":["t","e","r","s","arguments","length","n","type","apply","i","o","Array","from","splice","Object","getOwnPropertyDescriptor","writable","configurable","enumerable","get","set","defineProperty","forEach","a","test","call","prototype","toString","match","toLowerCase","isNaN","self","Bliss","document","querySelector","extend","overload","property","sources","noop","$","Node","Window","querySelectorAll","defined","create","tag","createElement","each","ready","Promise","readyState","addEventListener","Class","concat","keys","classProps","hasOwnProperty","constructor","__abstract","Error","indexOf","lazy","value","live","include","resolve","async","onload","remove","onerror","src","inside","head","fetch","TypeError","url","URL","location","data","method","headers","xhr","XMLHttpRequest","toUpperCase","hooks","run","search","body","setAttribute","open","href","user","password","console","error","setRequestHeader","removeAttribute","status","statusText","ontimeout","send","slice","reduce","Hooks","add","isArray","context","Element","subject","bliss","setProps","transition","style","transitionDuration","transitionProperty","join","once","clearTimeout","setTimeout","bind","fire","createEvent","initEvent","dispatchEvent","unbind","split","listeners","className","callback","removeEventListener","capture","setProperty","attributes","properties","events","u","c","delegate","target","closest","contents","createTextNode","appendChild","before","parentNode","insertBefore","after","nextSibling","start","firstChild","around","nodeName","content","all","$$","element","array","map","shift","HTMLElement","shy","clone","cloneNode","_","EventTarget","filter","push","b","d","m","q","x","index","description","y","z","A","B","C","D","E","G","H","operator","left","right","I","J","String","fromCharCode","K","L","j","charAt","charCodeAt","M","N","O","P","Q","S","consequent","alternate","R","substr","f","g","h","T","prec","pop","U","V","Y","argument","prefix","parseFloat","raw","W","name","X","Z","computed","object","callee","elements","version","addUnaryOp","Math","max","addBinaryOp","addLiteral","removeUnaryOp","removeBinaryOp","removeLiteral","exports","jsep","noConflict","module","parse","expr","con","matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","Stretchy","selectors","base","script","currentScript","resize","resizes","cs","getComputedStyle","offset","placeholder","height","boxSizing","offsetHeight","clientHeight","scrollHeight","width","offsetWidth","clientWidth","scrollLeft","scrollWidth","selectedIndex","option","textContent","options","appearance","removeChild","resizeAll","active","init","getAttribute","listener","evt","documentElement","MutationObserver","mutations","mutation","addedNodes","observe","childList","subtree","Mavo","treeBuilt","defer","dataMv","attribute","allIds","id","autoEdit","classList","contains","autoSave","hasAttribute","primitive","hasChildren","not","formControl","config","Primitive","getConfig","isCollection","is","root","Group","ui","bar","toggle","role","Functions","urlOption","trim","Backend","mavo","format","storage","source","primaryBackend","permissions","Permissions","authControls","can","loginHash","login","title","click","preventDefault","hash","history","replaceState","window","backend","innerHTML","logout","unsavedChanges","load","activeElement","needsEdit","some","obj","modes","mode","setUnsavedChanges","onchange","action","edit","modeObserver","Observer","records","record","nodeloop","node","children","previousMode","getStyle","editing","done","destroy","clear","on","delay","debouncedSave","debounce","save","saved","requestAnimationFrame","delete","keyCode","superKey","getData","toJSON","message","log","close","opacity","then","closeTimeout","mouseenter","mouseleave","rr","scrollIntoView","behavior","render","env","confirm","store","itemControls","item","multiple","parent","walk","inProgress","catch","err","reject","lastSaved","Date","now","path","ret","toggleAttribute","static","platform","container","plugin","def","specificProperty","group","arr","selector","or","selector1","selector2","and","arr2","s1","s2","andNot","rootGroup","output","Intl","updateWithin","cl","el","JSON","stringify","queryJSON","toArray","hasIntersection","arr1","every","flatten","prev","thing","getPropertyValue","revocably","comment","isRemoved","replaceChild","commentText","createComment","inViewport","getBoundingClientRect","bottom","innerHeight","top","innerWidth","scrollIntoViewIfNeeded","pushUnique","subset","fn","code","timer","args","escapeRegExp","replace","observer","attributeFilter","attributeOldValue","oldValue","characterData","characterDataOldValue","stop","disconnect","running","sneak","res","rej","promise","proxy","propagated","proto","names","existing","propagate","triggers","actions","off","cannot","when","able","current","changed","trigger","register","setter","previous","Formats","responseText","response","serialize","serialized","put","types","Remote","extends","key","localStorage","Base","abstract","extensions","dependencies","json","text","Text","getNames","me","csv","CSV","defaultOptions","header","dynamicTyping","skipEmptyLines","Papa","delimiter","meta","linebreak","aborted","errors","unparse","Format","pathname","extension","uid","maxId","nodeType","template","copies","parentGroup","fromTemplate","getProperty","normalize","collection","isRoot","readable","postInit","isDataNull","result","deleted","walker","walkUp","inPath","dataRender","dataChanged","getClosestCollection","closestCollection","isDeleted","p","_mode","Collection","_modes","elementContents","createDocumentFragment","childNodes","_deleted","WeakMap","prioritizePrimitive","nodes","unique","getValueAttribute","constructorOptions","mutable","vocabElement","vocab","super","null","unhandled","DEFAULT_TYPE","summary","find","prop","oldUnhandled","datatype","changeEvents","getValue","editor","editorValue","original","setValue","force","silent","templateValue","_default","default","defaultObserver","initialValue","emptyValue","getEditorValue","setEditorValue","editorDefaults","savedValue","initEdit","Elements","defaultEditors","string","select","stopPropagation","label","dataInput","popup","Popup","prevTabindex","tabIndex","preEdit","empty","show","Symbol","toPrimitive","presentational","safeCast","_value","humanReadable","selectedOptions","dataOnly","hide","cast","useProperty","formatNumber","namespaceURI","numberFormat","NumberFormat","maximumFractionDigits","Infinity","hidden","keyup","focus","size","min","shown","hideCallback","position","bounds","defineProperties","selectorloop","attributeMatches","isSVG","form","checked","toCheck","clicked","range","step","clientX","newValue","mod","increment","shiftKey","display","whiteSpace","datetime","date","day","month","year","hour","minute","timeZone","toLocaleString","templateElement","accepts","createItem","itemTemplate","itemData","adopt","rel","marker","bottomUp","previousIndex","sort","hard","move","editItem","newItem","keydown","addButton","tagName","containerSelector","dragula","getDragula","fragment","items","collections","isCompatible","_mutable","containers","isContainer","moves","handle","next","previousElementSibling","lastElementChild","oldIndex","nextElementSibling","closestItem","cancel","dragulas","order","compareDocumentPosition","DOCUMENT_POSITION_FOLLOWING","button","Expression","expression","eval","function","compile","identifiers","exception","info","changedBy","serializers","transformations","Script","getOperatorName","details","operators","nodeLeft","unshift","rewrite","Function","LogicalExpression","BinaryExpression","Syntax","end","regex","RegExp","str","lastIndex","tokenize","exec","substring","syntax","ESCAPE","DOMExpression","whitespace","splitText","lastChild","parsed","expressions","update","event","parentEnv","fallback","et","mavoNode","Expressions","traverse","scheduled","Set","has","PROPERTYCHANGE_THROTTLE","relative","extract","directives","child","directive","Proxy","_hidden","parentIf","childIfs","parentValue","childProperties","childIf","originalAttribute","numbers","number","$now","searchParams","sum","average","count","round","num","decimals","isFinite","useGrouping","iff","condition","iftrue","iffalse","haystack","needle","replacement","iterations","needleRegex","counter","len","starts","ends","glue","idify","identifier","$0","$1","$2","uppercase","lowercase","addUnaryOperator","operand","scalar","addBinaryOperator","symbol","symbols","identity","operands","logical","op","getNumericalOperands","da","db","aliases","subtract","multiply","divide","lt","gt","eq","alias","_Trap","functions","propertyL","protocol","hostname","Dropbox","referrer","AuthDriver","oauthReceiver","client","Client","file","getFile","writeFile","dataString","stat","versionTag","passive","isAuthenticated","authDriver","receiverUrl","authenticate","interactive","getAccountInfo","accountInfo","signOut","host","parsedURL","parseURL","username","repo","branch","apiCall","authenticated","accessToken","req","request","responseType","apiDomain","atob","fileCall","repoInfo","ref","fileInfo","btoa","sha","screen","screenTop","screenLeft","authPopup","getUser","removeItem","avatar_url","unescape","encodeURIComponent","decodeURIComponent","escape"],"mappings":"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","file":"../mavo.min.js","sourcesContent":["!function(){\"use strict\";function t(e,r,s){return r=void 0===r?1:r,s=s||r+1,1>=s-r?function(){if(arguments.length<=r||\"string\"===n.type(arguments[r]))return e.apply(this,arguments);var t,s=arguments[r];for(var i in s){var o=Array.from(arguments);o.splice(r,1,i,s[i]),t=e.apply(this,o)}return t}:t(t(e,r+1,s),r,s-1)}function e(t,n,s){var i=r(s);if(\"string\"===i){var o=Object.getOwnPropertyDescriptor(n,s);!o||o.writable&&o.configurable&&o.enumerable&&!o.get&&!o.set?t[s]=n[s]:(delete t[s],Object.defineProperty(t,s,o))}else if(\"array\"===i)s.forEach(function(r){r in n&&e(t,n,r)});else for(var a in n)s&&(\"regexp\"===i&&!s.test(a)||\"function\"===i&&!s.call(n,a))||e(t,n,a);return t}function r(t){if(null===t)return\"null\";if(void 0===t)return\"undefined\";var e=(Object.prototype.toString.call(t).match(/^\\[object\\s+(.*?)\\]$/)[1]||\"\").toLowerCase();return\"number\"==e&&isNaN(t)?\"nan\":e}var n=self.Bliss=e(function(t,e){return 2==arguments.length&&!e||!t?null:\"string\"===n.type(t)?(e||document).querySelector(t):t||null},self.Bliss);e(n,{extend:e,overload:t,type:r,property:n.property||\"_\",sources:{},noop:function(){},$:function(t,e){return t instanceof Node||t instanceof Window?[t]:2!=arguments.length||e?Array.from(\"string\"==typeof t?(e||document).querySelectorAll(t):t||[]):[]},defined:function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]},create:function(t,e){return t instanceof Node?n.set(t,e):(1===arguments.length&&(\"string\"===n.type(t)?e={}:(e=t,t=e.tag,e=n.extend({},e,function(t){return\"tag\"!==t}))),n.set(document.createElement(t||\"div\"),e))},each:function(t,e,r){r=r||{};for(var n in t)r[n]=e.call(t,n,t[n]);return r},ready:function(t){return t=t||document,new Promise(function(e,r){\"loading\"!==t.readyState?e():t.addEventListener(\"DOMContentLoaded\",function(){e()})})},Class:function(t){var e,r=[\"constructor\",\"extends\",\"abstract\",\"static\"].concat(Object.keys(n.classProps)),s=t.hasOwnProperty(\"constructor\")?t.constructor:n.noop;2==arguments.length?(e=arguments[0],t=arguments[1]):(e=function(){if(this.constructor.__abstract&&this.constructor===e)throw new Error(\"Abstract classes cannot be directly instantiated.\");e[\"super\"]&&e[\"super\"].apply(this,arguments),s.apply(this,arguments)},e[\"super\"]=t[\"extends\"]||null,e.prototype=n.extend(Object.create(e[\"super\"]?e[\"super\"].prototype:Object),{constructor:e}),e.prototype[\"super\"]=e[\"super\"]?e[\"super\"].prototype:null,e.__abstract=!!t[\"abstract\"]);var i=function(t){return this.hasOwnProperty(t)&&-1===r.indexOf(t)};if(t[\"static\"]){n.extend(e,t[\"static\"],i);for(var o in n.classProps)o in t[\"static\"]&&n.classProps[o](e,t[\"static\"][o])}n.extend(e.prototype,t,i);for(var o in n.classProps)o in t&&n.classProps[o](e.prototype,t[o]);return e},classProps:{lazy:t(function(t,e,r){return Object.defineProperty(t,e,{get:function(){var t=r.call(this);return Object.defineProperty(this,e,{value:t,configurable:!0,enumerable:!0,writable:!0}),t},set:function(t){Object.defineProperty(this,e,{value:t,configurable:!0,enumerable:!0,writable:!0})},configurable:!0,enumerable:!0}),t}),live:t(function(t,e,r){return\"function\"===n.type(r)&&(r={set:r}),Object.defineProperty(t,e,{get:function(){var t=this[\"_\"+e],n=r.get&&r.get.call(this,t);return void 0!==n?n:t},set:function(t){var n=this[\"_\"+e],s=r.set&&r.set.call(this,t,n);this[\"_\"+e]=void 0!==s?s:t},configurable:r.configurable,enumerable:r.enumerable}),t})},include:function(){var t=arguments[arguments.length-1],e=2===arguments.length?arguments[0]:!1,r=document.createElement(\"script\");return e?Promise.resolve():new Promise(function(e,s){n.set(r,{async:!0,onload:function(){e(),n.remove(r)},onerror:function(){s()},src:t,inside:document.head})})},fetch:function(t,r){if(!t)throw new TypeError(\"URL parameter is mandatory and cannot be \"+t);var s=e({url:new URL(t,location),data:\"\",method:\"GET\",headers:{},xhr:new XMLHttpRequest},r);s.method=s.method.toUpperCase(),n.hooks.run(\"fetch-args\",s),\"GET\"===s.method&&s.data&&(s.url.search+=s.data),document.body.setAttribute(\"data-loading\",s.url),s.xhr.open(s.method,s.url.href,s.async!==!1,s.user,s.password);for(var i in r)if(i in s.xhr)try{s.xhr[i]=r[i]}catch(o){self.console&&console.error(o)}\"GET\"===s.method||s.headers[\"Content-type\"]||s.headers[\"Content-Type\"]||s.xhr.setRequestHeader(\"Content-type\",\"application/x-www-form-urlencoded\");for(var a in s.headers)s.xhr.setRequestHeader(a,s.headers[a]);return new Promise(function(t,e){s.xhr.onload=function(){document.body.removeAttribute(\"data-loading\"),0===s.xhr.status||s.xhr.status>=200&&s.xhr.status<300||304===s.xhr.status?t(s.xhr):e(n.extend(Error(s.xhr.statusText),{xhr:s.xhr,get status(){return this.xhr.status}}))},s.xhr.onerror=function(){document.body.removeAttribute(\"data-loading\"),e(n.extend(Error(\"Network Error\"),{xhr:s.xhr}))},s.xhr.ontimeout=function(){document.body.removeAttribute(\"data-loading\"),e(n.extend(Error(\"Network Timeout\"),{xhr:s.xhr}))},s.xhr.send(\"GET\"===s.method?null:s.data)})},value:function(t){var e=\"string\"!==n.type(t);return n.$(arguments).slice(+e).reduce(function(t,e){return t&&t[e]},e?t:self)}}),n.Hooks=new n.Class({add:function(t,e,r){if(\"string\"==typeof arguments[0])(Array.isArray(t)?t:[t]).forEach(function(t){this[t]=this[t]||[],e&&this[t][r?\"unshift\":\"push\"](e)},this);else for(var t in arguments[0])this.add(t,arguments[0][t],arguments[1])},run:function(t,e){this[t]=this[t]||[],this[t].forEach(function(t){t.call(e&&e.context?e.context:e,e)})}}),n.hooks=new n.Hooks;var s=n.property;n.Element=function(t){this.subject=t,this.data={},this.bliss={}},n.Element.prototype={set:t(function(t,e){t in n.setProps?n.setProps[t].call(this,e):t in this?this[t]=e:this.setAttribute(t,e)},0),transition:function(t,e){return e=+e||400,new Promise(function(r,s){if(\"transition\"in this.style){var i=n.extend({},this.style,/^transition(Duration|Property)$/);n.style(this,{transitionDuration:(e||400)+\"ms\",transitionProperty:Object.keys(t).join(\", \")}),n.once(this,\"transitionend\",function(){clearTimeout(o),n.style(this,i),r(this)});var o=setTimeout(r,e+50,this);n.style(this,t)}else n.style(this,t),r(this)}.bind(this))},fire:function(t,e){var r=document.createEvent(\"HTMLEvents\");return r.initEvent(t,!0,!0),this.dispatchEvent(n.extend(r,e))},unbind:t(function(t,e){(t||\"\").split(/\\s+/).forEach(function(t){if(s in this&&(t.indexOf(\".\")>-1||!e)){t=(t||\"\").split(\".\");var r=t[1];t=t[0];var n=this[s].bliss.listeners=this[s].bliss.listeners||{};for(var i in n)if(!t||i===t)for(var o,a=0;o=n[i][a];a++)r&&r!==o.className||e&&e!==o.callback||(this.removeEventListener(i,o.callback,o.capture),a--)}else this.removeEventListener(t,e)},this)},0)},n.setProps={style:function(t){for(var e in t)e in this.style?this.style[e]=t[e]:this.style.setProperty(e,t[e])},attributes:function(t){for(var e in t)this.setAttribute(e,t[e])},properties:function(t){n.extend(this,t)},events:function(t){if(t&&t.addEventListener){var e=this;if(t[s]&&t[s].bliss){var r=t[s].bliss.listeners;for(var i in r)r[i].forEach(function(t){e.addEventListener(i,t.callback,t.capture)})}for(var o in t)0===o.indexOf(\"on\")&&(this[o]=t[o])}else if(arguments.length>1&&\"string\"===n.type(t)){var a=arguments[1],u=arguments[2];t.split(/\\s+/).forEach(function(t){this.addEventListener(t,a,u)},this)}else for(var c in t)n.events(this,c,t[c])},once:t(function(t,e){t=t.split(/\\s+/);var r=this,n=function(){return t.forEach(function(t){r.removeEventListener(t,n)}),e.apply(r,arguments)};t.forEach(function(t){r.addEventListener(t,n)})},0),delegate:t(function(t,e,r){this.addEventListener(t,function(t){t.target.closest(e)&&r.call(this,t)})},0,2),contents:function(t){(t||0===t)&&(Array.isArray(t)?t:[t]).forEach(function(t){var e=n.type(t);/^(string|number)$/.test(e)?t=document.createTextNode(t+\"\"):\"object\"===e&&(t=n.create(t)),t instanceof Node&&this.appendChild(t)},this)},inside:function(t){t.appendChild(this)},before:function(t){t.parentNode.insertBefore(this,t)},after:function(t){t.parentNode.insertBefore(this,t.nextSibling)},start:function(t){t.insertBefore(this,t.firstChild)},around:function(t){t.parentNode&&n.before(this,t),(/^template$/i.test(this.nodeName)?this.content||this:this).appendChild(t)}},n.Array=function(t){this.subject=t},n.Array.prototype={all:function(t){var e=$$(arguments).slice(1);return this[t].apply(this,e)}},n.add=t(function(t,e,r,s){r=n.extend({$:!0,element:!0,array:!0},r),\"function\"==n.type(e)&&(!r.element||t in n.Element.prototype&&s||(n.Element.prototype[t]=function(){return this.subject&&n.defined(e.apply(this.subject,arguments),this.subject)}),!r.array||t in n.Array.prototype&&s||(n.Array.prototype[t]=function(){var t=arguments;return this.subject.map(function(r){return r&&n.defined(e.apply(r,t),r)})}),r.$&&(n.sources[t]=n[t]=e,(r.array||r.element)&&(n[t]=function(){var e=[].slice.apply(arguments),s=e.shift(),i=r.array&&Array.isArray(s)?\"Array\":\"Element\";return n[i].prototype[t].apply({subject:s},e)})))},0),n.add(n.Array.prototype,{element:!1}),n.add(n.Element.prototype),n.add(n.setProps),n.add(n.classProps,{element:!1,array:!1});var i=document.createElement(\"_\");n.add(n.extend({},HTMLElement.prototype,function(t){return\"function\"===n.type(i[t])}),null,!0)}(),function(t){\"use strict\";if(Bliss&&!Bliss.shy){var e=Bliss.property;if(t.add({clone:function(){var e=this.cloneNode(!0),r=t.$(\"*\",e).concat(e);return t.$(\"*\",this).concat(this).forEach(function(e,n,s){t.events(r[n],e),r[n]._.data=t.extend({},e._.data)}),e}},{array:!1}),Object.defineProperty(Node.prototype,e,{get:function o(){return Object.defineProperty(Node.prototype,e,{get:void 0}),Object.defineProperty(this,e,{value:new t.Element(this)}),Object.defineProperty(Node.prototype,e,{get:o}),this[e]},configurable:!0}),Object.defineProperty(Array.prototype,e,{get:function(){return Object.defineProperty(this,e,{value:new t.Array(this)}),this[e]},configurable:!0}),self.EventTarget&&\"addEventListener\"in EventTarget.prototype){var r=EventTarget.prototype.addEventListener,n=EventTarget.prototype.removeEventListener,s=function(t,e,r){return r.callback===t&&r.capture==e},i=function(){return!s.apply(this,arguments)};EventTarget.prototype.addEventListener=function(t,n,i){if(this&&this[e]&&this[e].bliss&&n){var o=this[e].bliss.listeners=this[e].bliss.listeners||{};if(t.indexOf(\".\")>-1){t=t.split(\".\");var a=t[1];t=t[0]}o[t]=o[t]||[],0===o[t].filter(s.bind(null,n,i)).length&&o[t].push({callback:n,capture:i,className:a})}return r.call(this,t,n,i)},EventTarget.prototype.removeEventListener=function(t,r,s){if(this&&this[e]&&this[e].bliss&&r){var o=this[e].bliss.listeners=this[e].bliss.listeners||{};o[t]&&(o[t]=o[t].filter(i.bind(null,r,s)))}return n.call(this,t,r,s)}}self.$=self.$||t,self.$$=self.$$||t.$}}(Bliss);\n/* jsep v0.3.1 (http://jsep.from.so/) */\n!function(a){\"use strict\";var b=\"Compound\",c=\"Identifier\",d=\"MemberExpression\",e=\"Literal\",f=\"ThisExpression\",g=\"CallExpression\",h=\"UnaryExpression\",i=\"BinaryExpression\",j=\"LogicalExpression\",k=\"ConditionalExpression\",l=\"ArrayExpression\",m=46,n=44,o=39,p=34,q=40,r=41,s=91,t=93,u=63,v=59,w=58,x=function(a,b){var c=new Error(a+\" at character \"+b);throw c.index=b,c.description=a,c},y=!0,z={\"-\":y,\"!\":y,\"~\":y,\"+\":y},A={\"||\":1,\"&&\":2,\"|\":3,\"^\":4,\"&\":5,\"==\":6,\"!=\":6,\"===\":6,\"!==\":6,\"<\":7,\">\":7,\"<=\":7,\">=\":7,\"<<\":8,\">>\":8,\">>>\":8,\"+\":9,\"-\":9,\"*\":10,\"/\":10,\"%\":10},B=function(a){var b,c=0;for(var d in a)(b=d.length)>c&&a.hasOwnProperty(d)&&(c=b);return c},C=B(z),D=B(A),E={\"true\":!0,\"false\":!1,\"null\":null},F=\"this\",G=function(a){return A[a]||0},H=function(a,b,c){var d=\"||\"===a||\"&&\"===a?j:i;return{type:d,operator:a,left:b,right:c}},I=function(a){return a>=48&&a<=57},J=function(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=128&&!A[String.fromCharCode(a)]},K=function(a){return 36===a||95===a||a>=65&&a<=90||a>=97&&a<=122||a>=48&&a<=57||a>=128&&!A[String.fromCharCode(a)]},L=function(a){for(var i,j,y=0,B=a.charAt,L=a.charCodeAt,M=function(b){return B.call(a,b)},N=function(b){return L.call(a,b)},O=a.length,P=function(){for(var a=N(y);32===a||9===a;)a=N(++y)},Q=function(){var a,b,c=S();return P(),N(y)!==u?c:(y++,a=Q(),a||x(\"Expected expression\",y),P(),N(y)===w?(y++,b=Q(),b||x(\"Expected expression\",y),{type:k,test:c,consequent:a,alternate:b}):void x(\"Expected :\",y))},R=function(){P();for(var b=a.substr(y,D),c=b.length;c>0;){if(A.hasOwnProperty(b))return y+=c,b;b=b.substr(0,--c)}return!1},S=function(){var a,b,c,d,e,f,g,h;if(f=T(),b=R(),!b)return f;for(e={value:b,prec:G(b)},g=T(),g||x(\"Expected expression after \"+b,y),d=[f,e,g];(b=R())&&(c=G(b),0!==c);){for(e={value:b,prec:c};d.length>2&&c<=d[d.length-2].prec;)g=d.pop(),b=d.pop().value,f=d.pop(),a=H(b,f,g),d.push(a);a=T(),a||x(\"Expected expression after \"+b,y),d.push(e,a)}for(h=d.length-1,a=d[h];h>1;)a=H(d[h-1].value,d[h-2],a),h-=2;return a},T=function(){var b,c,d;if(P(),b=N(y),I(b)||b===m)return U();if(b===o||b===p)return V();if(J(b)||b===q)return Y();if(b===s)return $();for(c=a.substr(y,C),d=c.length;d>0;){if(z.hasOwnProperty(c))return y+=d,{type:h,operator:c,argument:T(),prefix:!0};c=c.substr(0,--d)}return!1},U=function(){for(var a,b,c=\"\";I(N(y));)c+=M(y++);if(N(y)===m)for(c+=M(y++);I(N(y));)c+=M(y++);if(a=M(y),\"e\"===a||\"E\"===a){for(c+=M(y++),a=M(y),\"+\"!==a&&\"-\"!==a||(c+=M(y++));I(N(y));)c+=M(y++);I(N(y-1))||x(\"Expected exponent (\"+c+M(y)+\")\",y)}return b=N(y),J(b)?x(\"Variable names cannot start with a number (\"+c+M(y)+\")\",y):b===m&&x(\"Unexpected period\",y),{type:e,value:parseFloat(c),raw:c}},V=function(){for(var a,b=\"\",c=M(y++),d=!1;y<O;){if(a=M(y++),a===c){d=!0;break}if(\"\\\\\"===a)switch(a=M(y++)){case\"n\":b+=\"\\n\";break;case\"r\":b+=\"\\r\";break;case\"t\":b+=\"\\t\";break;case\"b\":b+=\"\\b\";break;case\"f\":b+=\"\\f\";break;case\"v\":b+=\"\\x0B\";break;default:b+=\"\\\\\"+a}else b+=a}return d||x('Unclosed quote after \"'+b+'\"',y),{type:e,value:b,raw:c+b+c}},W=function(){var b,d=N(y),g=y;for(J(d)?y++:x(\"Unexpected \"+M(y),y);y<O&&(d=N(y),K(d));)y++;return b=a.slice(g,y),E.hasOwnProperty(b)?{type:e,value:E[b],raw:b}:b===F?{type:f}:{type:c,name:b}},X=function(a){for(var c,d,e=[],f=!1;y<O;){if(P(),c=N(y),c===a){f=!0,y++;break}c===n?y++:(d=Q(),d&&d.type!==b||x(\"Expected comma\",y),e.push(d))}return f||x(\"Expected \"+String.fromCharCode(a),y),e},Y=function(){var a,b;for(a=N(y),b=a===q?Z():W(),P(),a=N(y);a===m||a===s||a===q;)y++,a===m?(P(),b={type:d,computed:!1,object:b,property:W()}):a===s?(b={type:d,computed:!0,object:b,property:Q()},P(),a=N(y),a!==t&&x(\"Unclosed [\",y),y++):a===q&&(b={type:g,arguments:X(r),callee:b}),P(),a=N(y);return b},Z=function(){y++;var a=Q();return P(),N(y)===r?(y++,a):void x(\"Unclosed (\",y)},$=function(){return y++,{type:l,elements:X(t)}},_=[];y<O;)i=N(y),i===v||i===n?y++:(j=Q())?_.push(j):y<O&&x('Unexpected \"'+M(y)+'\"',y);return 1===_.length?_[0]:{type:b,body:_}};if(L.version=\"0.3.1\",L.toString=function(){return\"JavaScript Expression Parser (JSEP) v\"+L.version},L.addUnaryOp=function(a){return C=Math.max(a.length,C),z[a]=y,this},L.addBinaryOp=function(a,b){return D=Math.max(a.length,D),A[a]=b,this},L.addLiteral=function(a,b){return E[a]=b,this},L.removeUnaryOp=function(a){return delete z[a],a.length===C&&(C=B(z)),this},L.removeBinaryOp=function(a){return delete A[a],a.length===D&&(D=B(A)),this},L.removeLiteral=function(a){return delete E[a],this},\"undefined\"==typeof exports){var M=a.jsep;a.jsep=L,L.noConflict=function(){return a.jsep===L&&(a.jsep=M),L}}else\"undefined\"!=typeof module&&module.exports?exports=module.exports=L:exports.parse=L}(this);\n//# sourceMappingURL=jsep.min.js.map\n/*\n * Stretchy: Form element autosizing, the way it should be.\n * by Lea Verou http://lea.verou.me\n * MIT license\n */\n(function() {\n\nif (!self.Element) {\n\treturn; // super old browser\n}\n\nif (!Element.prototype.matches) {\n\tElement.prototype.matches = Element.prototype.webkitMatchesSelector || Element.prototype.mozMatchesSelector || Element.prototype.msMatchesSelector || Element.prototype.oMatchesSelector || null;\n}\n\nif (!Element.prototype.matches) {\n\treturn;\n}\n\nfunction $$(expr, con) {\n\treturn expr instanceof Node || expr instanceof Window? [expr] :\n\t       [].slice.call(typeof expr == \"string\"? (con || document).querySelectorAll(expr) : expr || []);\n}\n\nvar _ = self.Stretchy = {\n\tselectors: {\n\t\tbase: 'textarea, select:not([size]), input:not([type]), input[type=\"' + \"text url email tel\".split(\" \").join('\"], input[type=\"') + '\"]',\n\t\tfilter: \"*\"\n\t},\n\n\t// Script element this was included with, if any\n\tscript: document.currentScript || $$(\"script\").pop(),\n\n\t// Autosize one element. The core of Stretchy.\n\tresize: function(element) {\n\t\tif (!_.resizes(element)) {\n\t\t\treturn;\n\t\t}\n\n\t\tvar cs = getComputedStyle(element);\n\t\tvar offset = 0;\n\n\t\tif (!element.value && element.placeholder) {\n\t\t\tvar empty = true;\n\t\t\telement.value = element.placeholder;\n\t\t}\n\n\t\tvar type = element.nodeName.toLowerCase();\n\n\t\tif (type == \"textarea\") {\n\t\t\telement.style.height = \"0\";\n\n\t\t\tif (cs.boxSizing == \"border-box\") {\n\t\t\t\toffset = element.offsetHeight;\n\t\t\t}\n\t\t\telse if (cs.boxSizing == \"content-box\") {\n\t\t\t\toffset = -element.clientHeight;\n\t\t\t}\n\n\t\t\telement.style.height = element.scrollHeight + offset + \"px\";\n\t\t}\n\t\telse if(type == \"input\") {\n\t\t\t// First test that it is actually visible, otherwise all measurements are off\n\t\t\telement.style.width = \"1000px\";\n\n\t\t\tif (element.offsetWidth) {\n\t\t\t\telement.style.width = \"0\";\n\n\t\t\t\tif (cs.boxSizing == \"border-box\") {\n\t\t\t\t\toffset = element.offsetWidth;\n\t\t\t\t}\n\t\t\t\telse if (cs.boxSizing == \"padding-box\") {\n\t\t\t\t\toffset = element.clientWidth;\n\t\t\t\t}\n\n\t\t\t\t// Safari misreports scrollWidth, so we will instead set scrollLeft to a\n\t\t\t\t// huge number, and read that back to see what it was clipped to\n\t\t\t\telement.scrollLeft = 1e+10;\n\n\t\t\t\tvar width = Math.max(element.scrollLeft + offset, element.scrollWidth - element.clientWidth);\n\n\t\t\t\telement.style.width = width + \"px\";\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Element is invisible, just set to something reasonable\n\t\t\t\telement.style.width = element.value.length + 1 + \"ch\";\n\t\t\t}\n\t\t}\n\t\telse if (type == \"select\") {\n\t\t\tvar selectedIndex = element.selectedIndex > 0? element.selectedIndex : 0;\n\n\t\t\t// Need to use dummy element to measure :(\n\t\t\tvar option = document.createElement(\"_\");\n\t\t\toption.textContent = element.options[selectedIndex].textContent;\n\t\t\telement.parentNode.insertBefore(option, element.nextSibling);\n\n\t\t\t// The name of the appearance property, as it might be prefixed\n\t\t\tvar appearance;\n\n\t\t\tfor (var property in cs) {\n\t\t\t\tvar value = cs[property];\n\t\t\t\tif (!/^(width|webkitLogicalWidth|length)$/.test(property) && typeof value == \"string\") {\n\t\t\t\t\t//console.log(property, option.offsetWidth, cs[property]);\n\t\t\t\t\toption.style[property] = value;\n\n\t\t\t\t\tif (/appearance$/i.test(property)) {\n\t\t\t\t\t\tappearance = property;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toption.style.width = \"\";\n\n\t\t\tif (option.offsetWidth > 0) {\n\t\t\t\telement.style.width = option.offsetWidth + \"px\";\n\n\t\t\t\tif (!cs[appearance] || cs[appearance] !== \"none\") {\n\t\t\t\t\t// Account for arrow\n\t\t\t\t\telement.style.width = \"calc(\" + element.style.width + \" + 2em)\";\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toption.parentNode.removeChild(option);\n\t\t\toption = null;\n\t\t}\n\n\t\tif (empty) {\n\t\t\telement.value = \"\";\n\t\t}\n\t},\n\n\t// Autosize multiple elements\n\tresizeAll: function(elements) {\n\t\t$$(elements || _.selectors.base).forEach(function (element) {\n\t\t\t_.resize(element);\n\t\t});\n\t},\n\n\tactive: true,\n\n\t// Will stretchy do anything for this element?\n\tresizes: function(element) {\n\t\treturn element &&\n\t\t       element.parentNode &&\n\t\t       element.matches &&\n\t\t       element.matches(_.selectors.base) &&\n\t\t       element.matches(_.selectors.filter);\n\t},\n\n\tinit: function(){\n\t\t_.selectors.filter = _.script.getAttribute(\"data-filter\") ||\n\t\t                     ($$(\"[data-stretchy-filter]\").pop() || document.body).getAttribute(\"data-stretchy-filter\") || Stretchy.selectors.filter || \"*\";\n\n\t\t_.resizeAll();\n\t},\n\n\t$$: $$\n};\n\n// Autosize all elements once the DOM is loaded\n\n// DOM already loaded?\nif (document.readyState !== \"loading\") {\n\t_.init();\n}\nelse {\n\t// Wait for it\n\tdocument.addEventListener(\"DOMContentLoaded\", _.init);\n}\n\n// Listen for changes\nvar listener = function(evt) {\n\tif (_.active) {\n\t\t_.resize(evt.target);\n\t}\n};\n\ndocument.documentElement.addEventListener(\"input\", listener);\n\n// Firefox fires a change event instead of an input event\ndocument.documentElement.addEventListener(\"change\", listener);\n\n// Listen for new elements\nif (self.MutationObserver) {\n\t(new MutationObserver(function(mutations) {\n\t\tif (_.active) {\n\t\t\tmutations.forEach(function(mutation) {\n\t\t\t\tif (mutation.type == \"childList\") {\n\t\t\t\t\tStretchy.resizeAll(mutation.addedNodes);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t})).observe(document.documentElement, {\n\t\tchildList: true,\n\t\tsubtree: true\n\t});\n}\n\n})();\n\n(function ($, $$) {\n\n\"use strict\";\n\nvar _ = self.Mavo = $.Class({\n\tconstructor: function (element) {\n\t\tthis.treeBuilt = Mavo.defer();\n\n\t\tthis.element = element;\n\n\t\t// Index among other mavos in the page, 1 is first\n\t\tthis.index = _.all.push(this);\n\n\t\t// Convert any data-mv-* attributes to mv-*\n\t\tvar dataMv = _.attributes.map(attribute => `[data-${attribute}]`);\n\t\tfor (let element of $$(dataMv.join(\", \"), this.element).concat(this.element)) {\n\t\t\tfor (let attribute of _.attributes) {\n\t\t\t\tlet value = element.getAttribute(\"data-\" + attribute);\n\n\t\t\t\tif (value !== null) {\n\t\t\t\t\telement.setAttribute(attribute, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// Assign a unique (for the page) id to this mavo instance\n\t\t_.allIds.push(this.id = Mavo.getAttribute(this.element, \"mv-app\", \"id\") || `mavo${this.index}`);\n\t\tthis.element.setAttribute(\"mv-app\", this.id);\n\n\t\t// Should we start in edit mode?\n\t\tthis.autoEdit = this.element.classList.contains(\"mv-autoedit\");\n\n\t\t// Should we save automatically?\n\t\tthis.autoSave = this.element.hasAttribute(\"mv-autosave\");\n\n\t\tthis.element.setAttribute(\"typeof\", \"\");\n\n\t\t// Apply heuristic for groups\n\t\t$$(_.selectors.primitive, element).forEach(element => {\n\t\t\tvar hasChildren = $(`${_.selectors.not(_.selectors.formControl)}, ${_.selectors.property}`, element);\n\n\t\t\tif (hasChildren) {\n\t\t\t\tvar config = Mavo.Primitive.getConfig(element);\n\t\t\t\tvar isCollection = Mavo.is(\"multiple\", element);\n\n\t\t\t\tif (isCollection || !config.attribute && !config.hasChildren) {\n\t\t\t\t\telement.setAttribute(\"typeof\", \"\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Build mavo objects\n\t\tMavo.hooks.run(\"init-tree-before\", this);\n\n\t\tthis.root = new Mavo.Group(this.element, this);\n\t\tthis.treeBuilt.resolve();\n\n\t\tMavo.hooks.run(\"init-tree-after\", this);\n\n\t\tthis.ui = {\n\t\t\tbar: $(\".mv-bar\", this.element) || $.create({\n\t\t\t\tclassName: \"mv-bar mv-ui\",\n\t\t\t\tstart: this.element\n\t\t\t})\n\t\t};\n\n\t\tthis.ui.bar.classList.toggle(\"mv-compact\", this.ui.bar.parentNode.offsetWidth < 400);\n\t\tthis.ui.bar.classList.toggle(\"mv-tiny\", this.ui.bar.parentNode.offsetWidth < 250);\n\n\t\tthis.ui.status = $(\".mv-status\", this.ui.bar) || $.create(\"span\", {\n\t\t\tclassName: \"mv-status\",\n\t\t\tinside: this.ui.bar\n\t\t});\n\n\t\t// Figure out backends for storage, data reads, and initialization respectively\n\t\tfor (let role of [\"storage\", \"source\", \"init\"]) {\n\t\t\tif (this.index == 1) {\n\t\t\t\tthis[role] = _.Functions.urlOption(role);\n\t\t\t}\n\n\t\t\tif (!this[role]) {\n\t\t\t\tthis[role] =  _.Functions.urlOption(`${this.id}_${role}`) || this.element.getAttribute(\"mv-\" + role) || null;\n\t\t\t}\n\n\t\t\tif (this[role]) {\n\t\t\t\t// We have a string, convert to a backend object\n\t\t\t\tthis[role] = this[role].trim();\n\t\t\t\tthis[role] = this[role] == \"none\"? null : _.Backend.create(this[role], {\n\t\t\t\t\tmavo: this,\n\t\t\t\t\tformat: this.element.getAttribute(\"mv-format-\" + role) || this.element.getAttribute(\"mv-format\")\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tif (!this.storage && !this.source && this.init) {\n\t\t\t// If init is present with no storage and no source, init is equivalent to source\n\t\t\tthis.source = this.init;\n\t\t\tthis.init = null;\n\t\t}\n\n\t\tfor (let role of [\"storage\", \"source\", \"init\"]) {\n\t\t\tif (this[role]) {\n\t\t\t\tthis.primaryBackend = this[role];\n\t\t\t\tthis.permissions = this[role].permissions;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis.permissions = this.permissions || new Mavo.Permissions();\n\n\t\tif (this.primaryBackend)  {\n\t\t\t// Reflect backend permissions in global permissions\n\t\t\tthis.authControls = {};\n\n\t\t\t$.style(this.ui.bar, {\n\t\t\t\t\"--mv-backend\": `\"${this.primaryBackend.id}\"`\n\t\t\t});\n\n\t\t\tthis.permissions.can(\"login\", () => {\n\t\t\t\t// #login authenticates if only 1 mavo on the page, or if the first.\n\t\t\t\t// Otherwise, we have to generate a slightly more complex hash\n\t\t\t\tthis.loginHash = \"#login\" + (Mavo.all[0] === this? \"\" : \"-\" + this.id);\n\n\t\t\t\tthis.authControls.login = $.create({\n\t\t\t\t\ttag: \"a\",\n\t\t\t\t\thref: this.loginHash,\n\t\t\t\t\ttextContent: \"Login\",\n\t\t\t\t\ttitle: \"Login\",\n\t\t\t\t\tclassName: \"mv-login mv-button\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tclick: evt => {\n\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\tthis.primaryBackend.login();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tafter: $(\".mv-status\", this.ui.bar)\n\t\t\t\t});\n\n\t\t\t\t// We also support a hash to trigger login, in case the user doesn't want visible login UI\n\t\t\t\tvar login;\n\t\t\t\t(login = () => {\n\t\t\t\t\tif (location.hash === this.loginHash) {\n\t\t\t\t\t\t// This just does location.hash = \"\" without getting a pointless # at the end of the URL\n\t\t\t\t\t\thistory.replaceState(null, document.title, new URL(\"\", location) + \"\");\n\t\t\t\t\t\tthis.primaryBackend.login();\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t\twindow.addEventListener(\"hashchange.mavo\", login);\n\t\t\t}, () => {\n\t\t\t\t$.remove(this.authControls.login);\n\t\t\t\tthis.element._.unbind(\"hashchange.mavo\");\n\t\t\t});\n\n\t\t\t// Update login status\n\t\t\tthis.element.addEventListener(\"mavo:login.mavo\", evt => {\n\t\t\t\tif (evt.backend == this.primaryBackend) { // ignore logins from secondary backends\n\t\t\t\t\tvar status = $(\".mv-status\", this.ui.bar);\n\t\t\t\t\tstatus.innerHTML = \"\";\n\t\t\t\t\t$.set(status, {\n\t\t\t\t\t\tcontents: [\n\t\t\t\t\t\t\t{tag: \"strong\", innerHTML: evt.name},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\t\t\ttextContent: \"Logout\",\n\t\t\t\t\t\t\t\tclassName: \"mv-logout\",\n\t\t\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\t\tclick: e => evt.backend.logout()\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t});\n\n\t\t\t\t\t// If last time we rendered we got nothing, maybe now we'll have better luck?\n\t\t\t\t\tif (!this.root.data && !this.unsavedChanges) {\n\t\t\t\t\t\tthis.load();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.element.addEventListener(\"mavo:logout.mavo\", evt => {\n\t\t\t\t$(\".mv-status\", this.ui.bar).textContent = \"\";\n\t\t\t});\n\t\t}\n\n\t\t// Prevent editing properties inside <summary> to open and close the summary (fix bug #82)\n\t\tif ($(\"summary [property]:not([typeof])\")) {\n\t\t\tthis.element.addEventListener(\"click\", evt => {\n\t\t\t\tif (evt.target != document.activeElement) {\n\t\t\t\t\tevt.preventDefault();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// Is there any control that requires an edit button?\n\t\tthis.needsEdit = this.some(obj => obj != this.root && !obj.modes && obj.mode == \"read\");\n\n\t\tthis.setUnsavedChanges(false);\n\n\t\tthis.permissions.onchange(({action, value}) => {\n\t\t\tvar permissions = this.element.getAttribute(\"mv-permissions\") || \"\";\n\t\t\tpermissions = permissions.trim().split(/\\s+/).filter(a => a != action);\n\n\t\t\tif (value) {\n\t\t\t\tpermissions.push(action);\n\t\t\t}\n\n\t\t\tthis.element.setAttribute(\"mv-permissions\", permissions.join(\" \"));\n\t\t});\n\n\t\tif (this.needsEdit) {\n\t\t\tthis.permissions.can([\"edit\", \"add\", \"delete\"], () => {\n\t\t\t\tthis.ui.edit = $.create(\"button\", {\n\t\t\t\t\tclassName: \"mv-edit\",\n\t\t\t\t\ttextContent: \"Edit\",\n\t\t\t\t\ttitle: \"Edit\",\n\t\t\t\t\tinside: this.ui.bar\n\t\t\t\t});\n\n\t\t\t\t// Observe entire tree for mv-mode changes\n\t\t\t\tthis.modeObserver = new Mavo.Observer(this.element, \"mv-mode\", records => {\n\t\t\t\t\tfor (let record of records) {\n\t\t\t\t\t\tlet element = record.target;\n\n\t\t\t\t\t\tnodeloop: for (let node of _.Node.children(element)) {\n\t\t\t\t\t\t\tlet previousMode = node.mode, mode;\n\n\t\t\t\t\t\t\tif (node.element == element) {\n\t\t\t\t\t\t\t\t// If attribute set directly on a Mavo node, then it forces it into that mode\n\t\t\t\t\t\t\t\t// otherwise, descendant nodes still inherit, unless they are also mode-restricted\n\t\t\t\t\t\t\t\tmode = node.element.getAttribute(\"mv-mode\");\n\t\t\t\t\t\t\t\tnode.modes = mode;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t// Inherited\n\t\t\t\t\t\t\t\tif (node.modes) {\n\t\t\t\t\t\t\t\t\t// Mode-restricted, we cannot change to the other mode\n\t\t\t\t\t\t\t\t\tcontinue nodeloop;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tmode = _.getStyle(node.element.parentNode, \"--mv-mode\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tnode.mode = mode;\n\n\t\t\t\t\t\t\tif (previousMode != node.mode) {\n\t\t\t\t\t\t\t\tnode[node.mode == \"edit\"? \"edit\" : \"done\"]();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, {subtree: true});\n\n\t\t\t\tif (this.autoEdit) {\n\t\t\t\t\tthis.edit();\n\t\t\t\t}\n\t\t\t}, () => { // cannot\n\t\t\t\t$.remove(this.ui.edit);\n\n\t\t\t\tif (this.editing) {\n\t\t\t\t\tthis.done();\n\t\t\t\t}\n\n\t\t\t\tthis.modeObserver && this.modeObserver.destroy();\n\t\t\t});\n\t\t}\n\n\t\tif (this.storage) {\n\t\t\tthis.permissions.can(\"delete\", () => {\n\t\t\t\tthis.ui.clear = $.create(\"button\", {\n\t\t\t\t\tclassName: \"mv-clear\",\n\t\t\t\t\ttextContent: \"Clear\",\n\t\t\t\t\ttitle: \"Clear\"\n\t\t\t\t});\n\n\t\t\t\tthis.ui.bar.appendChild(this.ui.clear);\n\t\t\t}, () => {\n\t\t\t\t$.remove(this.ui.clear);\n\t\t\t});\n\t\t}\n\n\t\tif (this.storage || this.source) {\n\t\t\t// Fetch existing data\n\t\t\tthis.permissions.can(\"read\", () => this.load());\n\t\t}\n\t\telse {\n\t\t\t// No storage\n\t\t\tthis.permissions.on([\"read\", \"edit\"]);\n\n\t\t\t$.fire(this.element, \"mavo:load\");\n\t\t}\n\n\t\tthis.permissions.can(\"save\", () => {\n\t\t\tif (this.autoSave) {\n\t\t\t\tvar delay = (this.element.getAttribute(\"mv-autosave\") || 3) * 1000;\n\n\t\t\t\tthis.element.addEventListener(\"mavo:load.mavo:autosave\", evt => {\n\t\t\t\t\tvar debouncedSave = _.debounce(() => {\n\t\t\t\t\t\tthis.save();\n\t\t\t\t\t}, delay);\n\n\t\t\t\t\tvar callback = evt => {\n\t\t\t\t\t\tif (evt.node.saved) {\n\t\t\t\t\t\t\tdebouncedSave();\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\tthis.permissions.can(\"save\", () => {\n\t\t\t\t\t\t\tthis.element.addEventListener(\"mavo:datachange.mavo:autosave\", callback);\n\t\t\t\t\t\t}, () => {\n\t\t\t\t\t\t\tthis.element.removeEventListener(\"mavo:datachange.mavo:autosave\", callback);\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!this.autoSave || delay > 0) {\n\t\t\t\t// If throttling is disabled, the Save button is pointless\n\t\t\t\tthis.ui.save = $.create(\"button\", {\n\t\t\t\t\tclassName: \"mv-save\",\n\t\t\t\t\ttextContent: \"Save\",\n\t\t\t\t\ttitle: \"Save\",\n\t\t\t\t\tinside: this.ui.bar\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t$.events(this.ui.save, {\n\t\t\t\t\"mouseenter focus\": e => {\n\t\t\t\t\tthis.element.classList.add(\"mv-highlight-unsaved\");\n\t\t\t\t},\n\t\t\t\t\"mouseleave blur\": e => this.element.classList.remove(\"mv-highlight-unsaved\")\n\t\t\t});\n\t\t}, () => {\n\t\t\t$.remove(this.ui.save);\n\t\t\tthis.ui.save = null;\n\t\t\tthis.element.removeEventListener(\".mavo:autosave\");\n\t\t});\n\n\t\t$.delegate(this.element, \"click\", {\n\t\t\t\".mv-save\": evt => {\n\t\t\t\tif (this.permissions.save) {\n\t\t\t\t\tthis.save();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\".mv-edit\": evt => {\n\t\t\t\tif (this.editing || !this.permissions.edit) {\n\t\t\t\t\tthis.done();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.edit();\n\t\t\t\t}\n\t\t\t},\n\t\t\t\".mv-clear\": evt => {\n\t\t\t\tif (this.permissions.delete) {\n\t\t\t\t\tthis.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// Ctrl + S or Cmd + S to save\n\t\tthis.element.addEventListener(\"keydown\", evt => {\n\t\t\tif (evt.keyCode == 83 && evt[_.superKey]) {\n\t\t\t\tevt.preventDefault();\n\t\t\t\tthis.save();\n\t\t\t}\n\t\t});\n\n\t\tMavo.hooks.run(\"init-end\", this);\n\t},\n\n\tget editing() {\n\t\treturn this.root.editing;\n\t},\n\n\tgetData: function() {\n\t\treturn this.root.getData();\n\t},\n\n\ttoJSON: function() {\n\t\treturn _.toJSON(this.getData());\n\t},\n\n\terror: function(message, ...log) {\n\t\tvar close = () => $.transition(error, {opacity: 0}).then($.remove);\n\t\tvar closeTimeout;\n\t\tvar error = $.create(\"p\", {\n\t\t\tclassName: \"mv-error mv-ui\",\n\t\t\tcontents: [\n\t\t\t\tmessage,\n\t\t\t\t{\n\t\t\t\t\ttag: \"button\",\n\t\t\t\t\tclassName: \"mv-close mv-ui\",\n\t\t\t\t\ttextContent: \"\",\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\"click\": close\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tmouseenter: e => clearTimeout(closeTimeout),\n\t\t\t\tmouseleave: _.rr(e => closeTimeout = setTimeout(close, 5000)),\n\t\t\t\tclick: e => this.element.scrollIntoView({behavior: \"smooth\"})\n\t\t\t},\n\t\t\tstart: this.element\n\t\t});\n\n\t\t// Log more info for programmers\n\t\tif (log.length > 0) {\n\t\t\tconsole.log(`%c${this.id}: ${message}`, \"color: red; font-weight: bold\", ...log);\n\t\t}\n\t},\n\n\trender: function(data) {\n\t\tvar env = {context: this, data};\n\n\t\t_.hooks.run(\"render-start\", env);\n\n\t\tif (env.data) {\n\t\t\tthis.root.render(env.data);\n\t\t}\n\n\t\tthis.unsavedChanges = false;\n\n\t\t_.hooks.run(\"render-end\", env);\n\t},\n\n\tclear: function() {\n\t\tif (confirm(\"This will delete all your data. Are you sure?\")) {\n\t\t\tthis.store(null).then(() => this.root.clear());\n\t\t}\n\t},\n\n\tedit: function() {\n\t\tthis.root.edit();\n\n\t\t$.events(this.element, \"mouseenter.mavo:edit mouseleave.mavo:edit\", evt => {\n\t\t\tif (evt.target.matches(\".mv-item-controls *\")) {\n\t\t\t\tvar itemControls = evt.target.closest(\".mv-item-controls\");\n\t\t\t\tvar item = Mavo.data(itemControls, \"item\");\n\n\t\t\t\tif (item && item.element) {\n\t\t\t\t\titem.element.classList.toggle(\"mv-highlight\", evt.type == \"mouseenter\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (evt.target.matches(_.selectors.multiple)) {\n\t\t\t\tevt.target.classList.remove(\"mv-has-hovered-item\");\n\n\t\t\t\tvar parent = evt.target.parentNode.closest(_.selectors.multiple);\n\n\t\t\t\tif (parent) {\n\t\t\t\t\tparent.classList.toggle(\"mv-has-hovered-item\", evt.type == \"mouseenter\");\n\t\t\t\t}\n\t\t\t}\n\t\t}, true);\n\n\t\tthis.setUnsavedChanges();\n\t},\n\n\t/**\n\t * Set this mavo instances unsavedChanges flag.\n\t * @param {Boolean} [value]\n\t *        If true, just sets the flag to true, no traversal.\n\t *        If false, sets the flag of the Mavo instance and every tree node to false\n\t *        If not provided, traverses the tree and recalculates the flag value.\n\t */\n\tsetUnsavedChanges: function(value) {\n\t\tvar unsavedChanges = !!value;\n\n\t\tif (!value) {\n\t\t\tthis.walk(obj => {\n\t\t\t\tif (obj.unsavedChanges) {\n\t\t\t\t\tunsavedChanges = true;\n\n\t\t\t\t\tif (value === false) {\n\t\t\t\t\t\tobj.unsavedChanges = false;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn this.unsavedChanges = unsavedChanges;\n\t},\n\n\t// Conclude editing\n\tdone: function() {\n\t\tthis.root.done();\n\t\t$.unbind(this.element, \".mavo:edit\");\n\t\tthis.unsavedChanges = false;\n\t},\n\n\t/**\n\t * load - Fetch data from source and render it.\n\t *\n\t * @return {Promise}  A promise that resolves when the data is loaded.\n\t */\n\tload: function() {\n\t\tthis.inProgress = \"Loading\";\n\n\t\tvar backend = this.source || this.storage;\n\n\t\treturn backend.ready.then(() => backend.load())\n\t\t.catch(err => {\n\t\t\t// Try again with init\n\t\t\tif (this.init && this.init != backend) {\n\t\t\t\tbackend = this.init;\n\t\t\t\treturn this.init.ready.then(() => this.init.load());\n\t\t\t}\n\n\t\t\t// No init, propagate error\n\t\t\treturn Promise.reject(err);\n\t\t})\n\t\t.catch(err => {\n\t\t\tif (err) {\n\t\t\t\tvar xhr = err instanceof XMLHttpRequest? err : err.xhr;\n\n\t\t\t\tif (xhr && xhr.status == 404) {\n\t\t\t\t\tthis.render(null);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvar message = \"Problem loading data\";\n\n\t\t\t\t\tif (xhr) {\n\t\t\t\t\t\tmessage += xhr.status? `: HTTP error ${err.status}: ${err.statusText}` : \": Cant connect to the Internet\";\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.error(message, err);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t})\n\t\t.then(data => this.render(data))\n\t\t.then(() => {\n\t\t\tthis.inProgress = false;\n\t\t\t$.fire(this.element, \"mavo:load\");\n\t\t});\n\t},\n\n\tstore: function() {\n\t\tif (!this.storage) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.inProgress = \"Saving\";\n\n\t\treturn this.storage.login()\n\t\t\t.then(() => this.storage.store(this.getData()))\n\t\t\t.catch(err => {\n\t\t\t\tif (err) {\n\t\t\t\t\tvar message = \"Problem saving data\";\n\n\t\t\t\t\tif (err instanceof XMLHttpRequest) {\n\t\t\t\t\t\tmessage += xhr.status? `: HTTP error ${err.status}: ${err.statusText}` : \": Cant connect to the Internet\";\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.error(message, err);\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\t\t\t})\n\t\t\t.then(saved => {\n\t\t\t\tthis.inProgress = false;\n\t\t\t\treturn saved;\n\t\t\t});\n\t},\n\n\tsave: function() {\n\t\treturn this.store().then(saved => {\n\t\t\tif (saved) {\n\t\t\t\t$.fire(this.element, \"mavo:save\", saved);\n\n\t\t\t\tthis.lastSaved = Date.now();\n\t\t\t\tthis.root.save();\n\t\t\t\tthis.unsavedChanges = false;\n\t\t\t}\n\t\t});\n\t},\n\n\twalk: function(callback) {\n\t\treturn this.root.walk(callback);\n\t},\n\n\t/**\n\t * Executes a test on every node. If ANY node passes (test returns true),\n\t * the function returns true. Otherwise, it returns false.\n\t * Similar semantics to Array.prototype.some().\n\t */\n\tsome: function(test) {\n\t\treturn !this.walk((obj, path) => {\n\t\t\tvar ret = test(obj, path);\n\n\t\t\tif (ret === true) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\n\tlive: {\n\t\tinProgress: function(value) {\n\t\t\t$.toggleAttribute(this.element, \"mv-progress\", value, value);\n\t\t},\n\n\t\tunsavedChanges: function(value) {\n\t\t\tthis.element.classList.toggle(\"mv-unsaved-changes\", value);\n\t\t},\n\n\t\tneedsEdit: function(value) {\n\t\t\t$.remove(this.ui.edit);\n\t\t}\n\t},\n\n\tstatic: {\n\t\tall: [],\n\n\t\tallIds: [],\n\n\t\tget: function(id) {\n\t\t\tfor (let mavo of _.all) {\n\t\t\t\tif (mavo.id === id) {\n\t\t\t\t\treturn mavo;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\tsuperKey: navigator.platform.indexOf(\"Mac\") === 0? \"metaKey\" : \"ctrlKey\",\n\n\t\tinit: function(container) {\n\t\t\treturn $$(_.selectors.init, container || document)\n\t\t\t\t.filter(element => element == document.documentElement || !element.parentNode.closest(_.selectors.init))\n\t\t\t\t.map(element => new _(element));\n\t\t},\n\n\t\tplugin: function(o) {\n\t\t\t_.hooks.add(o.hooks);\n\n\t\t\tfor (let Class in o.extend) {\n\t\t\t\tlet def = Class == \"Mavo\"? _ : _[Class];\n\t\t\t\t$.Class(def, o.extend[Class]);\n\t\t\t}\n\t\t},\n\n\t\thooks: new $.Hooks(),\n\n\t\tattributes: [\n\t\t\t\"mv-app\", \"mv-storage\", \"mv-source\", \"mv-init\", \"mv-path\", \"mv-format\",\n\t\t\t\"mv-attribute\", \"mv-default\", \"mv-mode\", \"mv-edit\", \"mv-permisssions\"\n\t\t]\n\t}\n});\n\n{\n\nlet s = _.selectors = {\n\tinit: \".mv-app, [mv-app], [data-mv-app], [mv-storage], [data-mv-storage]\",\n\tproperty: \"[property], [itemprop]\",\n\tspecificProperty: name => `[property=${name}], [itemprop=${name}]`,\n\tgroup: \"[typeof], [itemscope], [itemtype], [mv-group]\",\n\tmultiple: \"[mv-multiple]\",\n\tformControl: \"input, select, option, textarea\",\n\tui: \".mv-ui\",\n\tcontainer: {\n\t\t// \"li\": \"ul, ol\",\n\t\t\"tr\": \"table\",\n\t\t\"option\": \"select\",\n\t\t// \"dt\": \"dl\",\n\t\t// \"dd\": \"dl\"\n\t}\n};\n\nlet arr = s.arr = selector => selector.split(/\\s*,\\s*/g);\nlet not = s.not = selector => arr(selector).map(s => `:not(${s})`).join(\"\");\nlet or = s.or = (selector1, selector2) => selector1 + \", \" + selector2;\nlet and = s.and = (selector1, selector2) => {\n\tvar ret = [], arr2 = arr(selector2);\n\n\tarr(selector1).forEach(s1 => ret.push(...arr2.map(s2 => s1 + s2)));\n\n\treturn ret.join(\", \");\n};\nlet andNot = s.andNot = (selector1, selector2) => and(selector1, not(selector2));\n\n$.extend(_.selectors, {\n\tprimitive: andNot(s.property, s.group),\n\trootGroup: andNot(s.group, s.property),\n\toutput: or(s.specificProperty(\"output\"), \".mv-output, .mv-value\")\n});\n\n}\n\n// Init mavo\nPromise.all([\n\t$.ready(),\n\t$.include(Array.from && window.Intl && document.documentElement.closest, \"https://cdn.polyfill.io/v2/polyfill.min.js?features=blissfuljs,Intl.~locale.en\")\n])\n.catch(err => console.error(err))\n.then(() => Mavo.init());\n\nStretchy.selectors.filter = \".mv-editor:not([property])\";\n\n})(Bliss, Bliss.$);\n\n(function ($, $$) {\n\nvar _ = $.extend(Mavo, {\n\ttoJSON: data => {\n\t\tif (data === null) {\n\t\t\treturn \"\";\n\t\t}\n\n\t\tif (typeof data === \"string\") {\n\t\t\t// Do not stringify twice!\n\t\t\treturn data;\n\t\t}\n\n\t\treturn JSON.stringify(data, null, \"\\t\");\n\t},\n\n\tqueryJSON: function(data, path) {\n\t\tif (!path || !data) {\n\t\t\treturn data;\n\t\t}\n\n\t\treturn $.value.apply($, [data].concat(path.split(\"/\")));\n\t},\n\n\t// If the passed value is not an array, convert to an array\n\ttoArray: arr => {\n\t\treturn arr === undefined? [] : Array.isArray(arr)? arr : [arr];\n\t},\n\n\tdelete: (arr, element) => {\n\t\tvar index = arr && arr.indexOf(element);\n\n\t\tif (index > -1) {\n\t\t\tarr.splice(index, 1);\n\t\t}\n\t},\n\n\thasIntersection: (arr1, arr2) => arr1 && arr2 && !arr1.every(el => arr2.indexOf(el) == -1),\n\n\t// Recursively flatten a multi-dimensional array\n\tflatten: arr => {\n\t\tif (!Array.isArray(arr)) {\n\t\t\treturn [arr];\n\t\t}\n\n\t\treturn arr.reduce((prev, c) => _.toArray(prev).concat(_.flatten(c)), []);\n\t},\n\n\tis: function(thing, ...elements) {\n\t\tfor (let element of elements) {\n\t\t\tif (element && element.matches && element.matches(_.selectors[thing])) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t},\n\n\t/**\n\t * Get the current value of a CSS property on an element\n\t */\n\tgetStyle: (element, property) => element && getComputedStyle(element).getPropertyValue(property).trim(),\n\n\t/**\n\t * Get/set data on an element\n\t */\n\tdata: function(element, name, value) {\n\t\tif (arguments.length == 2) {\n\t\t\treturn $.value(element, \"_\", \"data\", \"mavo\", name);\n\t\t}\n\t\telse {\n\t\t\telement._.data.mavo = element._.data.mavo || {};\n\t\t\treturn element._.data.mavo[name] = value;\n\t\t}\n\t},\n\n\t/**\n\t * Revocably add/remove elements from the DOM\n\t */\n\trevocably: {\n\t\tadd: function(element) {\n\t\t\tvar comment = _.revocably.isRemoved(element);\n\n\t\t\tif (comment) {\n\t\t\t\tcomment.parentNode.replaceChild(element, comment);\n\t\t\t}\n\n\t\t\treturn comment;\n\t\t},\n\n\t\tremove: function(element, commentText) {\n\t\t\tif (!element) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar comment = _.data(element, \"commentstub\");\n\n\t\t\tif (!comment) {\n\t\t\t\tcommentText = commentText || element.id || element.className || element.nodeName;\n\t\t\t\tcomment = _.data(element, \"commentstub\", document.createComment(commentText));\n\t\t\t}\n\n\t\t\tif (element.parentNode) {\n\t\t\t\t// In DOM, remove\n\t\t\t\telement.parentNode.replaceChild(comment, element);\n\t\t\t}\n\n\t\t\treturn comment;\n\t\t},\n\n\t\tisRemoved: function(element) {\n\t\t\tif (!element || element.parentNode) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar comment = _.data(element, \"commentstub\");\n\n\t\t\tif (comment && comment.parentNode) {\n\t\t\t\treturn comment;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\t},\n\n\tinViewport: element => {\n\t\tvar r = element.getBoundingClientRect();\n\n\t\treturn (0 <= r.bottom && r.bottom <= innerHeight || 0 <= r.top && r.top <= innerHeight) // vertical\n\t\t       && (0 <= r.right && r.right <= innerWidth || 0 <= r.left && r.left <= innerWidth); // horizontal\n\t},\n\n\tscrollIntoViewIfNeeded: element => {\n\t\tif (!Mavo.inViewport(element)) {\n\t\t\telement.scrollIntoView({behavior: \"smooth\"});\n\t\t}\n\t},\n\n\tpushUnique: (arr, item) => {\n\t\tif (arr.indexOf(item) === -1) {\n\t\t\tarr.push(item);\n\t\t}\n\t},\n\n\tsubset: function(obj, path, value) {\n\t\tif (arguments.length == 3) {\n\t\t\t// Put\n\t\t\tif (path.length) {\n\t\t\t\tvar parent = $.value(obj, ...path.slice(0, -1));\n\t\t\t\tparent[path[path.length - 1]] = value;\n\t\t\t\treturn obj;\n\t\t\t}\n\n\t\t\treturn value;\n\t\t}\n\t\telse {\n\t\t\t// Get\n\t\t\treturn typeof obj == \"object\" && path && path.length? $.value(obj, ...path) : obj;\n\t\t}\n\t},\n\n\t/**\n\t * Get the value of an attribute, with fallback attributes in priority order.\n\t */\n\tgetAttribute: function(element, ...attributes) {\n\t\tfor (let i=0, attribute; attribute = attributes[i]; i++) {\n\t\t\tlet value = element.getAttribute(attribute);\n\n\t\t\tif (value) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t// Credit: https://remysharp.com/2010/07/21/throttling-function-calls\n\tdebounce: function (fn, delay) {\n\t\tif (!delay) {\n\t\t\t// No throttling\n\t\t\treturn fn;\n\t\t}\n\n\t\tvar timer = null, code;\n\n\t\treturn function () {\n\t\t\tvar context = this, args = arguments;\n\t\t\tcode = function () {\n\t\t\t\tfn.apply(context, args);\n\t\t\t\tremoveEventListener(\"beforeunload\", code);\n\t\t\t};\n\n\t\t\tclearTimeout(timer);\n\t\t\ttimer = setTimeout(code, delay);\n\t\t\taddEventListener(\"beforeunload\", code);\n\t\t};\n\t},\n\n\tescapeRegExp: s => s.replace(/[-\\/\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\"),\n\n\tObserver: $.Class({\n\t\tconstructor: function(element, attribute, callback, o = {}) {\n\t\t\tif (callback instanceof MutationObserver) {\n\t\t\t\tthis.observer = callback;\n\t\t\t}\n\n\t\t\tthis.observer = this.observer || new MutationObserver(callback);\n\t\t\tthis.element = element;\n\t\t\tthis.callback = callback;\n\t\t\tthis.attribute = attribute;\n\n\t\t\tthis.options = $.extend({}, o);\n\n\t\t\tif (attribute) {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tattributes: true,\n\t\t\t\t\tattributeFilter: this.attribute == \"all\"? undefined : [this.attribute],\n\t\t\t\t\tattributeOldValue: !!o.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (!this.attribute || this.attribute == \"all\") {\n\t\t\t\t$.extend(this.options, {\n\t\t\t\t\tcharacterData: true,\n\t\t\t\t\tchildList: true,\n\t\t\t\t\tsubtree: true,\n\t\t\t\t\tcharacterDataOldValue: !!o.oldValue\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.run();\n\t\t},\n\n\t\tstop: function() {\n\t\t\tthis.observer.disconnect();\n\t\t\tthis.running = false;\n\n\t\t\treturn this;\n\t\t},\n\n\t\trun: function() {\n\t\t\tif (this.observer) {\n\t\t\t\tthis.observer.observe(this.element, this.options);\n\t\t\t\tthis.running = true;\n\t\t\t}\n\n\t\t\treturn this;\n\t\t},\n\n\t\t/**\n\t\t * Disconnect an observer, run some code, then observe again\n\t\t */\n\t\tsneak: function(callback) {\n\t\t\tif (this.running) {\n\t\t\t\tthis.stop();\n\t\t\t\tvar ret = callback();\n\t\t\t\tthis.run();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar ret = callback();\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\tdestroy: function() {\n\t\t\tthis.observer.disconnect();\n\t\t\tthis.observer = this.element = null;\n\t\t},\n\n\t\tstatic: {\n\t\t\tsneak: function(observer, callback) {\n\t\t\t\treturn observer? observer.sneak(callback) : callback();\n\t\t\t}\n\t\t}\n\t}),\n\n\tdefer: function(constructor) {\n\t\tvar res, rej;\n\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tif (constructor) {\n\t\t\t\tconstructor(resolve, reject);\n\t\t\t}\n\n\t\t\tres = resolve;\n\t\t\trej = reject;\n\t\t});\n\n\t\tpromise.resolve = a => {\n\t\t\tres(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\tpromise.reject = a => {\n\t\t\trej(a);\n\t\t\treturn promise;\n\t\t};\n\n\t\treturn promise;\n\t},\n\n\t/**\n\t * Run & Return a function\n\t */\n\trr: function(f) {\n\t\tf();\n\t\treturn f;\n\t}\n});\n\n// Bliss plugins\n\n$.add(\"toggleAttribute\", function(name, value, test = value !== null) {\n\tif (test) {\n\t\tthis.setAttribute(name, value);\n\t}\n\telse {\n\t\tthis.removeAttribute(name);\n\t}\n});\n\n// Provide shortcuts to long property chains\n$.proxy = $.classProps.proxy = $.overload(function(obj, property, proxy) {\n\tObject.defineProperty(obj, property, {\n\t\tget: function() {\n\t\t\treturn this[proxy][property];\n\t\t},\n\t\tset: function(value) {\n\t\t\tthis[proxy][property] = value;\n\t\t},\n\t\tconfigurable: true,\n\t\tenumerable: true\n\t});\n\n\treturn obj;\n});\n\n$.classProps.propagated = function(proto, names) {\n\tMavo.toArray(names).forEach(name => {\n\t\tvar existing = proto[name];\n\n\t\tproto[name] = function() {\n\t\t\tvar ret = existing && existing.apply(this, arguments);\n\n\t\t\tif (this.propagate && ret !== false) {\n\t\t\t\tthis.propagate(name);\n\t\t\t}\n\t\t};\n\t});\n};\n\n// :focus-within and :target-within shim\nfunction updateWithin(cl, element) {\n\tcl = \"mv-\" + cl + \"-within\";\n\t$$(\".\" + cl).forEach(el => el.classList.remove(cl));\n\n\twhile (element && element.classList) {\n\t\telement.classList.add(cl);\n\t\telement = element.parentNode;\n\t}\n};\n\ndocument.addEventListener(\"focus\", evt => {\n\tupdateWithin(\"focus\", evt.target);\n}, true);\n\ndocument.addEventListener(\"blur\", evt => {\n\tupdateWithin(\"focus\", null);\n}, true);\n\naddEventListener(\"hashchange\", evt => {\n\tupdateWithin(\"target\", $(location.hash));\n});\n\ndocument.documentElement.addEventListener(\"mavo:datachange\", evt => {\n\t// TODO debounce\n\tupdateWithin(\"target\", $(location.hash));\n});\n\nupdateWithin(\"focus\", document.activeElement !== document.body? document.activeElement : null);\n\n})(Bliss, Bliss.$);\n\n(function($) {\n\nvar _ = Mavo.Permissions = $.Class({\n\tconstructor: function(o) {\n\t\tthis.triggers = [];\n\n\t\tthis.set(o);\n\n\t\tthis.hooks = new $.Hooks();\n\t},\n\n\t// Set multiple permissions at once\n\tset: function(o) {\n\t\tfor (var action in o) {\n\t\t\tthis[action] = o[action];\n\t\t}\n\t},\n\n\t// Set a bunch of permissions to true. Chainable.\n\ton: function(actions) {\n\t\tMavo.toArray(actions).forEach(action => this[action] = true);\n\n\t\treturn this;\n\t},\n\n\t// Set a bunch of permissions to false. Chainable.\n\toff: function(actions) {\n\t\tactions = Array.isArray(actions)? actions : [actions];\n\n\t\tactions.forEach(action => this[action] = false);\n\n\t\treturn this;\n\t},\n\n\t// Fired once at least one of the actions passed can be performed\n\t// Kind of like a Promise that can be resolved multiple times.\n\tcan: function(actions, callback, cannot) {\n\t\tthis.observe(actions, true, callback);\n\n\t\tif (cannot) {\n\t\t\t// Fired once the action cannot be done anymore, even though it could be done before\n\t\t\tthis.cannot(actions, cannot);\n\t\t}\n\t},\n\n\t// Fired once NONE of the actions can be performed\n\tcannot: function(actions, callback) {\n\t\tthis.observe(actions, false, callback);\n\t},\n\n\t// Like this.can(), but returns a promise\n\t// Useful for things that you want to do only once\n\twhen: function(actions) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.can(actions, resolve, reject);\n\t\t});\n\t},\n\n\t// Schedule a callback for when a set of permissions changes value\n\tobserve: function(actions, value, callback) {\n\t\tactions = Mavo.toArray(actions);\n\n\t\tif (this.is(actions, value)) {\n\t\t\t// Should be fired immediately\n\t\t\tcallback();\n\t\t}\n\n\t\t// For future transitions\n\t\tthis.triggers.push({ actions, value, callback, active: true });\n\t},\n\n\t// Compare a set of permissions with true or false\n\t// If comparing with true, we want at least one to be true, i.e. OR\n\t// If comparing with false, we want ALL to be false, i.e. NOR\n\tis: function(actions, able) {\n\t\tvar or = actions.map(action => !!this[action])\n\t\t                .reduce((prev, current) => prev || current);\n\n\t\treturn able? or : !or;\n\t},\n\n\t// Monitor all changes\n\tonchange: function(callback) {\n\t\tthis.hooks.add(\"change\", callback);\n\n\t\tfor (let action of _.actions) {\n\t\t\tcallback.call(this, {\n\t\t\t\taction,\n\t\t\t\tvalue: this[action],\n\t\t\t\tpermissions: this\n\t\t\t});\n\t\t}\n\t},\n\n\t// A single permission changed value\n\tchanged: function(action, value, from) {\n\t\tfrom = !!from;\n\t\tvalue = !!value;\n\n\t\tif (value == from) {\n\t\t\t// Nothing changed\n\t\t\treturn;\n\t\t}\n\n\t\t// $.live() calls the setter before the actual property is set so we\n\t\t// need to set it manually, otherwise it still has its previous value\n\t\tthis[\"_\" + action] = value;\n\n\t\t// TODO add classes to element\n\t\tthis.triggers.forEach(trigger => {\n\t\t\tvar match = this.is(trigger.actions, trigger.value);\n\n\t\t\tif (trigger.active && trigger.actions.indexOf(action) > -1 && match) {\n\n\t\t\t\ttrigger.active = false;\n\t\t\t\ttrigger.callback();\n\t\t\t}\n\t\t\telse if (!match) {\n\t\t\t\t// This is so that triggers can only be executed in an actual transition\n\t\t\t\t// And that if there is a trigger for [a,b] it won't be executed twice\n\t\t\t\t// if a and b are set to true one after the other\n\t\t\t\ttrigger.active = true;\n\t\t\t}\n\t\t});\n\n\t\tthis.hooks.run(\"change\", {action, value, permissions: this});\n\t},\n\n\tor: function(permissions) {\n\t\tfor (let action of _.actions) {\n\t\t\tthis[action] = this[action] || permissions[action];\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tstatic: {\n\t\tactions: [],\n\n\t\t// Register a new permission type\n\t\tregister: function(action, setter) {\n\t\t\tif (Array.isArray(action)) {\n\t\t\t\taction.forEach(action => _.register(action, setter));\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$.live(_.prototype, action, function(able, previous) {\n\t\t\t\tif (setter) {\n\t\t\t\t\tsetter.call(this, able, previous);\n\t\t\t\t}\n\n\t\t\t\tthis.changed(action, able, previous);\n\t\t\t});\n\n\t\t\t_.actions.push(action);\n\t\t}\n\t}\n});\n\n_.register([\"read\", \"save\"]);\n\n_.register(\"login\", function(can) {\n\tif (can && this.logout) {\n\t\tthis.logout = false;\n\t}\n});\n\n_.register(\"logout\", function(can) {\n\tif (can && this.login) {\n\t\tthis.login = false;\n\t}\n});\n\n_.register(\"edit\", function(can) {\n\tif (can) {\n\t\tthis.add = this.delete = true;\n\t}\n});\n\n_.register([\"add\", \"delete\"], function(can) {\n\tif (!can) {\n\t\tthis.edit = false;\n\t}\n});\n\n})(Bliss);\n\n(function($) {\n\n/**\n * Base class for all backends\n */\nvar _ = Mavo.Backend = $.Class({\n\tconstructor: function(url, o = {}) {\n\t\tthis.raw = url;\n\t\tthis.url = new URL(this.raw, location);\n\t\tthis.mavo = o.mavo;\n\t\tthis.format = Mavo.Formats.create(o.format, this);\n\n\t\t// Permissions of this particular backend.\n\t\tthis.permissions = new Mavo.Permissions();\n\t},\n\n\tget: function() {\n\t\treturn $.fetch(this.url.href)\n\t\t        .then(xhr => Promise.resolve(xhr.responseText), () => Promise.resolve(null));\n\t},\n\n\tload: function() {\n\t\treturn this.ready\n\t\t\t.then(() => this.get())\n\t\t\t.then(response => {\n\t\t\tif (typeof response != \"string\") {\n\t\t\t\t// Backend did the parsing, we're done here\n\t\t\t\treturn response;\n\t\t\t}\n\n\t\t\tresponse = response.replace(/^\\ufeff/, \"\"); // Remove Unicode BOM\n\n\t\t\treturn this.format.parse(response);\n\t\t});\n\t},\n\n\tstore: function(data, {path, format = this.format} = {}) {\n\t\treturn this.ready.then(() => {\n\t\t\tvar serialize = typeof data === \"string\"? Promise.resolve(data) : format.stringify(data);\n\n\t\t\treturn serialize.then(serialized => this.put(serialized, path).then(() => {\n\t\t\t\treturn {data, serialized};\n\t\t\t}));\n\t\t});\n\t},\n\n\t// To be be overriden by subclasses\n\tready: Promise.resolve(),\n\tlogin: () => Promise.resolve(),\n\tlogout: () => Promise.resolve(),\n\n\ttoString: function() {\n\t\treturn `${this.id} (${this.url})`;\n\t},\n\n\tstatic: {\n\t\t// Return the appropriate backend(s) for this url\n\t\tcreate: function(url, o) {\n\t\t\tif (url) {\n\t\t\t\tvar Backend = _.types.filter(Backend => Backend.test(url))[0] || _.Remote;\n\n\t\t\t\treturn new Backend(url, o);\n\t\t\t}\n\n\t\t\treturn null;\n\t\t},\n\n\t\ttypes: [],\n\n\t\tregister: function(Class) {\n\t\t\t_[Class.prototype.id] = Class;\n\t\t\t_.types.push(Class);\n\t\t\treturn Class;\n\t\t}\n\t}\n});\n\n/**\n * Save in an HTML element\n */\n_.register($.Class({\n\tid: \"Element\",\n\textends: _,\n\tconstructor: function () {\n\t\tthis.permissions.on([\"read\", \"edit\", \"save\"]);\n\n\t\tthis.element = $(this.raw) || $.create(\"script\", {\n\t\t\ttype: \"application/json\",\n\t\t\tid: this.raw.slice(1),\n\t\t\tinside: document.body\n\t\t});\n\t},\n\n\tget: function() {\n\t\treturn Promise.resolve(this.element.textContent);\n\t},\n\n\tput: function(serialized) {\n\t\treturn Promise.resolve(this.element.textContent = serialized);\n\t},\n\n\tstatic: {\n\t\ttest: url => url.indexOf(\"#\") === 0\n\t}\n}));\n\n// Load from a remote URL, no save\n_.register($.Class({\n\tid: \"Remote\",\n\textends: _,\n\tconstructor: function() {\n\t\tthis.permissions.on(\"read\");\n\t},\n\n\tstatic: {\n\t\ttest: url => false\n\t}\n}));\n\n// Save in localStorage\n_.register($.Class({\n\textends: _,\n\tid: \"Local\",\n\tconstructor: function() {\n\t\tthis.permissions.on([\"read\", \"edit\", \"save\"]);\n\t\tthis.key = this.mavo.id;\n\t},\n\n\tget: function() {\n\t\treturn Promise[this.key in localStorage? \"resolve\" : \"reject\"](localStorage[this.key]);\n\t},\n\n\tput: function(serialized) {\n\t\tif (!serialized) {\n\t\t\tdelete localStorage[this.key];\n\t\t}\n\t\telse {\n\t\t\tlocalStorage[this.key] = serialized;\n\t\t}\n\n\t\treturn Promise.resolve(serialized);\n\t},\n\n\tstatic: {\n\t\ttest: value => value == \"local\"\n\t}\n}));\n\n})(Bliss);\n\n(function($, $$) {\n\nvar _ = Mavo.Formats = {};\n\nvar base = _.Base = $.Class({\n\tabstract: true,\n\tconstructor: function(backend) {\n\t\tthis.backend = backend;\n\t},\n\tproxy: {\n\t\t\"mavo\": \"backend\"\n\t},\n\n\t// So that child classes can only override the static methods if they don't\n\t// need access to any instance variables.\n\tparse: function(content) {\n\t\treturn this.constructor.parse(content, this);\n\t},\n\tstringify: function(data) {\n\t\treturn this.constructor.stringify(data, this);\n\t},\n\n\tstatic: {\n\t\tparse: serialized => Promise.resolve(serialized),\n\t\tstringify: data => Promise.resolve(data),\n\t\textensions: [],\n\t\tdependencies: [],\n\t\tready: function() {\n\t\t\treturn Promise.all(this.dependencies.map(d => $.include(d.test, d.url)));\n\t\t}\n\t}\n});\n\nvar json = _.JSON = $.Class({\n\textends: _.Base,\n\tstatic: {\n\t\tparse: serialized => Promise.resolve(serialized? JSON.parse(serialized) : null),\n\t\tstringify: data => Promise.resolve(Mavo.toJSON(data)),\n\t\textensions: [\".json\", \".jsonld\"]\n\t}\n});\n\nvar text = _.Text = $.Class({\n\textends: _.Base,\n\tconstructor: function(backend) {\n\t\tthis.property = this.mavo.root.getNames(\"Primitive\")[0];\n\t},\n\n\tstatic: {\n\t\textensions: [\".txt\", \".md\", \".markdown\"],\n\t\tparse: (serialized, me) => Promise.resolve({[me? me.property : \"content\"]: serialized}),\n\t\tstringify: (data, me) => Promise.resolve(data[me? me.property : \"content\"])\n\t}\n});\n\nvar csv = _.CSV = $.Class({\n\textends: _.Base,\n\tconstructor: function(backend) {\n\t\tthis.property = this.mavo.root.getNames(\"Collection\")[0];\n\t\tthis.options = $.extend({}, _.CSV.defaultOptions);\n\t},\n\n\tstatic: {\n\t\textensions: [\".csv\", \".tsv\"],\n\t\tdefaultOptions: {\n\t\t\theader: true,\n\t\t\tdynamicTyping: true,\n\t\t\tskipEmptyLines: true\n\t\t},\n\t\tdependencies: [{\n\t\t\ttest: self.Papa,\n\t\t\turl: \"https://cdnjs.cloudflare.com/ajax/libs/PapaParse/4.1.4/papaparse.min.js\"\n\t\t}],\n\t\tready: base.ready,\n\t\tparse: (serialized, me) => csv.ready(() => {\n\t\t\tvar data = Papa.parse(serialized, csv.defaultOptions);\n\t\t\tvar property = me? me.property : \"content\";\n\n\t\t\tif (me) {\n\t\t\t\t// Get delimiter & linebreak for serialization\n\t\t\t\tme.options.delimiter = data.meta.delimiter;\n\t\t\t\tme.options.linebreak = data.meta.linebreak;\n\t\t\t}\n\n\t\t\tif (data.meta.aborted) {\n\t\t\t\tthrow data.meta.errors.pop();\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\t[property]: data.data\n\t\t\t};\n\t\t}),\n\t\t\n\t\tstringify: (serialized, me) => csv.ready(() => {\n\t\t\tvar property = me? me.property : \"content\";\n\t\t\tvar options = me? me.options : csv.defaultOptions;\n\t\t\treturn Papa.unparse(data[property], options);\n\t\t})\n\t}\n});\n\nObject.defineProperty(_, \"create\", {\n\tvalue: function(format, backend) {\n\t\tif (format && typeof format === \"object\") {\n\t\t\treturn format;\n\t\t}\n\n\t\tif (typeof format === \"string\") {\n\t\t\t// Search by id\n\t\t\tformat = format.toLowerCase();\n\n\t\t\tfor (var id in _) {\n\t\t\t\tvar Format = _[id];\n\n\t\t\t\tif (id.toLowerCase() == format) {\n\t\t\t\t\treturn new Format(backend);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (!format) {\n\t\t\tvar url = backend.url? backend.url.pathname : backend.raw;\n\t\t\tvar extension = (url.match(/\\.\\w+$/) || [])[0] || \".json\";\n\t\t\tvar Format = _.JSON;\n\n\t\t\tfor (var id in _) {\n\t\t\t\tif (_[id].extensions.indexOf(extension) > -1) {\n\t\t\t\t\t// Do not return match, as we may find another match later\n\t\t\t\t\t// and last match wins\n\t\t\t\t\tFormat = _[id];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn new Format(backend);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.Node = $.Class({\n\tabstract: true,\n\tconstructor: function (element, mavo, options = {}) {\n\t\tif (!element || !mavo) {\n\t\t\tthrow new Error(\"Mavo.Node constructor requires an element argument and a mavo object\");\n\t\t}\n\n\t\tvar env = {context: this, options};\n\n\t\t// Set these first, for debug reasons\n\t\tthis.uid = ++_.maxId;\n\t\tthis.nodeType = this.nodeType;\n\t\tthis.property = null;\n\n\t\t$.extend(this, env.options);\n\n\t\t_.all.set(element, [...(_.all.get(this.element) || []), this]);\n\n\t\tthis.element = element;\n\t\tthis.template = env.options.template;\n\n\t\tif (this.template) {\n\t\t\t// TODO remove if this is deleted\n\t\t\tthis.template.copies.push(this);\n\t\t}\n\t\telse {\n\t\t\tthis.copies = [];\n\t\t}\n\n\t\tthis.mavo = mavo;\n\t\tthis.group = this.parentGroup = env.options.group;\n\n\t\tif (!this.fromTemplate(\"property\", \"type\")) {\n\t\t\tthis.property = _.getProperty(element);\n\t\t\tthis.type = Mavo.Group.normalize(element);\n\t\t\tthis.store = this.element.getAttribute(\"mv-storage\"); // TODO rename to storage\n\t\t}\n\n\t\tthis.modes = this.element.getAttribute(\"mv-mode\");\n\n\t\tMavo.hooks.run(\"node-init-start\", env);\n\n\t\tthis.mode = Mavo.getStyle(this.element, \"--mv-mode\") || \"read\";\n\n\t\tthis.collection = env.options.collection;\n\n\t\tif (this.collection) {\n\t\t\t// This is a collection item\n\t\t\tthis.group = this.parentGroup = this.collection.parentGroup;\n\t\t}\n\n\t\tMavo.hooks.run(\"node-init-end\", env);\n\t},\n\n\tget editing() {\n\t\treturn this.mode == \"edit\";\n\t},\n\n\tget isRoot() {\n\t\treturn !this.property;\n\t},\n\n\tget name() {\n\t\treturn Mavo.Functions.readable(this.property || this.type).toLowerCase();\n\t},\n\n\tget saved() {\n\t\treturn this.store !== \"none\";\n\t},\n\n\tget path() {\n\t\tvar path = this.parentGroup? this.parentGroup.path : [];\n\n\t\treturn this.property? [...path, this.property] : path;\n\t},\n\n\t/**\n\t * Runs after the constructor is done (including the constructor of the inheriting class), synchronously\n\t */\n\tpostInit: function() {\n\t\tif (this.modes == \"edit\") {\n\t\t\tthis.edit();\n\t\t}\n\t},\n\n\tdestroy: function() {\n\n\t},\n\n\tgetData: function(o = {}) {\n\t\tif (this.isDataNull(o)) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// Check if any of the parent groups doesn't return data\n\t\t// this.walkUp(group => {\n\t\t// \tif (group.isDataNull(o)) {\n\t\t// \t\treturn null;\n\t\t// \t}\n\t\t// });\n\t},\n\n\tisDataNull: function(o) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tresult: this.deleted || !this.saved && (o.store != \"*\")\n\t\t};\n\n\t\tMavo.hooks.run(\"unit-isdatanull\", env);\n\n\t\treturn env.result;\n\t},\n\n\t/**\n\t * Execute a callback on every node of the Mavo tree\n\t * If callback returns (strict) false, walk stops.\n\t * @return false if was stopped via a false return value, true otherwise\n\t */\n\twalk: function(callback, path = []) {\n\t\tvar walker = (obj, path) => {\n\t\t\tvar ret = callback(obj, path);\n\n\t\t\tif (ret !== false) {\n\t\t\t\tfor (let i in obj.children) {\n\t\t\t\t\tlet node = obj.children[i];\n\n\t\t\t\t\tif (node instanceof Mavo.Node) {\n\t\t\t\t\t\tvar ret = walker.call(node, node, [...path, i]);\n\n\t\t\t\t\t\tif (ret === false) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn ret !== false;\n\t\t};\n\n\t\treturn walker(this, path);\n\t},\n\n\twalkUp: function(callback) {\n\t\tvar group = this;\n\n\t\twhile (group = group.parentGroup) {\n\t\t\tvar ret = callback(group);\n\n\t\t\tif (ret !== undefined) {\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\t},\n\n\tedit: function() {\n\t\tthis.mode = \"edit\";\n\n\t\tif (this.mode != \"edit\") {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.propagate(\"edit\");\n\n\t\tMavo.hooks.run(\"node-edit-end\", this);\n\t},\n\n\tdone: function() {\n\t\tthis.mode = Mavo.getStyle(this.element.parentNode, \"--mv-mode\") || \"read\";\n\n\t\tif (this.mode != \"read\") {\n\t\t\treturn false;\n\t\t}\n\n\t\t$.unbind(this.element, \".mavo:edit\");\n\n\t\tthis.propagate(\"done\");\n\n\t\tMavo.hooks.run(\"node-done-end\", this);\n\t},\n\n\tpropagate: function(callback) {\n\t\tfor (let i in this.children) {\n\t\t\tlet node = this.children[i];\n\n\t\t\tif (node instanceof Mavo.Node) {\n\t\t\t\tif (typeof callback === \"function\") {\n\t\t\t\t\tcallback.call(node, node);\n\t\t\t\t}\n\t\t\t\telse if (callback in node) {\n\t\t\t\t\tnode[callback]();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tpropagated: [\"save\", \"destroy\"],\n\n\ttoJSON: Mavo.prototype.toJSON,\n\n\tfromTemplate: function(...properties) {\n\t\tif (this.template) {\n\t\t\tfor (let property of properties) {\n\t\t\t\tthis[property] = this.template[property];\n\t\t\t}\n\t\t}\n\n\t\treturn !!this.template;\n\t},\n\n\trender: function(data) {\n\t\tthis.data = data;\n\n\t\tdata = Mavo.subset(data, this.inPath);\n\n\t\tvar env = {context: this, data};\n\n\t\tMavo.hooks.run(\"node-render-start\", env);\n\n\t\tif (this.nodeType != \"Collection\" && Array.isArray(data)) {\n\t\t\t// We are rendering an array on a singleton, what to do?\n\t\t\tvar properties;\n\t\t\tif (this.isRoot && (properties = Object.keys(this.children)).length === 1 && this.children[properties[0]].nodeType === \"Collection\") {\n\t\t\t\t// If it's root with only one collection property, render on that property\n\t\t\t\tenv.data = {\n\t\t\t\t\t[properties[0]]: env.data\n\t\t\t\t};\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Otherwise, render first item\n\t\t\t\tthis.inPath.push(\"0\");\n\t\t\t\tenv.data = env.data[0];\n\t\t\t}\n\t\t}\n\n\t\tif (this.editing) {\n\t\t\tthis.done();\n\t\t\tthis.dataRender(env.data);\n\t\t\tthis.edit();\n\t\t}\n\t\telse {\n\t\t\tthis.dataRender(env.data);\n\t\t}\n\n\t\tthis.save();\n\n\t\tMavo.hooks.run(\"node-render-end\", env);\n\t},\n\n\tdataChanged: function(action, o = {}) {\n\t\t$.fire(o.element || this.element, \"mavo:datachange\", $.extend({\n\t\t\tproperty: this.property,\n\t\t\taction,\n\t\t\tmavo: this.mavo,\n\t\t\tnode: this\n\t\t}, o));\n\t},\n\n\ttoString: function() {\n\t\treturn `#${this.uid}: ${this.nodeType} (${this.property})`;\n\t},\n\n\tgetClosestCollection: function() {\n\t\treturn this.collection ||\n\t\t\t   this.group.collection ||\n\t\t\t   (this.parentGroup? this.parentGroup.closestCollection : null);\n\t},\n\n\t/**\n\t * Check if this unit is either deleted or inside a deleted group\n\t */\n\tisDeleted: function() {\n\t\tvar ret = this.deleted;\n\n\t\tif (this.deleted) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !!this.parentGroup && this.parentGroup.isDeleted();\n\t},\n\n\tlazy: {\n\t\tclosestCollection: function() {\n\t\t\treturn this.getClosestCollection();\n\t\t},\n\n\t\t// Are were only rendering and editing a subset of the data?\n\t\tinPath: function() {\n\t\t\tif (this.nodeType != \"Collection\") {\n\t\t\t\treturn (this.element.getAttribute(\"mv-path\") || \"\").split(\"/\").filter(p => p.length);\n\t\t\t}\n\n\t\t\treturn [];\n\t\t}\n\t},\n\n\tlive: {\n\t\tstore: function(value) {\n\t\t\t$.toggleAttribute(this.element, \"mv-storage\", value);\n\t\t},\n\n\t\tunsavedChanges: function(value) {\n\t\t\tif (value && (!this.saved || !this.editing)) {\n\t\t\t\tvalue = false;\n\t\t\t}\n\n\t\t\tthis.element.classList.toggle(\"mv-unsaved-changes\", value);\n\n\t\t\treturn value;\n\t\t},\n\n\t\tmode: function (value) {\n\t\t\tif (this._mode != value) {\n\t\t\t\t// Is it allowed?\n\t\t\t\tif (this.modes && value != this.modes) {\n\t\t\t\t\tvalue = this.modes;\n\t\t\t\t}\n\n\t\t\t\t// If we don't do this, setting the attribute below will\n\t\t\t\t// result in infinite recursion\n\t\t\t\tthis._mode = value;\n\n\t\t\t\tif (!(this instanceof Mavo.Collection) && [null, \"\", \"read\", \"edit\"].indexOf(this.element.getAttribute(\"mv-mode\")) > -1) {\n\t\t\t\t\t// If attribute is not one of the recognized values, leave it alone\n\t\t\t\t\tvar set = this.modes || value == \"edit\";\n\t\t\t\t\tMavo.Observer.sneak(this.mavo.modeObserver, () => {\n\t\t\t\t\t\t$.toggleAttribute(this.element, \"mv-mode\", value, set);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t},\n\n\t\tmodes: function(value) {\n\t\t\tif (value && value != \"read\" && value != \"edit\") {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tthis._modes = value;\n\n\t\t\tif (value && this.mode != value) {\n\t\t\t\tthis.mode = value;\n\t\t\t}\n\t\t},\n\n\t\tdeleted: function(value) {\n\t\t\tthis.element.classList.toggle(\"mv-deleted\", value);\n\n\t\t\tif (value) {\n\t\t\t\t// Soft delete, store element contents in a fragment\n\t\t\t\t// and replace them with an undo prompt.\n\t\t\t\tthis.elementContents = document.createDocumentFragment();\n\t\t\t\t$$(this.element.childNodes).forEach(node => {\n\t\t\t\t\tthis.elementContents.appendChild(node);\n\t\t\t\t});\n\n\t\t\t\t$.contents(this.element, [\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\tclassName: \"mv-close mv-ui\",\n\t\t\t\t\t\ttextContent: \"\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": function(evt) {\n\t\t\t\t\t\t\t\t$.remove(this.parentNode);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t\"Deleted \" + this.name,\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\tclassName: \"mv-undo mv-ui\",\n\t\t\t\t\t\ttextContent: \"Undo\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": evt => this.deleted = false\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]);\n\n\t\t\t\tthis.element.classList.remove(\"mv-highlight\");\n\t\t\t}\n\t\t\telse if (this.deleted) {\n\t\t\t\t// Undelete\n\t\t\t\tthis.element.textContent = \"\";\n\t\t\t\tthis.element.appendChild(this.elementContents);\n\n\t\t\t\t// otherwise expressions won't update because this will still seem as deleted\n\t\t\t\t// Alternatively, we could fire datachange with a timeout.\n\t\t\t\tthis._deleted = false;\n\n\t\t\t\tthis.dataChanged(\"undelete\");\n\t\t\t}\n\t\t}\n\t},\n\n\tstatic: {\n\t\tmaxId: 0,\n\n\t\tall: new WeakMap(),\n\n\t\tcreate: function(element, mavo, o = {}) {\n\t\t\tif (Mavo.is(\"multiple\", element) && !o.collection) {\n\t\t\t\treturn new Mavo.Collection(element, mavo, o);\n\t\t\t}\n\n\t\t\treturn new Mavo[Mavo.is(\"group\", element)? \"Group\" : \"Primitive\"](element, mavo, o);\n\t\t},\n\n\t\t/**\n\t\t * Get & normalize property name, if exists\n\t\t */\n\t\tgetProperty: function(element) {\n\t\t\tvar property = element.getAttribute(\"property\") || element.getAttribute(\"itemprop\");\n\n\t\t\tif (!property && element.hasAttribute(\"property\")) {\n\t\t\t\tproperty = element.name || element.id || element.classList[0];\n\t\t\t}\n\n\t\t\tif (property) {\n\t\t\t\telement.setAttribute(\"property\", property);\n\t\t\t}\n\n\t\t\treturn property;\n\t\t},\n\n\t\tget: function(element, prioritizePrimitive) {\n\t\t\tvar nodes = (_.all.get(element) || []).filter(node => !(node instanceof Mavo.Collection));\n\n\t\t\tif (nodes.length < 2 || !prioritizePrimitive) {\n\t\t\t\treturn nodes[0];\n\t\t\t}\n\n\t\t\tif (nodes[0] instanceof Mavo.Group) {\n\t\t\t\treturn node[1];\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Get all properties that are inside an element but not nested into other properties\n\t\t */\n\t\tchildren: function(element) {\n\t\t\tvar ret = Mavo.Node.get(element);\n\n\t\t\tif (ret) {\n\t\t\t\t// element is a Mavo node\n\t\t\t\treturn [ret];\n\t\t\t}\n\n\t\t\tret = $$(Mavo.selectors.property, element)\n\t\t\t\t.map(e => Mavo.Node.get(e))\n\t\t\t\t.filter(e => !element.contains(e.parentGroup.element)) // drop nested properties\n\t\t\t\t.map(e => e.collection || e);\n\n\t\t\treturn Mavo.Functions.unique(ret);\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.Group = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Group\",\n\tconstructor: function (element, mavo, o) {\n\t\tthis.children = {};\n\n\t\tthis.group = this;\n\n\t\tMavo.hooks.run(\"group-init-start\", this);\n\n\t\t// Should this element also create a primitive?\n\t\tif (Mavo.Primitive.getValueAttribute(this.element)) {\n\t\t\tvar obj = this.children[this.property] = new Mavo.Primitive(this.element, this.mavo, {group: this});\n\t\t}\n\n\t\t// Create Mavo objects for all properties in this group (primitives orgroups),\n\t\t// but not properties in descendantgroups (they will be handled by their group)\n\t\t$$(Mavo.selectors.property, this.element).forEach(element => {\n\t\t\tvar property = Mavo.Node.getProperty(element);\n\n\t\t\tif (this.contains(element)) {\n\t\t\t\tvar existing = this.children[property];\n\t\t\t\tvar template = this.template? this.template.children[property] : null;\n\t\t\t\tvar constructorOptions = {template, group: this};\n\n\t\t\t\tif (existing) {\n\t\t\t\t\t// Twogroups with the same property, convert to static collection\n\t\t\t\t\tvar collection = existing;\n\n\t\t\t\t\tif (!(existing instanceof Mavo.Collection)) {\n\t\t\t\t\t\tcollection = new Mavo.Collection(existing.element, this.mavo, constructorOptions);\n\t\t\t\t\t\tthis.children[property] = existing.collection = collection;\n\t\t\t\t\t\tcollection.add(existing);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!collection.mutable && Mavo.is(\"multiple\", element)) {\n\t\t\t\t\t\tcollection.mutable = true;\n\t\t\t\t\t}\n\n\t\t\t\t\tcollection.add(element);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// No existing properties with this id, normal case\n\t\t\t\t\tvar obj = Mavo.Node.create(element, this.mavo, constructorOptions);\n\n\t\t\t\t\tthis.children[property] = obj;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tvar vocabElement = (this.isRoot? this.element.closest(\"[vocab]\") : null) || this.element;\n\t\tthis.vocab = vocabElement.getAttribute(\"vocab\");\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"group-init-end\", this);\n\t},\n\n\tget isRoot() {\n\t\treturn !this.property;\n\t},\n\n\tgetNames: function(type = \"Node\") {\n\t\treturn Object.keys(this.children).filter(p => this.children[p] instanceof Mavo[type]);\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: this.super.getData.call(this, o)\n\t\t};\n\n\t\tif (env.data !== undefined) {\n\t\t\treturn env.data;\n\t\t}\n\n\t\tenv.data = {};\n\n\t\tthis.propagate(obj => {\n\t\t\tif ((obj.saved || o.store == \"*\") && !(obj.property in env.data)) {\n\t\t\t\tvar data = obj.getData(o);\n\n\t\t\t\tif (data !== null || env.options.null) {\n\t\t\t\t\tenv.data[obj.property] = data;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$.extend(env.data, this.unhandled);\n\n\t\t// JSON-LD stuff\n\t\tif (this.type && this.type != _.DEFAULT_TYPE) {\n\t\t\tenv.data[\"@type\"] = this.type;\n\t\t}\n\n\t\tif (this.vocab) {\n\t\t\tenv.data[\"@context\"] = this.vocab;\n\t\t}\n\n\t\t// Special summary property works like toString\n\t\tif (env.data.summary) {\n\t\t\tenv.data.toString = function() {\n\t\t\t\treturn this.summary;\n\t\t\t};\n\t\t}\n\n\t\tif (o.store != \"*\" && this.inPath.length) { // we don't want this in expressions\n\t\t\tenv.data = Mavo.subset(this.data, this.inPath, env.data);\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn env.data;\n\t},\n\n\t/**\n\t * Search entire subtree for property, return relative value\n\t * @return {Mavo.Node}\n\t */\n\tfind: function(property, o = {}) {\n\t\tif (this.property == property) {\n\t\t\treturn this;\n\t\t}\n\n\t\tif (property in this.children) {\n\t\t\treturn this.children[property].find(property, o);\n\t\t}\n\n\t\tvar all = [];\n\n\t\tfor (var prop in this.children) {\n\t\t\tvar ret = this.children[prop].find(property, o);\n\n\t\t\tif (ret !== undefined) {\n\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\tall.push(...ret);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (all.length) {\n\t\t\treturn all;\n\t\t}\n\t},\n\n\tsave: function() {\n\t\tthis.unsavedChanges = false;\n\t},\n\n\tpropagated: [\"save\", \"import\", \"clear\"],\n\n\t// Do not call directly, call this.render() instead\n\tdataRender: function(data) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\t// TODO what if it was a primitive and now it's a group?\n\t\t// In that case, render the this.children[this.property] with it\n\n\t\tvar oldUnhandled = this.unhandled;\n\t\tthis.unhandled = $.extend({}, data, property => !(property in this.children));\n\n\t\tthis.propagate(obj => {\n\t\t\tobj.render(data[obj.property]);\n\t\t});\n\n\t\tfor (let property in this.unhandled) {\n\t\t\tlet value = this.unhandled[property];\n\n\t\t\tif (typeof value != \"object\" && (!oldUnhandled || oldUnhandled[property] != value)) {\n\t\t\t\tthis.dataChanged(\"propertychange\", {property});\n\t\t\t}\n\t\t}\n\t},\n\n\t// Check if this group contains a property\n\tcontains: function(property) {\n\t\tif (property instanceof Mavo.Node) {\n\t\t\treturn property.parentGroup === this;\n\t\t}\n\n\t\treturn property.parentNode && (this.element === property.parentNode.closest(Mavo.selectors.group));\n\t},\n\n\tstatic: {\n\t\tall: new WeakMap(),\n\n\t\tDEFAULT_TYPE: \"Item\",\n\n\t\tnormalize: function(element) {\n\t\t\t// Get & normalize typeof name, if exists\n\t\t\tif (Mavo.is(\"group\", element)) {\n\t\t\t\tvar type = Mavo.getAttribute(element, \"typeof\", \"itemtype\") || _.DEFAULT_TYPE;\n\n\t\t\t\telement.setAttribute(\"typeof\", type);\n\n\t\t\t\treturn type;\n\t\t\t}\n\n\t\t\treturn null;\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nvar _ = Mavo.Primitive = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Primitive\",\n\tconstructor: function (element, mavo, o) {\n\t\tif (!this.fromTemplate(\"config\", \"attribute\", \"templateValue\")) {\n\t\t\tthis.config = _.getConfig(element);\n\n\t\t\t// Which attribute holds the data, if any?\n\t\t\t// \"null\" or null for none (i.e. data is in content).\n\t\t\tthis.attribute = this.config.attribute;\n\t\t}\n\n\t\tthis.datatype = this.config.datatype;\n\n\t\tif (\"modes\" in this.config) {\n\t\t\t// If modes are related to element type, this overrides everything\n\t\t\t// because it means the other mode makes no sense for that element\n\t\t\tthis.modes = this.config.modes;\n\t\t\tthis.element.setAttribute(\"mv-mode\", this.config.modes);\n\t\t}\n\n\t\tMavo.hooks.run(\"primitive-init-start\", this);\n\n\t\tif (this.config.init) {\n\t\t\tthis.config.init.call(this, this.element);\n\t\t}\n\n\t\tif (this.config.changeEvents) {\n\t\t\t$.events(this.element, this.config.changeEvents, evt => {\n\t\t\t\tif (evt.target === this.element) {\n\t\t\t\t\tthis.value = this.getValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * Set up input widget\n\t\t */\n\n\t\t// Nested widgets\n\t\tif (!this.editor && !this.attribute) {\n\t\t\tthis.editor = $$(this.element.children).filter(function (el) {\n\t\t\t    return el.matches(Mavo.selectors.formControl) && !el.matches(Mavo.selectors.property);\n\t\t\t})[0];\n\n\t\t\tif (this.editor) {\n\t\t\t\tthis.element.textContent = this.editorValue;\n\t\t\t\t$.remove(this.editor);\n\t\t\t}\n\t\t}\n\n\t\t// Linked widgets\n\t\tif (!this.editor && this.element.hasAttribute(\"mv-edit\")) {\n\t\t\tvar original = $(this.element.getAttribute(\"mv-edit\"));\n\n\t\t\tif (original && Mavo.is(\"formControl\", original)) {\n\t\t\t\tthis.editor = original.cloneNode(true);\n\n\t\t\t\t// Update editor if original mutates\n\t\t\t\tif (!this.template) {\n\t\t\t\t\tnew Mavo.Observer(original, \"all\", records => {\n\t\t\t\t\t\tfor (let primitive of this.copies) {\n\t\t\t\t\t\t\tprimitive.editor = original.cloneNode(true);\n\t\t\t\t\t\t\tprimitive.setValue(primitive.value, {force: true, silent: true});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.templateValue = this.getValue();\n\n\t\tthis._default = this.element.getAttribute(\"mv-default\");\n\n\t\tif (this.default === null) { // no mv-default\n\t\t\tthis._default = this.modes === \"read\"? this.templateValue : (this.editor? this.editorValue : undefined);\n\t\t}\n\t\telse if (this.default === \"\") { // mv-default exists, no value, default is template value\n\t\t\tthis._default = this.templateValue;\n\t\t}\n\t\telse { // mv-default with value\n\t\t\tthis.defaultObserver = new Mavo.Observer(this.element, \"mv-default\", record => {\n\t\t\t\tthis.default = this.element.getAttribute(\"mv-default\");\n\t\t\t});\n\t\t}\n\n\t\tthis.initialValue = (!this.template && this.default === undefined? this.templateValue : this.default) || this.emptyValue;\n\n\t\tthis.setValue(this.initialValue, {silent: true});\n\n\t\t// Observe future mutations to this property, if possible\n\t\t// Properties like input.checked or input.value cannot be observed that way\n\t\t// so we cannot depend on mutation observers for everything :(\n\t\tthis.observer = new Mavo.Observer(this.element, this.attribute, records => {\n\t\t\tif (this.attribute || !this.editing) {\n\t\t\t\tthis.value = this.getValue();\n\t\t\t}\n\t\t});\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"primitive-init-end\", this);\n\t},\n\n\tget editorValue() {\n\t\tif (this.config.getEditorValue) {\n\t\t\treturn this.config.getEditorValue.call(this);\n\t\t}\n\n\t\tif (this.editor) {\n\t\t\tif (this.editor.matches(Mavo.selectors.formControl)) {\n\t\t\t\treturn _.getValue(this.editor, {datatype: this.datatype});\n\t\t\t}\n\n\t\t\t// if we're here, this.editor is an entire HTML structure\n\t\t\tvar output = $(Mavo.selectors.output + \", \" + Mavo.selectors.formControl, this.editor);\n\n\t\t\tif (output) {\n\t\t\t\treturn _.getValue(output);\n\t\t\t}\n\t\t}\n\t},\n\n\tset editorValue(value) {\n\t\tif (this.config.setEditorValue) {\n\t\t\treturn this.config.setEditorValue.call(this, value);\n\t\t}\n\n\t\tif (this.editor) {\n\t\t\tif (this.editor.matches(Mavo.selectors.formControl)) {\n\t\t\t\t_.setValue(this.editor, value, {config: this.editorDefaults});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// if we're here, this.editor is an entire HTML structure\n\t\t\t\tvar output = $(Mavo.selectors.output + \", \" + Mavo.selectors.formControl, this.editor);\n\n\t\t\t\tif (output) {\n\t\t\t\t\t_.setValue(output, value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tdestroy: function() {\n\t\tthis.super.destroy.call(this);\n\n\t\tthis.defaultObserver && this.defaultObserver.destroy();\n\t\tthis.observer && this.observer.destroy();\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: this.super.getData.call(this, o)\n\t\t};\n\n\t\tif (env.data !== undefined) {\n\t\t\treturn env.data;\n\t\t}\n\n\t\tenv.data = this.value;\n\n\t\tif (env.data === \"\") {\n\t\t\tenv.data = null;\n\t\t}\n\n\t\tif (o.store != \"*\" && this.inPath.length) { // we don't want this in expressions\n\t\t\tenv.data = Mavo.subset(this.data, this.inPath, env.data);\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn env.data;\n\t},\n\n\tsneak: function(callback) {\n\t\treturn Mavo.Observer.sneak(this.observer, callback);\n\t},\n\n\tsave: function() {\n\t\tthis.savedValue = this.value;\n\t\tthis.unsavedChanges = false;\n\t},\n\n\t// Called only the first time this primitive is edited\n\tinitEdit: function () {\n\t\tif (!this.editor) {\n\t\t\t// No editor provided, use default for element type\n\t\t\t// Find default editor for datatype\n\t\t\tvar editor = this.config.editor || Mavo.Elements.defaultEditors[this.datatype] || Mavo.Elements.defaultEditors.string;\n\n\t\t\tthis.editor = $.create($.type(editor) === \"function\"? editor.call(this) : editor);\n\t\t\tthis.editorValue = this.value;\n\t\t}\n\n\t\t$.events(this.editor, {\n\t\t\t\"input change\": evt => {\n\t\t\t\tthis.value = this.editorValue;\n\t\t\t},\n\t\t\t\"focus\": evt => {\n\t\t\t\tthis.editor.select && this.editor.select();\n\t\t\t},\n\t\t\t\"mavo:datachange\": evt => {\n\t\t\t\tif (evt.property === \"output\") {\n\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t$.fire(this.editor, \"input\");\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (\"placeholder\" in this.editor) {\n\t\t\tthis.editor.placeholder = \"(\" + this.label + \")\";\n\t\t}\n\n\t\t// Copy any data-input-* attributes from the element to the editor\n\t\tvar dataInput = /^mv-edit-/i;\n\t\t$$(this.element.attributes).forEach(function (attribute) {\n\t\t\tif (dataInput.test(attribute.name)) {\n\t\t\t\tthis.editor.setAttribute(attribute.name.replace(dataInput, \"\"), attribute.value);\n\t\t\t}\n\t\t}, this);\n\n\t\tif (this.attribute || this.config.popup) {\n\t\t\tthis.popup = new _.Popup(this);\n\t\t}\n\n\t\tif (!this.popup) {\n\t\t\tthis.editor.classList.add(\"mv-editor\");\n\t\t}\n\n\t\tthis.initEdit = null;\n\t},\n\n\tedit: function () {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Make element focusable, so it can actually receive focus\n\t\tthis.element._.data.prevTabindex = this.element.getAttribute(\"tabindex\");\n\t\tthis.element.tabIndex = 0;\n\n\t\t// Prevent default actions while editing\n\t\t// e.g. following links etc\n\t\tthis.element.addEventListener(\"click.mavo:edit\", evt => evt.preventDefault());\n\n\t\tthis.preEdit = Mavo.defer((resolve, reject) => {\n\t\t\t// Empty properties should become editable immediately\n\t\t\t// otherwise they could be invisible!\n\t\t\tif (this.empty && !this.attribute) {\n\t\t\t\treturn resolve();\n\t\t\t}\n\n\t\t\tvar timer;\n\n\t\t\t$.events(this.element, {\n\t\t\t\t\"click.mavo:preedit\": resolve,\n\t\t\t\t\"focus.mavo:preedit\": resolve\n\t\t\t});\n\n\t\t\tif (!this.attribute) {\n\t\t\t\t// Hovering over the element for over 150ms will trigger edit\n\t\t\t\t$.events(this.element, {\n\t\t\t\t\t\"mouseenter.mavo:preedit\": e => {\n\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t\ttimer = setTimeout(resolve, 150);\n\t\t\t\t\t},\n\t\t\t\t\t\"mouseleave.mavo:preedit\": e => {\n\t\t\t\t\t\tclearTimeout(timer);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\tif (this.config.edit) {\n\t\t\tthis.config.edit.call(this);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.preEdit.then(() => {\n\t\t\t// Actual edit\n\t\t\t$.unbind(this.element, \".mavo:preedit\");\n\n\t\t\tif (this.initEdit) {\n\t\t\t\tthis.initEdit();\n\t\t\t}\n\n\t\t\tif (this.popup) {\n\t\t\t\tthis.popup.show();\n\t\t\t}\n\n\t\t\tif (!this.attribute && !this.popup) {\n\t\t\t\tif (this.editor.parentNode != this.element) {\n\t\t\t\t\tthis.editorValue = this.value;\n\t\t\t\t\tthis.element.textContent = \"\";\n\n\t\t\t\t\tthis.element.appendChild(this.editor);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}, // edit\n\n\tdone: function () {\n\t\tif (this.super.done.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\"preEdit\" in this) {\n\t\t\t$.unbind(this.element, \".mavo:preedit .mavo:edit\");\n\t\t}\n\n\t\tthis.sneak(() => {\n\t\t\tif (this.config.done) {\n\t\t\t\tthis.config.done.call(this);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.popup) {\n\t\t\t\tthis.popup.close();\n\t\t\t}\n\t\t\telse if (!this.attribute && this.editor) {\n\t\t\t\t$.remove(this.editor);\n\t\t\t\tthis.element.textContent = this.editorValue;\n\t\t\t}\n\t\t});\n\n\t\t// Revert tabIndex\n\t\tif (this.element._.data.prevTabindex !== null) {\n\t\t\tthis.element.tabIndex = this.element._.data.prevTabindex;\n\t\t}\n\t\telse {\n\t\t\tthis.element.removeAttribute(\"tabindex\");\n\t\t}\n\t},\n\n\tclear: function() {\n\t\tif (this.modes != \"read\") {\n\t\t\tthis.value = this.emptyValue;\n\t\t}\n\t},\n\n\tdataRender: function(data) {\n\t\tif (data && typeof data === \"object\") {\n\t\t\tif (Symbol.toPrimitive in data) {\n\t\t\t\tdata = data[Symbol.toPrimitive]();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Candidate properties to get a value from\n\t\t\t\tfor (let property of [this.property, \"value\", ...Object.keys(data)]) {\n\t\t\t\t\tif (property in data) {\n\t\t\t\t\t\tdata = data[property];\n\t\t\t\t\t\tthis.inPath.push(property);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (data === undefined) {\n\t\t\t// New property has been added to the schema and nobody has saved since\n\t\t\tthis.value = this.closestCollection? this.default : this.templateValue;\n\t\t}\n\t\telse {\n\t\t\tthis.value = data;\n\t\t}\n\t},\n\n\tfind: function(property) {\n\t\tif (this.property == property) {\n\t\t\treturn this;\n\t\t}\n\t},\n\n\t/**\n\t * Get value from the DOM\n\t */\n\tgetValue: function(o) {\n\t\treturn _.getValue(this.element, {\n\t\t\tconfig: this.config,\n\t\t\tattribute: this.attribute,\n\t\t\tdatatype: this.datatype\n\t\t});\n\t},\n\n\tlazy: {\n\t\tlabel: function() {\n\t\t\treturn Mavo.Functions.readable(this.property);\n\t\t},\n\n\t\temptyValue: function() {\n\t\t\tswitch (this.datatype) {\n\t\t\t\tcase \"boolean\":\n\t\t\t\t\treturn false;\n\t\t\t\tcase \"number\":\n\t\t\t\t\treturn 0;\n\t\t\t}\n\n\t\t\treturn \"\";\n\t\t},\n\n\t\teditorDefaults: function() {\n\t\t\treturn this.editor && _.getConfig(this.editor);\n\t\t}\n\t},\n\n\tsetValue: function (value, o = {}) {\n\t\tthis.sneak(() => {\n\t\t\tif ($.type(value) == \"object\" && \"value\" in value) {\n\t\t\t\tvar presentational = value.presentational;\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\n\t\t\t// Convert nulls and undefineds to empty string\n\t\t\tvalue = value || value === 0? value : \"\";\n\n\t\t\t// If there's no datatype, adopt that of the value\n\t\t\tif (!this.datatype && (typeof value == \"number\" || typeof value == \"boolean\")) {\n\t\t\t\tthis.datatype = typeof value;\n\t\t\t}\n\n\t\t\tvalue = _.safeCast(value, this.datatype);\n\n\t\t\tif (value == this._value && !o.force) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (this.editor && document.activeElement != this.editor) {\n\t\t\t\tthis.editorValue = value;\n\t\t\t}\n\n\t\t\tif (this.config.humanReadable && this.attribute) {\n\t\t\t\tpresentational = this.config.humanReadable.call(this, value);\n\t\t\t}\n\n\t\t\tif (!this.editing || this.popup || !this.editor) {\n\t\t\t\tif (this.config.setValue) {\n\t\t\t\t\tthis.config.setValue.call(this, this.element, value);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tif (this.editor && this.editor.matches(\"select\") && this.editor.selectedOptions[0]) {\n\t\t\t\t\t\tpresentational = this.editor.selectedOptions[0].textContent;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!o.dataOnly) {\n\t\t\t\t\t\t_.setValue(this.element, {value, presentational}, {\n\t\t\t\t\t\t\tconfig: this.config,\n\t\t\t\t\t\t\tattribute: this.attribute,\n\t\t\t\t\t\t\tdatatype: this.datatype\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.empty = value === \"\";\n\n\t\t\tthis._value = value;\n\n\t\t\tif (!o.silent) {\n\t\t\t\tif (this.saved) {\n\t\t\t\t\tthis.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t\t\t}\n\n\t\t\t\tthis.dataChanged(\"propertychange\", {value});\n\t\t\t}\n\t\t});\n\n\t\treturn value;\n\t},\n\n\tdataChanged: function(action = \"propertychange\", o) {\n\t\treturn this.super.dataChanged.call(this, action, o);\n\t},\n\n\tlive: {\n\t\tdefault: function (value) {\n\t\t\tif (this.value == this._default) {\n\n\t\t\t\tthis.value = value;\n\t\t\t}\n\t\t},\n\n\t\tvalue: function (value) {\n\t\t\treturn this.setValue(value);\n\t\t},\n\n\t\tempty: function (value) {\n\t\t\tvar hide = value && // is empty\n\t\t\t           !this.modes && // and supports both modes\n\t\t\t\t\t   this.config.default && // and using the default settings\n\t\t\t           !(this.attribute && $(Mavo.selectors.property, this.element)); // and has no property inside\n\n\t\t\tthis.element.classList.toggle(\"mv-empty\", !!hide);\n\t\t}\n\t},\n\n\tstatic: {\n\t\tall: new WeakMap(),\n\n\t\tgetValueAttribute: function (element, config = Mavo.Elements.search(element)) {\n\t\t\tvar ret = element.getAttribute(\"mv-attribute\") || config.attribute;\n\n\t\t\tif (!ret || ret === \"null\") {\n\t\t\t\tret = null;\n\t\t\t}\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t/**\n\t\t * Only cast if conversion is lossless\n\t\t */\n\t\tsafeCast: function(value, datatype) {\n\t\t\tvar existingType = typeof value;\n\t\t\tvar cast = _.cast(value, datatype);\n\n\t\t\tif (value === null || value === undefined) {\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (datatype == \"boolean\") {\n\t\t\t\tif (value === \"false\" || value === 0 || value === \"\") {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (value === \"true\" || value > 0) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\tif (datatype == \"number\") {\n\t\t\t\tif (/^[-+]?[0-9.e]+$/i.test(value + \"\")) {\n\t\t\t\t\treturn cast;\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\n\t\t\treturn cast;\n\t\t},\n\n\t\t/**\n\t\t * Cast to a different primitive datatype\n\t\t */\n\t\tcast: function(value, datatype) {\n\t\t\tswitch (datatype) {\n\t\t\t\tcase \"number\": return +value;\n\t\t\t\tcase \"boolean\": return !!value;\n\t\t\t\tcase \"string\": return value + \"\";\n\t\t\t}\n\n\t\t\treturn value;\n\t\t},\n\n\t\tgetValue: function (element, { config, attribute, datatype }) {\n\t\t\tif (!config) {\n\t\t\t\tconfig = _.getConfig(element, attribute);\n\t\t\t}\n\n\t\t\tattribute = config.attribute;\n\t\t\tdatatype = config.datatype;\n\n\t\t\tif (config.getValue && attribute == config.attribute) {\n\t\t\t\treturn config.getValue(element);\n\t\t\t}\n\n\t\t\tvar ret;\n\n\t\t\tif (attribute in element && _.useProperty(element, attribute)) {\n\t\t\t\t// Returning properties (if they exist) instead of attributes\n\t\t\t\t// is needed for dynamic elements such as checkboxes, sliders etc\n\t\t\t\tret = element[attribute];\n\t\t\t}\n\t\t\telse if (attribute) {\n\t\t\t\tret = element.getAttribute(attribute);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tret = element.getAttribute(\"content\") || element.textContent || null;\n\t\t\t}\n\n\t\t\treturn _.safeCast(ret, datatype);\n\t\t},\n\n\t\tgetConfig: function(element, attribute) {\n\t\t\tif (attribute === undefined) {\n\t\t\t\tattribute = element.getAttribute(\"mv-attribute\") || undefined;\n\t\t\t}\n\n\t\t\tif (attribute == \"null\" || attribute == \"none\") {\n\t\t\t\tattribute = null;\n\t\t\t}\n\n\t\t\tvar config = Mavo.Elements.search(element, attribute);\n\n\t\t\tif (config.attribute === undefined) {\n\t\t\t\tconfig.attribute = attribute || null;\n\t\t\t}\n\n\t\t\treturn config;\n\t\t},\n\n\t\tsetValue: function (element, value, {config, attribute, datatype}) {\n\t\t\tif ($.type(value) == \"object\" && \"value\" in value) {\n\t\t\t\tvar presentational = value.presentational;\n\t\t\t\tvalue = value.value;\n\t\t\t}\n\n\t\t\tif (element.nodeType === 1) {\n\t\t\t\tif (!config) {\n\t\t\t\t\tconfig = _.getConfig(element, attribute);\n\t\t\t\t}\n\n\t\t\t\tattribute = config.attribute;\n\n\t\t\t\tdatatype = datatype !== undefined? datatype : config.datatype;\n\n\t\t\t\tif (config.setValue && attribute == config.attribute) {\n\t\t\t\t\treturn config.setValue(element, value);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (attribute) {\n\t\t\t\tif (attribute in element && _.useProperty(element, attribute) && element[attribute] !== value) {\n\t\t\t\t\t// Setting properties (if they exist) instead of attributes\n\t\t\t\t\t// is needed for dynamic elements such as checkboxes, sliders etc\n\t\t\t\t\ttry {\n\t\t\t\t\t\telement[attribute] = value;\n\t\t\t\t\t}\n\t\t\t\t\tcatch (e) {}\n\t\t\t\t}\n\n\t\t\t\t// Set attribute anyway, even if we set a property because when\n\t\t\t\t// they're not in sync it gets really fucking confusing.\n\t\t\t\tif (datatype == \"boolean\") {\n\t\t\t\t\tif (value != element.hasAttribute(attribute)) {\n\t\t\t\t\t\t$.toggleAttribute(element, attribute, value, value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse if (element.getAttribute(attribute) != value) {  // intentionally non-strict, e.g. \"3.\" !== 3\n\t\t\t\t\telement.setAttribute(attribute, value);\n\n\t\t\t\t\tif (presentational) {\n\t\t\t\t\t\telement.textContent = presentational;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tif (datatype === \"number\" && !presentational) {\n\t\t\t\t\tpresentational = _.formatNumber(value);\n\t\t\t\t}\n\n\t\t\t\telement.textContent = presentational || value;\n\n\t\t\t\tif (presentational && element.setAttribute) {\n\t\t\t\t\telement.setAttribute(\"content\", value);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t *  Set/get a property or an attribute?\n\t\t * @return {Boolean} true to use a property, false to use the attribute\n\t\t */\n\t\tuseProperty: function(element, attribute) {\n\t\t\tif ([\"href\", \"src\"].indexOf(attribute) > -1) {\n\t\t\t\t// URL properties resolve \"\" as location.href, fucking up emptiness checks\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (element.namespaceURI == \"http://www.w3.org/2000/svg\") {\n\t\t\t\t// SVG has a fucked up DOM, do not use these properties\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\n\t\tlazy: {\n\t\t\tformatNumber: () => {\n\t\t\t\tvar numberFormat = new Intl.NumberFormat(\"en-US\", {maximumFractionDigits:2});\n\n\t\t\t\treturn function(value) {\n\t\t\t\t\tif (value === Infinity || value === -Infinity) {\n\t\t\t\t\t\t// Pretty print infinity\n\t\t\t\t\t\treturn value < 0? \"-\" : \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn numberFormat.format(value);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n});\n\n_.Popup = $.Class({\n\tconstructor: function(primitive) {\n\t\tthis.primitive = primitive;\n\n\t\tthis.popup = $.create(\"div\", {\n\t\t\tclassName: \"mv-popup\",\n\t\t\thidden: true,\n\t\t\tcontents: [\n\t\t\t\tthis.primitive.label + \":\",\n\t\t\t\tthis.editor\n\t\t\t],\n\t\t\tevents: {\n\t\t\t\tkeyup: evt => {\n\t\t\t\t\tif (evt.keyCode == 13 || evt.keyCode == 27) {\n\t\t\t\t\t\tif (this.popup.contains(document.activeElement)) {\n\t\t\t\t\t\t\tthis.element.focus();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t// No point in having a dropdown in a popup\n\t\tif (this.editor.matches(\"select\")) {\n\t\t\tthis.editor.size = Math.min(10, this.editor.children.length);\n\t\t}\n\t},\n\n\tshow: function() {\n\t\t$.unbind([this.element, this.popup], \".mavo:showpopup\");\n\n\t\tthis.shown = true;\n\n\t\tthis.hideCallback = evt => {\n\t\t\tif (!this.popup.contains(evt.target) && !this.element.contains(evt.target)) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t};\n\n\t\tthis.position = evt => {\n\t\t\tvar bounds = this.element.getBoundingClientRect();\n\t\t\tvar x = bounds.left;\n\t\t\tvar y = bounds.bottom;\n\n\t\t\t // TODO what if it doesnt fit?\n\t\t\t$.style(this.popup, { top:  `${y}px`, left: `${x}px` });\n\t\t};\n\n\t\tthis.position();\n\n\t\tdocument.body.appendChild(this.popup);\n\n\t\trequestAnimationFrame(e => this.popup.removeAttribute(\"hidden\")); // trigger transition\n\n\t\t$.events(document, \"focus click\", this.hideCallback, true);\n\t\twindow.addEventListener(\"scroll\", this.position);\n\t},\n\n\thide: function() {\n\t\t$.unbind(document, \"focus click\", this.hideCallback, true);\n\t\twindow.removeEventListener(\"scroll\", this.position);\n\t\tthis.popup.setAttribute(\"hidden\", \"\"); // trigger transition\n\t\tthis.shown = false;\n\n\t\tsetTimeout(() => {\n\t\t\t$.remove(this.popup);\n\t\t}, parseFloat(getComputedStyle(this.popup).transitionDuration) * 1000 || 400); // TODO transition-duration could override this\n\n\t\t$.events(this.element, {\n\t\t\t\"click.mavo:showpopup\": evt => {\n\t\t\t\tthis.show();\n\t\t\t},\n\t\t\t\"keyup.mavo:showpopup\": evt => {\n\t\t\t\tif ([13, 113].indexOf(evt.keyCode) > -1) { // Enter or F2\n\t\t\t\t\tthis.show();\n\t\t\t\t\tthis.editor.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\tclose: function() {\n\t\tthis.hide();\n\t\t$.unbind(this.element, \".mavo:edit .mavo:preedit .mavo:showpopup\");\n\t},\n\n\tproxy: {\n\t\t\"editor\": \"primitive\",\n\t\t\"element\": \"primitive\"\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n/**\n * Configuration for different types of elements. Options:\n * - attribute {String}\n * - useProperty {Boolean}\n * - datatype {\"number\"|\"boolean\"|\"string\"} Default is \"string\"\n * - modes\n * - editor {Object|Function}\n * - setEditorValue temporary\n * - edit\n * - done\n * - observe\n * - default: If there is no attribute, can we use that rule to pick one?\n * @\n */\n(function($, $$) {\n\nvar _ = Mavo.Elements = {};\n\nObject.defineProperties(_, {\n\t\"register\": {\n\t\tvalue: function(selector, o) {\n\t\t\tif (typeof arguments[0] === \"object\") {\n\t\t\t\tfor (let s in arguments[0]) {\n\t\t\t\t\t_.register(s, arguments[0][s]);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar all = Mavo.toArray(arguments[1]);\n\n\t\t\tfor (config of all) {\n\t\t\t\tconfig.attribute = Mavo.toArray(config.attribute || null);\n\n\t\t\t\tfor (attribute of config.attribute) {\n\t\t\t\t\tlet o = $.extend({}, config);\n\t\t\t\t\to.attribute = attribute;\n\t\t\t\t\t_[selector] = _[selector] || [];\n\t\t\t\t\t_[selector].push(o);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _;\n\t\t}\n\t},\n\t\"search\": {\n\t\tvalue: function(element, attribute, datatype) {\n\t\t\tvar matches = _.matches(element, attribute, datatype);\n\n\t\t\treturn matches[matches.length - 1] || { attribute };\n\t\t}\n\t},\n\t\"matches\": {\n\t\tvalue: function(element, attribute, datatype) {\n\t\t\tvar matches = [];\n\n\t\t\tselectorloop: for (var selector in _) {\n\t\t\t\tif (element.matches(selector)) {\n\t\t\t\t\tvar all = _[selector];\n\n\t\t\t\t\tfor (var o of all) {\n\t\t\t\t\t\t// Passes attribute test?\n\t\t\t\t\t\tvar attributeMatches = attribute === undefined && o.default || attribute === o.attribute;\n\n\t\t\t\t\t\tif (!attributeMatches) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Passes datatype test?\n\t\t\t\t\t\tif (datatype !== undefined && datatype !== \"string\" && datatype !== o.datatype) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Passes arbitrary test?\n\t\t\t\t\t\tif (o.test && !o.test(element, attribute, datatype)) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// All tests have passed\n\t\t\t\t\t\tmatches.push(o);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn matches;\n\t\t}\n\t},\n\n\tisSVG: {\n\t\tvalue: e => e.namespaceURI == \"http://www.w3.org/2000/svg\"\n\t},\n\n\tdefaultEditors: {\n\t\tvalue: {\n\t\t\t\"string\":  { tag: \"input\" },\n\t\t\t\"number\":  { tag: \"input\", type: \"number\" },\n\t\t\t\"boolean\": { tag: \"input\", type: \"checkbox\" }\n\t\t}\n\t}\n});\n\n_.register({\n\t\"*\": [\n\t\t{\n\t\t\ttest: (e, a) => a == \"hidden\",\n\t\t\tattribute: \"hidden\",\n\t\t\tdatatype: \"boolean\"\n\t\t},\n\t\t{\n\t\t\ttest: _.isSVG,\n\t\t\tattribute: \"y\",\n\t\t\tdatatype: \"number\"\n\t\t},\n\t\t{\n\t\t\tdefault: true,\n\t\t\ttest: _.isSVG,\n\t\t\tattribute: \"x\",\n\t\t\tdatatype: \"number\"\n\t\t},\n\t],\n\n\t\"img, video, audio\": {\n\t\tdefault: true,\n\t\tattribute: \"src\",\n\t\teditor: {\n\t\t\t\"tag\": \"input\",\n\t\t\t\"type\": \"url\",\n\t\t\t\"placeholder\": \"http://example.com\"\n\t\t}\n\t},\n\n\t\"video, audio\": {\n\t\tattribute: [\"autoplay\", \"buffered\", \"loop\"],\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"a, link\": {\n\t\tdefault: true,\n\t\tattribute: \"href\"\n\t},\n\n\t\"input, select, button, textarea\": {\n\t\tattribute: \"disabled\",\n\t\tdatatype: \"boolean\"\n\t},\n\n\t\"select, input\": {\n\t\tattribute: \"value\",\n\t\tdefault: true,\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"input change\"\n\t},\n\n\t\"textarea\": {\n\t\tdefault: true,\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"input\",\n\t\tgetValue: element => element.value,\n\t\tsetValue: (element, value) => element.value = value\n\t},\n\n\t\"input[type=range], input[type=number]\": {\n\t\tdefault: true,\n\t\tattribute: \"value\",\n\t\tdatatype: \"number\",\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"input change\"\n\t},\n\n\t\"input[type=checkbox]\": {\n\t\tdefault: true,\n\t\tattribute: \"checked\",\n\t\tdatatype: \"boolean\",\n\t\tmodes: \"read\",\n\t\tchangeEvents: \"click\"\n\t},\n\n\t\"input[type=radio]\": {\n\t\tdefault: true,\n\t\tattribute: \"checked\",\n\t\tmodes: \"read\",\n\t\tgetValue: element => {\n\t\t\tif (element.form) {\n\t\t\t\treturn element.form[element.name].value;\n\t\t\t}\n\n\t\t\tvar checked = $(`input[type=radio][name=\"${element.name}\"]:checked`);\n\t\t\treturn checked && checked.value;\n\t\t},\n\t\tsetValue: (element, value) => {\n\t\t\tif (element.form) {\n\t\t\t\telement.form[element.name].value = value;\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar toCheck = $(`input[type=radio][name=\"${element.name}\"][value=\"${value}\"]`);\n\t\t\t$.properties(toCheck, {checked: true});\n\t\t},\n\t\tinit: function(element) {\n\t\t\tthis.mavo.element.addEventListener(\"change\", evt => {\n\t\t\t\tif (evt.target.name == element.name) {\n\t\t\t\t\tthis.value = this.getValue();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\t\"button, .counter\": {\n\t\tdefault: true,\n\t\tattribute: \"mv-clicked\",\n\t\tdatatype: \"number\",\n\t\tmodes: \"read\",\n\t\tinit: function(element) {\n\t\t\tif (this.attribute === \"mv-clicked\") {\n\t\t\t\telement.setAttribute(\"mv-clicked\", \"0\");\n\n\t\t\t\telement.addEventListener(\"click\", evt => {\n\t\t\t\t\tlet clicked = +element.getAttribute(\"mv-clicked\") || 0;\n\t\t\t\t\tthis.value = ++clicked;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t},\n\n\t\"meter, progress\": {\n\t\tdefault: true,\n\t\tattribute: \"value\",\n\t\tdatatype: \"number\",\n\t\tedit: function() {\n\t\t\tvar min = +this.element.getAttribute(\"min\") || 0;\n\t\t\tvar max = +this.element.getAttribute(\"max\") || 1;\n\t\t\tvar range = max - min;\n\t\t\tvar step = +this.element.getAttribute(\"mv-edit-step\") || (range > 1? 1 : range/100);\n\n\t\t\tthis.element.addEventListener(\"mousemove.mavo:edit\", evt => {\n\t\t\t\t// Change property as mouse moves\n\t\t\t\tvar left = this.element.getBoundingClientRect().left;\n\t\t\t\tvar offset = Math.max(0, (evt.clientX - left) / this.element.offsetWidth);\n\t\t\t\tvar newValue = min + range * offset;\n\t\t\t\tvar mod = newValue % step;\n\n\t\t\t\tnewValue += mod > step/2? step - mod : -mod;\n\t\t\t\tnewValue = Math.max(min, Math.min(newValue, max));\n\n\t\t\t\tthis.sneak(() => this.element.setAttribute(\"value\", newValue));\n\t\t\t});\n\n\t\t\tthis.element.addEventListener(\"mouseleave.mavo:edit\", evt => {\n\t\t\t\t// Return to actual value\n\t\t\t\tthis.sneak(() => this.element.setAttribute(\"value\", this.value));\n\t\t\t});\n\n\t\t\tthis.element.addEventListener(\"click.mavo:edit\", evt => {\n\t\t\t\t// Register change\n\t\t\t\tthis.value = this.getValue();\n\t\t\t});\n\n\t\t\tthis.element.addEventListener(\"keydown.mavo:edit\", evt => {\n\t\t\t\t// Edit with arrow keys\n\t\t\t\tif (evt.target == this.element && (evt.keyCode == 37 || evt.keyCode == 39)) {\n\t\t\t\t\tvar increment = step * (evt.keyCode == 39? 1 : -1) * (evt.shiftKey? 10 : 1);\n\t\t\t\t\tvar newValue = this.value + increment;\n\t\t\t\t\tnewValue = Math.max(min, Math.min(newValue, max));\n\n\t\t\t\t\tthis.element.setAttribute(\"value\", newValue);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tdone: function() {\n\t\t\t$.unbind(this.element, \".mavo:edit\");\n\t\t}\n\t},\n\n\t\"meta\": {\n\t\tdefault: true,\n\t\tattribute: \"content\"\n\t},\n\n\t\"p, div, li, dt, dd, h1, h2, h3, h4, h5, h6, article, section, address\": {\n\t\tdefault: true,\n\t\teditor: function() {\n\t\t\tvar display = getComputedStyle(this.element).display;\n\t\t\tvar tag = display.indexOf(\"inline\") === 0? \"input\" : \"textarea\";\n\t\t\tvar editor = $.create(tag);\n\n\t\t\tif (tag == \"textarea\") {\n\t\t\t\t// Actually multiline\n\t\t\t\tvar width = this.element.offsetWidth;\n\n\t\t\t\tif (width) {\n\t\t\t\t\teditor.width = width;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn editor;\n\t\t},\n\n\t\tsetEditorValue: function(value) {\n\t\t\tif (this.datatype && this.datatype != \"string\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar cs = getComputedStyle(this.element);\n\t\t\tvalue = value || \"\";\n\n\t\t\tif ([\"normal\", \"nowrap\"].indexOf(cs.whiteSpace) > -1) {\n\t\t\t\t// Collapse lines\n\t\t\t\tvalue = value.replace(/\\r?\\n/g, \" \");\n\t\t\t}\n\n\t\t\tif ([\"normal\", \"nowrap\", \"pre-line\"].indexOf(cs.whiteSpace) > -1) {\n\t\t\t\t// Collapse whitespace\n\t\t\t\tvalue = value.replace(/^[ \\t]+|[ \\t]+$/gm, \"\").replace(/[ \\t]+/g, \" \");\n\t\t\t}\n\n\t\t\tthis.editor.value = value;\n\t\t\treturn true;\n\t\t}\n\t},\n\n\t\"time\": {\n\t\tattribute: \"datetime\",\n\t\tdefault: true,\n\t\teditor: function() {\n\t\t\tvar types = {\n\t\t\t\t\"date\": /^[Y\\d]{4}-[M\\d]{2}-[D\\d]{2}$/i,\n\t\t\t\t\"month\": /^[Y\\d]{4}-[M\\d]{2}$/i,\n\t\t\t\t\"time\": /^[H\\d]{2}:[M\\d]{2}/i,\n\t\t\t\t\"week\": /[Y\\d]{4}-W[W\\d]{2}$/i,\n\t\t\t\t\"datetime-local\": /^[Y\\d]{4}-[M\\d]{2}-[D\\d]{2} [H\\d]{2}:[M\\d]{2}/i\n\t\t\t};\n\n\t\t\tvar datetime = this.element.getAttribute(\"datetime\") || \"YYYY-MM-DD\";\n\n\t\t\tfor (var type in types) {\n\t\t\t\tif (types[type].test(datetime)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {tag: \"input\", type};\n\t\t},\n\t\thumanReadable: function (value) {\n\t\t\tvar date = new Date(value);\n\n\t\t\tif (!value || isNaN(date)) {\n\t\t\t\treturn \"(No \" + this.label + \")\";\n\t\t\t}\n\n\t\t\t// TODO do this properly (account for other datetime datatypes and different formats)\n\t\t\tvar options = {\n\t\t\t\t\"date\": {day: \"numeric\", month: \"short\", year: \"numeric\"},\n\t\t\t\t\"month\": {month: \"long\"},\n\t\t\t\t\"time\": {hour: \"numeric\", minute: \"numeric\"},\n\t\t\t\t\"datetime-local\": {day: \"numeric\", month: \"short\", year: \"numeric\", hour: \"numeric\", minute: \"numeric\"}\n\t\t\t};\n\n\t\t\tvar format = options[this.editor && this.editor.type] || options.date;\n\t\t\tformat.timeZone = \"UTC\";\n\n\t\t\treturn date.toLocaleString(\"en-GB\", format);\n\t\t}\n\t},\n\n\t\"circle\": [\n\t\t{\n\t\t\tdefault: true,\n\t\t\tattribute: \"r\",\n\t\t\tdatatype: \"number\"\n\t\t}, {\n\t\t\tattribute: [\"cx\", \"cy\"],\n\t\t\tdatatype: \"number\"\n\t\t}\n\t],\n\n\t\"text\": {\n\t\tdefault: true,\n\t\tpopup: true\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($, $$) {\n\nMavo.attributes.push(\"mv-multiple\", \"mv-order\", \"mv-accepts\");\n\nvar _ = Mavo.Collection = $.Class({\n\textends: Mavo.Node,\n\tnodeType: \"Collection\",\n\tconstructor: function (element, mavo, o) {\n\t\t/*\n\t\t * Create the template, remove it from the DOM and store it\n\t\t */\n\t\tthis.templateElement = this.element;\n\n\t\tthis.children = [];\n\n\t\t// ALL descendant property names as an array\n\t\tif (!this.fromTemplate(\"properties\", \"mutable\", \"templateElement\", \"accepts\")) {\n\t\t\tthis.properties = $$(Mavo.selectors.property, this.templateElement).map(Mavo.Node.getProperty);\n\t\t\tthis.mutable = this.templateElement.matches(Mavo.selectors.multiple);\n\t\t\tthis.accepts = (this.templateElement.getAttribute(\"mv-accepts\") || \"\").split(/\\s+/);\n\n\t\t\t// Must clone because otherwise once expressions are parsed on the template element\n\t\t\t// we will not be able to pick them up from subsequent items\n\t\t\tthis.templateElement = this.templateElement.cloneNode(true);\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\tvar item = this.createItem(this.element);\n\t\t\tthis.add(item);\n\t\t\tthis.itemTemplate = item.template || item;\n\t\t}\n\n\t\tthis.postInit();\n\n\t\tMavo.hooks.run(\"collection-init-end\", this);\n\t},\n\n\tget length() {\n\t\treturn this.children.length;\n\t},\n\n\tgetData: function(o = {}) {\n\t\tvar env = {\n\t\t\tcontext: this,\n\t\t\toptions: o,\n\t\t\tdata: []\n\t\t};\n\n\t\tfor (item of this.children) {\n\t\t\tif (!item.deleted || o.null) {\n\t\t\t\tlet itemData = item.getData(env.options);\n\n\t\t\t\tif (itemData || o.null) {\n\t\t\t\t\tenv.data.push(itemData);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (this.unhandled) {\n\t\t\tenv.data = this.unhandled.before.concat(env.data, this.unhandled.after);\n\t\t}\n\n\t\tif (!this.mutable && env.data.length == 1) {\n\t\t\t// See https://github.com/LeaVerou/mavo/issues/50#issuecomment-266079652\n\t\t\tenv.data = env.data[0];\n\t\t}\n\n\t\tMavo.hooks.run(\"node-getdata-end\", env);\n\n\t\treturn env.data;\n\t},\n\n\t// Create item but don't insert it anywhere\n\t// Mostly used internally\n\tcreateItem: function (element) {\n\t\tif (!element) {\n\t\t\telement = this.templateElement.cloneNode(true);\n\t\t}\n\n\t\tvar item = Mavo.Node.create(element, this.mavo, {\n\t\t\tcollection: this,\n\t\t\ttemplate: this.itemTemplate || (this.template? this.template.itemTemplate : null),\n\t\t\tproperty: this.property,\n\t\t\ttype: this.type\n\t\t});\n\n\t\treturn item;\n\t},\n\n\t/**\n\t * Add a new item to this collection\n\t * @param item {Node|Mavo.Node} Optional. Element or Mavo object for the new item\n\t * @param index {Number} Optional. Index of existing item, will be added opposite to list direction\n\t * @param silent {Boolean} Optional. Throw a datachange event? Mainly used internally.\n\t */\n\tadd: function(item, index, o = {}) {\n\t\tif (item instanceof Node) {\n\t\t\titem = Mavo.Node.get(item) || this.createItem(item);\n\t\t}\n\t\telse {\n\t\t\titem = item || this.createItem();\n\t\t}\n\n\t\tif (item.collection != this) {\n\t\t\tthis.adopt(item);\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\t// Add it to the DOM, or fix its place\n\t\t\tvar rel = this.children[index]? this.children[index].element : this.marker;\n\t\t\t$[this.bottomUp? \"after\" : \"before\"](item.element, rel);\n\n\t\t\tif (index === undefined) {\n\t\t\t\tindex = this.bottomUp? 0 : this.length;\n\t\t\t}\n\t\t}\n\n\t\tvar env = {context: this, item};\n\n\t\tenv.previousIndex = item.index;\n\n\t\t// Update internal data model\n\t\tenv.changed = this.splice({\n\t\t\tremove: env.item\n\t\t}, {\n\t\t\tindex: index,\n\t\t\tadd: env.item\n\t\t});\n\n\t\tif (!o.silent) {\n\t\t\tenv.changed.forEach(i => {\n\t\t\t\ti.dataChanged(i == env.item && env.previousIndex === undefined? \"add\" : \"move\");\n\t\t\t\ti.unsavedChanges = true;\n\t\t\t});\n\n\t\t\tthis.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t}\n\n\t\tMavo.hooks.run(\"collection-add-end\", env);\n\n\t\treturn env.item;\n\t},\n\n\tsplice: function(...actions) {\n\t\tfor (let action of actions) {\n\t\t\tif (action.index === undefined && action.remove && isNaN(action.remove)) {\n\t\t\t\t// Remove is an item\n\t\t\t\taction.index = this.children.indexOf(action.remove);\n\t\t\t\taction.remove = 1;\n\t\t\t}\n\t\t}\n\n\t\t// Sort in reverse index order\n\t\tactions.sort((a, b) => b.index - a.index);\n\n\t\t// FIXME this could still result in buggy behavior.\n\t\t// Think of e.g. adding items on i, then removing > 1 items on i-1.\n\t\t// The new items would get removed instead of the old ones.\n\t\t// Not a pressing issue though since we always remove 1 max when adding things too.\n\t\tfor (let action of actions) {\n\t\t\tif (action.index > -1 && (action.remove || action.add)) {\n\t\t\t\taction.remove = action.remove || 0;\n\t\t\t\taction.add = Mavo.toArray(action.add);\n\n\t\t\t\tthis.children.splice(action.index, +action.remove, ...action.add);\n\t\t\t}\n\t\t}\n\n\t\tvar changed = [];\n\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tlet item = this.children[i];\n\n\t\t\tif (item && item.index !== i) {\n\t\t\t\titem.index = i;\n\t\t\t\tchanged.push(item);\n\t\t\t}\n\t\t}\n\n\t\treturn changed;\n\t},\n\n\tadopt: function(item) {\n\t\tif (item.collection) {\n\t\t\t// It belongs to another collection, delete from there first\n\t\t\titem.collection.splice({remove: item});\n\t\t\titem.collection.dataChanged(\"delete\");\n\t\t}\n\n\t\t // Update collection & closestCollection properties\n\t\tthis.walk(obj => {\n\t\t\tif (obj.closestCollection === item.collection) {\n\t\t\t\tobj.closestCollection = this;\n\t\t\t}\n\n\t\t\t// Belongs to another Mavo?\n\t\t\tif (item.mavo != this.mavo) {\n\t\t\t\titem.mavo = this.mavo;\n\t\t\t}\n\t\t});\n\n\t\titem.collection = this;\n\n\t\t// Adjust templates and their copies\n\t\tif (item.template) {\n\t\t\tMavo.delete(item.template.copies, item);\n\n\t\t\titem.template = this.itemTemplate;\n\t\t}\n\t},\n\n\tdelete: function(item, hard) {\n\t\tif (hard) {\n\t\t\t// Hard delete\n\t\t\t$.remove(item.element);\n\t\t\tthis.splice({remove: item});\n\t\t\titem.destroy();\n\t\t\treturn;\n\t\t}\n\n\t\treturn $.transition(item.element, {opacity: 0}).then(() => {\n\t\t\titem.deleted = true; // schedule for deletion\n\t\t\titem.element.style.opacity = \"\";\n\n\t\t\titem.dataChanged(\"delete\");\n\n\t\t\tthis.unsavedChanges = item.unsavedChanges = this.mavo.unsavedChanges = true;\n\t\t});\n\t},\n\n\t/**\n\t * Move existing item to a new position. Wraps around if position is out of bounds.\n\t * @offset relative position\n\t */\n\tmove: function(item, offset) {\n\t\tindex = item.index + offset + (offset > 0);\n\n\t\tif (index < 0) {\n\t\t\tindex = this.children.length;\n\t\t}\n\t\telse if (index > this.children.length) {\n\t\t\tindex = 0;\n\t\t}\n\n\t\tthis.add(item, index);\n\t},\n\n\teditItem: function(item) {\n\t\tif (!item.itemControls) {\n\t\t\titem.itemControls = $$(\".mv-item-controls\", item.element)\n\t\t\t\t\t\t\t\t   .filter(el => {\n\t\t\t\t\t\t\t\t\t   // Remove item controls meant for other collections\n\t\t\t\t\t\t\t\t\t   return el.closest(Mavo.selectors.multiple) == item.element && !Mavo.data(el, \"item\");\n\t\t\t\t\t\t\t\t   })[0];\n\n\t\t\titem.itemControls = item.itemControls || $.create({\n\t\t\t\tclassName: \"mv-item-controls mv-ui\"\n\t\t\t});\n\n\t\t\tMavo.data(item.itemControls, \"item\", item);\n\n\t\t\t$.set(item.itemControls, {\n\t\t\t\tcontents: [\n\t\t\t\t\t{\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\ttitle: \"Delete this \" + item.name,\n\t\t\t\t\t\tclassName: \"mv-delete\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": evt => item.collection.delete(item)\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\ttitle: `Add new ${item.name.replace(/s$/i, \"\")} ${this.bottomUp? \"after\" : \"before\"}`,\n\t\t\t\t\t\tclassName: \"mv-add\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\t\"click\": evt => {\n\t\t\t\t\t\t\t\tvar newItem = this.add(null, item.index);\n\n\t\t\t\t\t\t\t\tif (evt[Mavo.superKey]) {\n\t\t\t\t\t\t\t\t\tnewItem.render(item.data);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tMavo.scrollIntoViewIfNeeded(newItem.element);\n\n\t\t\t\t\t\t\t\treturn this.editItem(newItem);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}, {\n\t\t\t\t\t\ttag: \"button\",\n\t\t\t\t\t\ttitle: \"Drag to reorder \" + item.name,\n\t\t\t\t\t\tclassName: \"mv-drag-handle\",\n\t\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tclick: evt => evt.target.focus(),\n\t\t\t\t\t\t\tkeydown: evt => {\n\t\t\t\t\t\t\t\tif (evt.keyCode >= 37 && evt.keyCode <= 40) {\n\t\t\t\t\t\t\t\t\t// Arrow keys\n\t\t\t\t\t\t\t\t\tthis.move(item, evt.keyCode <= 38? -1 : 1);\n\n\t\t\t\t\t\t\t\t\tevt.stopPropagation();\n\t\t\t\t\t\t\t\t\tevt.preventDefault();\n\t\t\t\t\t\t\t\t\tevt.target.focus();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\n\t\tif (!item.itemControls.parentNode) {\n\t\t\tif (!Mavo.revocably.add(item.itemControls)) {\n\t\t\t\tif (item instanceof Mavo.Primitive && !item.attribute) {\n\t\t\t\t\titem.itemControls.classList.add(\"mv-adjacent\");\n\t\t\t\t\t$.after(item.itemControls, item.element);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\titem.element.appendChild(item.itemControls);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\titem.edit();\n\t},\n\n\tedit: function() {\n\t\tif (this.super.edit.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\t// Insert the add button if it's not already in the DOM\n\t\t\tif (!this.addButton.parentNode) {\n\t\t\t\tvar tag = this.element.tagName.toLowerCase();\n\t\t\t\tvar containerSelector = Mavo.selectors.container[tag];\n\t\t\t\tvar rel = containerSelector? this.marker.parentNode.closest(containerSelector) : this.marker;\n\t\t\t\t$[this.bottomUp? \"before\" : \"after\"](this.addButton, rel);\n\t\t\t}\n\n\t\t\t// Insert item controls\n\t\t\tthis.propagate(item => {\n\t\t\t\tthis.editItem(item);\n\t\t\t});\n\n\t\t\t// Set up drag & drop\n\t\t\t_.dragula.then(() => {\n\t\t\t\tthis.getDragula();\n\t\t\t});\n\t\t}\n\t},\n\n\tdone: function() {\n\t\tif (this.super.done.call(this) === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.mutable) {\n\t\t\tif (this.addButton.parentNode) {\n\t\t\t\tthis.addButton.remove();\n\t\t\t}\n\n\t\t\tthis.propagate(item => Mavo.revocably.remove(item.itemControls, \"item controls\"));\n\t\t}\n\t},\n\n\t/**\n\t * Delete all items in the collection. Not undoable.\n\t */\n\tclear: function() {\n\t\tif (this.mutable) {\n\t\t\tthis.propagate(item => {\n\t\t\t\titem.element.remove();\n\t\t\t\titem.destroy();\n\t\t\t});\n\n\t\t\tthis.children = [];\n\n\t\t\tthis.dataChanged(\"clear\");\n\t\t}\n\t},\n\n\tdataChanged: function(action, o = {}) {\n\t\to.element = o.element || this.marker;\n\t\treturn this.super.dataChanged.call(this, action, o);\n\t},\n\n\tsave: function() {\n\t\tfor (let item of this.children) {\n\t\t\tif (item.deleted) {\n\t\t\t\tthis.delete(item, true);\n\t\t\t}\n\t\t\telse {\n\t\t\t\titem.unsavedChanges = false;\n\t\t\t}\n\t\t}\n\t},\n\n\tpropagated: [\"save\"],\n\n\tdataRender: function(data) {\n\t\tthis.unhandled = {before: [], after: []};\n\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\tdata = Mavo.toArray(data);\n\n\t\tif (!this.mutable) {\n\t\t\tthis.children.forEach((item, i) => item.render(data && data[i]));\n\n\t\t\tif (data) {\n\t\t\t\tthis.unhandled.after = data.slice(this.length);\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\t// First render on existing items\n\t\t\tfor (var i = 0; i < this.children.length; i++) {\n\t\t\t\tif (i < data.length) {\n\t\t\t\t\tthis.children[i].render(data[i]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.delete(this.children[i], true);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.length > i) {\n\t\t\t\t// There are still remaining items\n\t\t\t\t// Using document fragments improves performance by 60%\n\t\t\t\tvar fragment = document.createDocumentFragment();\n\n\t\t\t\tfor (var j = i; j < data.length; j++) {\n\t\t\t\t\tvar item = this.createItem();\n\n\t\t\t\t\titem.render(data[j]);\n\n\t\t\t\t\tthis.children.push(item);\n\t\t\t\t\titem.index = j;\n\n\t\t\t\t\tfragment.appendChild(item.element);\n\n\t\t\t\t\tvar env = {context: this, item};\n\t\t\t\t\tMavo.hooks.run(\"collection-add-end\", env);\n\t\t\t\t}\n\n\t\t\t\tif (this.bottomUp) {\n\t\t\t\t\t$.after(fragment, i > 0? this.children[i-1].element : this.marker);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t$.before(fragment, this.marker);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\n\tfind: function(property, o = {}) {\n\t\tvar items = this.children.filter(item => !item.deleted);\n\n\t\tif (this.property == property) {\n\t\t\treturn o.collections? this : items;\n\t\t}\n\n\t\tif (this.properties.indexOf(property) > -1) {\n\t\t\tvar ret = items.map(item => item.find(property, o));\n\n\t\t\treturn Mavo.flatten(ret);\n\t\t}\n\t},\n\n\tisCompatible: function(c) {\n\t\treturn c && this.itemTemplate.nodeType == c.itemTemplate.nodeType && (c === this\n\t\t       || c.template == this || this.template == c || this.template && this.template == c.template\n\t\t       || this.accepts.indexOf(c.property) > -1);\n\t},\n\n\tlive: {\n\t\tmutable: function(value) {\n\t\t\tif (value && value !== this.mutable) {\n\t\t\t\t// Why is all this code here? Because we want it executed\n\t\t\t\t// every time mutable changes, not just in the constructor\n\t\t\t\t// (think multiple elements with the same property name, where only one has mv-multiple)\n\t\t\t\tthis._mutable = value;\n\n\t\t\t\t// Keep position of the template in the DOM, since we might remove it\n\t\t\t\tthis.marker = document.createComment(\"mv-marker\");\n\t\t\t\tMavo.data(this.marker, \"collection\", this);\n\t\t\t\t$.after(this.marker, this.templateElement);\n\t\t\t}\n\t\t}\n\t},\n\n\t// Make sure to only call after dragula has loaded\n\tgetDragula: function() {\n\t\tif (this.dragula) {\n\t\t\treturn this.dragula;\n\t\t}\n\n\t\tif (this.template) {\n\t\t\tMavo.pushUnique(this.template.getDragula().containers, this.marker.parentNode);\n\t\t\treturn this.dragula = this.template.dragula || this.template.getDragula();\n\t\t}\n\n\t\tvar me = this;\n\t\tthis.dragula = dragula({\n\t\t\tcontainers: [this.marker.parentNode],\n\t\t\tisContainer: el => {\n\t\t\t\tif (this.accepts.length) {\n\t\t\t\t\treturn Mavo.flatten(this.accepts.map(property => this.mavo.root.find(property, {collections: true})))\n\t\t\t\t\t\t\t\t.filter(c => c && c instanceof _)\n\t\t\t\t\t\t\t\t.map(c => c.marker.parentNode)\n\t\t\t\t\t\t\t\t.indexOf(el) > -1;\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tmoves: (el, container, handle) => {\n\t\t\t\treturn handle.classList.contains(\"mv-drag-handle\") && handle.closest(Mavo.selectors.multiple) == el;\n\t\t\t},\n\t\t\taccepts: function(el, target, source, next) {\n\t\t\t\tif (el.contains(target)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar previous = next? next.previousElementSibling : target.lastElementChild;\n\n\t\t\t\tvar collection = _.get(previous) || _.get(next);\n\n\t\t\t\tif (!collection) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tvar item = Mavo.Node.get(el);\n\n\t\t\t\treturn item && item.collection.isCompatible(collection);\n\t\t\t}\n\t\t});\n\n\t\tthis.dragula.on(\"drop\", (el, target, source) => {\n\t\t\tvar item = Mavo.Node.get(el);\n\t\t\tvar oldIndex = item && item.index;\n\t\t\tvar next = el.nextElementSibling;\n\t\t\tvar previous = el.previousElementSibling;\n\t\t\tvar collection = _.get(previous) || _.get(next);\n\t\t\tvar closestItem = Mavo.Node.get(previous) || Mavo.Node.get(next);\n\n\t\t\tif (closestItem && closestItem.collection != collection) {\n\t\t\t\tclosestItem = null;\n\t\t\t}\n\n\t\t\tif (item.collection.isCompatible(collection)) {\n\t\t\t\tvar index = closestItem? closestItem.index + (closestItem.element === previous) : collection.length;\n\t\t\t\tcollection.add(item, index);\n\t\t\t}\n\t\t\telse {\n\t\t\t\treturn this.dragula.cancel(true);\n\t\t\t}\n\t\t});\n\n\t\t_.dragulas.push(this.dragula);\n\n\t\treturn this.dragula;\n\t},\n\n\tlazy: {\n\t\tbottomUp: function() {\n\t\t\t/*\n\t\t\t * Add new items at the top or bottom?\n\t\t\t */\n\n\t\t\tif (!this.mutable) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tvar order = this.templateElement.getAttribute(\"mv-order\");\n\t\t\tif (order !== null) {\n\t\t\t\t// Attribute has the highest priority and overrides any heuristics\n\t\t\t\treturn /^desc\\b/i.test(order);\n\t\t\t}\n\n\t\t\tif (!this.addButton.parentNode) {\n\t\t\t\t// If add button not in DOM, do the default\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// If add button is already in the DOM and *before* our template, then we default to prepending\n\t\t\treturn !!(this.addButton.compareDocumentPosition(this.marker) & Node.DOCUMENT_POSITION_FOLLOWING);\n\t\t},\n\n\t\tclosestCollection: function() {\n\t\t\tvar parent = this.marker? this.marker.parentNode : this.templateElement.parentNode;\n\n\t\t\treturn parent.closest(Mavo.selectors.multiple);\n\t\t},\n\n\t\taddButton: function() {\n\t\t\t// Find add button if provided, or generate one\n\t\t\tvar selector = `button.mv-add-${this.property}`;\n\t\t\tvar group = this.closestCollection || this.marker.parentNode.closest(Mavo.selectors.group);\n\n\t\t\tif (group) {\n\t\t\t\tvar button = $$(selector, group).filter(button => {\n\t\t\t\t\treturn !this.templateElement.contains(button);\n\t\t\t\t})[0];\n\t\t\t}\n\n\t\t\tif (!button) {\n\t\t\t\tbutton = $.create(\"button\", {\n\t\t\t\t\tclassName: \"mv-add\",\n\t\t\t\t\ttextContent: \"Add \" + this.name\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tbutton.classList.add(\"mv-ui\", \"mv-add\");\n\t\t\tMavo.data(button, \"collection\", this);\n\n\t\t\tif (this.property) {\n\t\t\t\tbutton.classList.add(`mv-add-${this.property}`);\n\t\t\t}\n\n\t\t\tbutton.addEventListener(\"click\", evt => {\n\t\t\t\tevt.preventDefault();\n\n\t\t\t\tthis.editItem(this.add());\n\t\t\t});\n\n\t\t\treturn button;\n\t\t}\n\t},\n\n\tstatic: {\n\t\tdragulas: [],\n\t\tget: element => {\n\t\t\t// Is it an add button or a marker?\n\t\t\tvar collection = Mavo.data(element, \"collection\");\n\n\t\t\tif (collection) {\n\t\t\t\treturn collection;\n\t\t\t}\n\n\t\t\t// Maybe it's a collection item?\n\t\t\tvar item = Mavo.Node.get(element);\n\n\t\t\treturn item && item.collection || null;\n\t\t},\n\n\t\tlazy: {\n\t\t\tdragula: () => $.include(self.dragula, \"https://cdnjs.cloudflare.com/ajax/libs/dragula/3.7.2/dragula.min.js\")\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n(function($) {\n\nMavo.attributes.push(\"mv-expressions\");\n\nvar _ = Mavo.Expression = $.Class({\n\tconstructor: function(expression) {\n\t\tthis.expression = expression;\n\t},\n\n\teval: function(data) {\n\t\tthis.oldValue = this.value;\n\n\t\tMavo.hooks.run(\"expression-eval-beforeeval\", this);\n\n\t\ttry {\n\t\t\tif (!this.function) {\n\t\t\t\tthis.function = _.compile(this.expression);\n\t\t\t\tthis.identifiers = this.expression.match(/[$a-z][$\\w]*/ig) || [];\n\t\t\t}\n\n\t\t\tthis.value = this.function(data);\n\t\t}\n\t\tcatch (exception) {\n\t\t\tconsole.info(\"%cExpression error!\", \"color: red; font-weight: bold\", `${exception.message} in expression ${this.expression}`);\n\t\t\tMavo.hooks.run(\"expression-eval-error\", {context: this, exception});\n\n\t\t\tthis.value = exception;\n\t\t}\n\n\t\treturn this.value;\n\t},\n\n\ttoString() {\n\t\treturn this.expression;\n\t},\n\n\tchangedBy: function(evt) {\n\t\tif (!evt) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!this.identifiers) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.identifiers.indexOf(evt.property) > -1) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (Mavo.hasIntersection(evt.properties, this.identifiers)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (evt.action != \"propertychange\") {\n\t\t\tif (Mavo.hasIntersection([\"$index\", \"$all\", \"$previous\", \"$next\"], this.identifiers)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tvar collection = evt.node.collection || evt.node;\n\n\t\t\tif (Mavo.hasIntersection(collection.properties, this.identifiers)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\tif (Mavo.hasIntersection(Mavo.allIds, this.identifiers)) {\n\t\t\treturn true; // contains a Mavo id\n\t\t}\n\n\t\treturn false;\n\t},\n\n\tlive: {\n\t\texpression: function(value) {\n\t\t\tvar code = value = value;\n\n\t\t\tthis.function = null;\n\t\t}\n\t},\n\n\tstatic: {\n\t\t/**\n\t\t * These serializers transform the AST into JS\n\t\t */\n\t\tserializers: {\n\t\t\t\"BinaryExpression\": node => `${_.serialize(node.left)} ${node.operator} ${_.serialize(node.right)}`,\n\t\t\t\"UnaryExpression\": node => `${node.operator}${_.serialize(node.argument)}`,\n\t\t\t\"CallExpression\": node => `${_.serialize(node.callee)}(${node.arguments.map(_.serialize).join(\", \")})`,\n\t\t\t\"ConditionalExpression\": node => `${_.serialize(node.test)}? ${_.serialize(node.consequent)} : ${_.serialize(node.alternate)}`,\n\t\t\t\"MemberExpression\": node => `get(${_.serialize(node.object)}, \"${node.property.name || node.property.value}\")`,\n\t\t\t\"ArrayExpression\": node => `[${node.elements.map(_.serialize).join(\", \")}]`,\n\t\t\t\"Literal\": node => node.raw,\n\t\t\t\"Identifier\": node => node.name,\n\t\t\t\"ThisExpression\": node => \"this\",\n\t\t\t\"Compound\": node => node.body.map(_.serialize).join(\" \")\n\t\t},\n\n\t\t/**\n\t\t * These are run before the serializers and transform the expression to support MavoScript\n\t\t */\n\t\ttransformations: {\n\t\t\t\"BinaryExpression\": node => {\n\t\t\t\tlet name = Mavo.Script.getOperatorName(node.operator);\n\t\t\t\tlet details = Mavo.Script.operators[name];\n\n\t\t\t\t// Flatten same operator calls\n\t\t\t\tvar nodeLeft = node;\n\t\t\t\tvar args = [];\n\n\t\t\t\tdo {\n\t\t\t\t\targs.unshift(nodeLeft.right);\n\t\t\t\t\tnodeLeft = nodeLeft.left;\n\t\t\t\t} while (Mavo.Script.getOperatorName(nodeLeft.operator) === name);\n\n\t\t\t\targs.unshift(nodeLeft);\n\n\t\t\t\tif (args.length > 1) {\n\t\t\t\t\treturn `${name}(${args.map(_.serialize).join(\", \")})`;\n\t\t\t\t}\n\t\t\t},\n\t\t\t\"CallExpression\": node => {\n\t\t\t\tif (node.callee.type == \"Identifier\" && node.callee.name == \"if\") {\n\t\t\t\t\tnode.callee.name = \"iff\";\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tserialize: node => {\n\t\t\tif (_.transformations[node.type]) {\n\t\t\t\tvar ret = _.transformations[node.type](node);\n\n\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn _.serializers[node.type](node);\n\t\t},\n\n\t\trewrite: function(code) {\n\t\t\ttry {\n\t\t\t\treturn _.serialize(_.parse(code));\n\t\t\t}\n\t\t\tcatch (e) {\n\t\t\t\t// Parsing as MavoScript failed, falling back to plain JS\n\t\t\t\treturn code;\n\t\t\t}\n\t\t},\n\n\t\tcompile: function(code) {\n\t\t\tcode = _.rewrite(code);\n\n\t\t\treturn new Function(\"data\", `with(Mavo.Functions._Trap)\n\t\t\t\t\twith(data) {\n\t\t\t\t\t\treturn ${code};\n\t\t\t\t\t}`);\n\t\t},\n\n\t\tparse: self.jsep,\n\t}\n});\n\nif (self.jsep) {\n\tjsep.addBinaryOp(\"and\", 2);\n\tjsep.addBinaryOp(\"or\", 2);\n\tjsep.addBinaryOp(\"=\", 6);\n\tjsep.addBinaryOp(\"mod\", 10);\n\tjsep.removeBinaryOp(\"===\");\n}\n\n_.serializers.LogicalExpression = _.serializers.BinaryExpression;\n_.transformations.LogicalExpression = _.transformations.BinaryExpression;\n\n_.Syntax = $.Class({\n\tconstructor: function(start, end) {\n\t\tthis.start = start;\n\t\tthis.end = end;\n\t\tthis.regex = RegExp(`${Mavo.escapeRegExp(start)}([\\\\S\\\\s]+?)${Mavo.escapeRegExp(end)}`, \"gi\");\n\t},\n\n\ttest: function(str) {\n\t\tthis.regex.lastIndex = 0;\n\n\t\treturn this.regex.test(str);\n\t},\n\n\ttokenize: function(str) {\n\t\tvar match, ret = [], lastIndex = 0;\n\n\t\tthis.regex.lastIndex = 0;\n\n\t\twhile ((match = this.regex.exec(str)) !== null) {\n\t\t\t// Literal before the expression\n\t\t\tif (match.index > lastIndex) {\n\t\t\t\tret.push(str.substring(lastIndex, match.index));\n\t\t\t}\n\n\t\t\tlastIndex = this.regex.lastIndex;\n\n\t\t\tret.push(new Mavo.Expression(match[1]));\n\t\t}\n\n\t\t// Literal at the end\n\t\tif (lastIndex < str.length) {\n\t\t\tret.push(str.substring(lastIndex));\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tstatic: {\n\t\tcreate: function(element) {\n\t\t\tif (element) {\n\t\t\t\tvar syntax = element.getAttribute(\"mv-expressions\");\n\n\t\t\t\tif (syntax) {\n\t\t\t\t\tsyntax = syntax.trim();\n\t\t\t\t\treturn /\\s/.test(syntax)? new _.Syntax(...syntax.split(/\\s+/)) : _.Syntax.ESCAPE;\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\n\t\tESCAPE: -1\n\t}\n});\n\n_.Syntax.default = new _.Syntax(\"[\", \"]\");\n\n})(Bliss);\n\n(function($) {\n\nvar _ = Mavo.DOMExpression = $.Class({\n\tconstructor: function(o = {}) {\n\t\tthis.mavo = o.mavo;\n\t\tthis.template = o.template && o.template.template || o.template;\n\n\t\tfor (let prop of [\"item\", \"path\", \"syntax\", \"fallback\", \"attribute\"]) {\n\t\t\tthis[prop] = o[prop] === undefined && this.template? this.template[prop] : o[prop];\n\t\t}\n\n\t\tthis.node = o.node;\n\n\t\tif (!this.node) {\n\t\t\t// No node provided, figure it out from path\n\t\t\tthis.node = this.path.reduce((node, index) => {\n\t\t\t\treturn node.childNodes[index];\n\t\t\t}, this.item.element);\n\t\t}\n\n\t\tthis.element = this.node;\n\t\tthis.attribute = this.attribute || null;\n\n\t\tMavo.hooks.run(\"domexpression-init-start\", this);\n\n\t\tif (!this.expression) { // Still unhandled?\n\t\t\tif (this.node.nodeType === 3) {\n\t\t\t\tthis.element = this.node.parentNode;\n\n\t\t\t\t// If no element siblings make this.node the element, which is more robust\n\t\t\t\t// Same if attribute, there are no attributes on a text node!\n\t\t\t\tif (!this.node.parentNode.children.length || this.attribute) {\n\t\t\t\t\tthis.node = this.element;\n\t\t\t\t\tthis.element.normalize();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.attribute) {\n\t\t\t\tthis.expression = this.node.getAttribute(this.attribute).trim();\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Move whitespace outside to prevent it from messing with types\n\t\t\t\tthis.node.normalize();\n\n\t\t\t\tif (this.node.firstChild && this.node.childNodes.length === 1 && this.node.firstChild.nodeType === 3) {\n\t\t\t\t\tvar whitespace = this.node.firstChild.textContent.match(/^\\s*|\\s*$/g);\n\n\t\t\t\t\tif (whitespace[1]) {\n\t\t\t\t\t\tthis.node.firstChild.splitText(this.node.firstChild.textContent.length - whitespace[1].length);\n\t\t\t\t\t\t$.after(this.node.lastChild, this.node);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (whitespace[0]) {\n\t\t\t\t\t\tthis.node.firstChild.splitText(whitespace[0].length);\n\t\t\t\t\t\tthis.node.parentNode.insertBefore(this.node.firstChild, this.node);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.expression = this.node.textContent;\n\t\t\t}\n\n\n\t\t\tthis.parsed = o.template? o.template.parsed : this.syntax.tokenize(this.expression);\n\t\t}\n\n\t\tthis.oldValue = this.value = this.parsed.map(x => x instanceof Mavo.Expression? x.expression : x);\n\n\t\tthis.mavo.treeBuilt.then(() => {\n\t\t\tif (!this.template) {\n\t\t\t\tthis.item = Mavo.Node.get(this.element.closest(Mavo.selectors.multiple + \", \" + Mavo.selectors.group));\n\t\t\t\tthis.item.expressions = [...(this.item.expressions || []), this];\n\t\t\t}\n\n\t\t\tMavo.hooks.run(\"domexpression-init-treebuilt\", this);\n\t\t});\n\n\t\tMavo.hooks.run(\"domexpression-init-end\", this);\n\n\t\t_.elements.set(this.element, [...(_.elements.get(this.element) || []), this]);\n\t},\n\n\tchangedBy: function(evt) {\n\t\treturn !this.parsed.every(expr => !(expr instanceof Mavo.Expression) || !expr.changedBy(evt));\n\t},\n\n\tupdate: function(data = this.data, event) {\n\t\tvar env = {context: this, ret: {}, event};\n\t\tvar parentEnv = env;\n\t\tthis.data = data;\n\n\t\tenv.ret = {};\n\n\t\tMavo.hooks.run(\"domexpression-update-start\", env);\n\n\t\tthis.oldValue = this.value;\n\n\t\tenv.ret.value = this.value = this.parsed.map((expr, i) => {\n\t\t\tif (expr instanceof Mavo.Expression) {\n\t\t\t\tif (expr.changedBy(parentEnv.event)) {\n\t\t\t\t\tvar env = {context: this, expr, parentEnv};\n\n\t\t\t\t\tMavo.hooks.run(\"domexpression-update-beforeeval\", env);\n\n\t\t\t\t\tenv.value = env.expr.eval(data);\n\n\t\t\t\t\tMavo.hooks.run(\"domexpression-update-aftereval\", env);\n\n\t\t\t\t\tif (env.value instanceof Error) {\n\t\t\t\t\t\treturn this.fallback !== undefined? this.fallback : env.expr.expression;\n\t\t\t\t\t}\n\t\t\t\t\tif (env.value === undefined || env.value === null) {\n\t\t\t\t\t\t// Dont print things like \"undefined\" or \"null\"\n\t\t\t\t\t\treturn \"\";\n\t\t\t\t\t}\n\n\t\t\t\t\treturn env.value;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\treturn this.oldValue[i];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn expr;\n\t\t});\n\n\t\tif (!this.attribute) {\n\t\t\t// Separate presentational & actual values only apply when content is variable\n\t\t\tenv.ret.presentational = this.value.map(value => {\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\treturn value.join(\", \");\n\t\t\t\t}\n\n\t\t\t\tif (typeof value == \"number\") {\n\t\t\t\t\treturn Mavo.Primitive.formatNumber(value);\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t});\n\n\t\t\tenv.ret.presentational = env.ret.presentational.length === 1? env.ret.presentational[0] : env.ret.presentational.join(\"\");\n\t\t}\n\n\t\tenv.ret.value = env.ret.value.length === 1? env.ret.value[0] : env.ret.value.join(\"\");\n\n\t\tif (this.primitive && this.parsed.length === 1) {\n\t\t\tif (typeof env.ret.value === \"number\") {\n\t\t\t\tthis.primitive.datatype = \"number\";\n\t\t\t}\n\t\t\telse if (typeof env.ret.value === \"boolean\") {\n\t\t\t\tthis.primitive.datatype = \"boolean\";\n\t\t\t}\n\t\t}\n\n\t\tif (env.ret.presentational === env.ret.value) {\n\t\t\tret = env.ret.value;\n\t\t}\n\n\t\tthis.output(env.ret);\n\n\t\tMavo.hooks.run(\"domexpression-update-end\", env);\n\t},\n\n\toutput: function(value) {\n\t\tif (this.primitive) {\n\t\t\tthis.primitive.value = value;\n\t\t}\n\t\telse {\n\t\t\tvalue = value.presentational || value;\n\t\t\tMavo.Primitive.setValue(this.node, value, {attribute: this.attribute});\n\t\t}\n\t},\n\n\tstatic: {\n\t\telements: new WeakMap(),\n\n\t\t/**\n\t\t * Search for Mavo.DOMExpression object(s) associated with a given element\n\t\t * and optionally an attribute.\n\t\t *\n\t\t * @return If one argument, array of matching DOMExpression objects.\n\t\t *         If two arguments, the matching DOMExpression object or null\n\t\t */\n\t\tsearch: function(element, attribute) {\n\t\t\tvar all = _.elements.get(element) || [];\n\n\t\t\tif (arguments.length > 1) {\n\t\t\t\tif (!all.length) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\treturn all.filter(et => et.attribute === attribute)[0] || null;\n\t\t\t}\n\n\t\t\treturn all;\n\t\t}\n\t}\n});\n\n// Link primitive with its expressionText object\n// We need to do it before its constructor runs, to prevent any editing UI from being generated\nMavo.hooks.add(\"primitive-init-start\", function() {\n\tvar et = Mavo.DOMExpression.search(this.element, this.attribute);\n\n\tif (et && !et.mavoNode) {\n\t\tet.primitive = this;\n\t\tthis.storage = this.storage || \"none\";\n\t\tthis.modes = \"read\";\n\t}\n});\n\n})(Bliss);\n\n(function($, $$) {\n\nvar _ = Mavo.Expressions = $.Class({\n\tconstructor: function(mavo) {\n\t\tthis.mavo = mavo;\n\t\tthis.active = true;\n\n\t\tthis.expressions = [];\n\n\t\tvar syntax = Mavo.Expression.Syntax.create(this.mavo.element.closest(\"[mv-expressions]\")) || Mavo.Expression.Syntax.default;\n\t\tthis.traverse(this.mavo.element, undefined, syntax);\n\n\t\tthis.scheduled = new Set();\n\n\t\tthis.mavo.treeBuilt.then(() => {\n\t\t\tthis.expressions = [];\n\n\t\t\t// Watch changes and update value\n\t\t\tthis.mavo.element.addEventListener(\"mavo:datachange\", evt => {\n\t\t\t\tif (!this.active) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (evt.action == \"propertychange\" && evt.node.closestCollection) {\n\t\t\t\t\t// Throttle propertychange events in collections\n\t\t\t\t\tif (!this.scheduled.has(evt.property)) {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.scheduled.delete(evt.property);\n\t\t\t\t\t\t\tthis.update(evt);\n\t\t\t\t\t\t}, _.PROPERTYCHANGE_THROTTLE);\n\n\t\t\t\t\t\tthis.scheduled.add(evt.property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\trequestAnimationFrame(() => this.update(evt));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.update();\n\t\t});\n\t},\n\n\tupdate: function(evt) {\n\t\tvar root, rootGroup;\n\n\t\tif (evt instanceof Element) {\n\t\t\troot = evt.closest(Mavo.selectors.group);\n\t\t\tevt = null;\n\t\t}\n\n\t\troot = root || this.mavo.element;\n\t\trootGroup = Mavo.Node.get(root);\n\n\t\tvar data = rootGroup.getData({\n\t\t\trelative: true,\n\t\t\tstore: \"*\",\n\t\t\tnull: true\n\t\t});\n\n\t\trootGroup.walk((obj, path) => {\n\t\t\tif (obj.expressions && obj.expressions.length && !obj.isDeleted()) {\n\t\t\t\tlet env = { context: this, data: $.value(data, ...path) };\n\n\t\t\t\tMavo.hooks.run(\"expressions-update-start\", env);\n\t\t\t\tfor (let et of obj.expressions) {\n\t\t\t\t\tif (et.changedBy(evt)) {\n\t\t\t\t\t\tet.update(env.data, evt);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\n\textract: function(node, attribute, path, syntax) {\n\t\tif (attribute && attribute.name == \"mv-expressions\") {\n\t\t\treturn;\n\t\t}\n\n\t\tif ((attribute && _.directives.indexOf(attribute.name) > -1) ||\n\t\t    syntax.test(attribute? attribute.value : node.textContent)\n\t\t) {\n\t\t\tthis.expressions.push(new Mavo.DOMExpression({\n\t\t\t\tnode, syntax,\n\t\t\t\tpath: path? path.slice(1).split(\"/\").map(i => +i) : [],\n\t\t\t\tattribute: attribute && attribute.name,\n\t\t\t\tmavo: this.mavo\n\t\t\t}));\n\t\t}\n\t},\n\n\t// Traverse an element, including attribute nodes, text nodes and all descendants\n\ttraverse: function(node, path = \"\", syntax) {\n\t\tif (node.nodeType === 8) {\n\t\t\t// We don't want expressions to be picked up from comments!\n\t\t\t// Commenting stuff out is a common debugging technique\n\t\t\treturn;\n\t\t}\n\n\t\tif (node.nodeType === 3) { // Text node\n\t\t\t// Leaf node, extract references from content\n\t\t\tthis.extract(node, null, path, syntax);\n\t\t}\n\t\telse {\n\t\t\tnode.normalize();\n\n\t\t\tsyntax = Mavo.Expression.Syntax.create(node) || syntax;\n\n\t\t\tif (syntax === Mavo.Expression.Syntax.ESCAPE) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (Mavo.is(\"multiple\", node)) {\n\t\t\t\tpath = \"\";\n\t\t\t}\n\n\t\t\t$$(node.attributes).forEach(attribute => this.extract(node, attribute, path, syntax));\n\t\t\t$$(node.childNodes).forEach((child, i) => this.traverse(child, `${path}/${i}`, syntax));\n\t\t}\n\t},\n\n\tstatic: {\n\t\tdirectives: [],\n\n\t\tPROPERTYCHANGE_THROTTLE: 50,\n\n\t\tdirective: function(name, o) {\n\t\t\t_.directives.push(name);\n\t\t\tMavo.attributes.push(name);\n\n\t\t\tMavo.plugin(o);\n\t\t}\n\t}\n});\n\nMavo.hooks.add({\n\t\"init-tree-before\": function() {\n\t\tthis.expressions = new Mavo.Expressions(this);\n\t},\n\t// Must be at a hook that collections don't have a marker yet which messes up paths\n\t\"node-init-end\": function() {\n\t\tvar template = this.template;\n\n\t\tif (template && template.expressions) {\n\t\t\t// We know which expressions we have, don't traverse again\n\t\t\tthis.expressions = template.expressions.map(et => new Mavo.DOMExpression({\n\t\t\t\ttemplate: et,\n\t\t\t\titem: this,\n\t\t\t\tmavo: this.mavo\n\t\t\t}));\n\t\t}\n\t},\n\t// TODO what about granular rendering?\n\t\"render-start\": function() {\n\t\tthis.expressions.active = false;\n\t},\n\t\"render-end\": function() {\n\t\tthis.expressions.active = true;\n\t\tthis.expressions.update();\n\t},\n\t\"collection-add-end\": function(env) {\n\t\tthis.mavo.treeBuilt.then(() => this.mavo.expressions.update(env.item.element));\n\t},\n\t\"node-getdata-end\": self.Proxy && function(env) {\n\t\tif (env.options.relative && (env.data && typeof env.data === \"object\" || this.collection)) {\n\t\t\tvar data = env.data;\n\n\t\t\tif (this instanceof Mavo.Primitive) {\n\t\t\t\tenv.data = {\n\t\t\t\t\t[Symbol.toPrimitive]: () => data,\n\t\t\t\t\t[this.property]: data\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tenv.data = new Proxy(env.data, {\n\t\t\t\tget: (data, property, proxy) => {\n\t\t\t\t\t// Checking if property is in proxy might add it to the data\n\t\t\t\t\tif (property in data || (property in proxy && property in data)) {\n\t\t\t\t\t\treturn data[property];\n\t\t\t\t\t}\n\t\t\t\t},\n\n\t\t\t\thas: (data, property) => {\n\t\t\t\t\tif (property in data) {\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Property does not exist, look for it elsewhere\n\n\t\t\t\t\tif (property == \"$index\") {\n\t\t\t\t\t\tdata[property] = this.index || 0;\n\t\t\t\t\t\treturn true; // if index is 0 it's falsy and has would return false!\n\t\t\t\t\t}\n\n\t\t\t\t\tif (property == \"$all\") {\n\t\t\t\t\t\treturn data[property] = this.closestCollection? this.closestCollection.getData(env.options) : [env.data];\n\t\t\t\t\t}\n\n\t\t\t\t\tif (property == \"$next\" || property == \"$previous\") {\n\t\t\t\t\t\tif (this.closestCollection) {\n\t\t\t\t\t\t\treturn data[property] = this.closestCollection.getData(env.options)[this.index + (property == \"$next\"? 1 : -1)];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata[property] = null;\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (property == this.mavo.id) {\n\t\t\t\t\t\treturn data[property] = this.mavo.root.getData(env.options);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this instanceof Mavo.Group && property == this.property && this.collection) {\n\t\t\t\t\t\treturn data[property] = env.data;\n\t\t\t\t\t}\n\n\t\t\t\t\t// First look in ancestors\n\t\t\t\t\tvar ret = this.walkUp(group => {\n\t\t\t\t\t\tif (property in group.children) {\n\t\t\t\t\t\t\treturn group.children[property];\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\t\tif (ret === undefined) {\n\t\t\t\t\t\t// Still not found, look in descendants\n\t\t\t\t\t\tret = this.find(property);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (ret !== undefined) {\n\t\t\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\t\t\tret = ret.map(item => item.getData(env.options))\n\t\t\t\t\t\t\t\t\t .filter(item => item !== null);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (ret instanceof Mavo.Node) {\n\t\t\t\t\t\t\tret = ret.getData(env.options);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tdata[property] = ret;\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn false;\n\t\t\t\t},\n\n\t\t\t\tset: function(data, property, value) {\n\t\t\t\t\tthrow Error(\"You cant set data via expressions.\");\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n// mv-if plugin\n(function($, $$) {\n\nMavo.Expressions.directive(\"mv-if\", {\n\textend: {\n\t\t\"Primitive\": {\n\t\t\tlive: {\n\t\t\t\t\"hidden\": function(value) {\n\t\t\t\t\tif (this._hidden !== value) {\n\t\t\t\t\t\tthis._hidden = value;\n\t\t\t\t\t\tthis.dataChanged();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\t\"DOMExpression\": {\n\t\t\tlazy: {\n\t\t\t\t\"childProperties\": function() {\n\t\t\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar properties = $$(Mavo.selectors.property, this.element)\n\t\t\t\t\t\t\t\t\t.filter(el => el.closest(\"[mv-if]\") == this.element)\n\t\t\t\t\t\t\t\t\t.map(el => Mavo.Node.get(el));\n\n\t\t\t\t\t// When the element is detached, datachange events from properties\n\t\t\t\t\t// do not propagate up to the group so expressions do not recalculate.\n\t\t\t\t\t// We must do this manually.\n\t\t\t\t\tthis.element.addEventListener(\"mavo:datachange\", evt => {\n\t\t\t\t\t\t// Cannot redispatch synchronously [why??]\n\t\t\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\t\t\tif (!this.element.parentNode) { // out of the DOM?\n\t\t\t\t\t\t\tthis.item.element.dispatchEvent(evt);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\treturn properties;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},\n\thooks: {\n\t\t\"domexpression-init-start\": function() {\n\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.expression = this.element.getAttribute(\"mv-if\");\n\t\t\tthis.parsed = [new Mavo.Expression(this.expression)];\n\t\t\tthis.expression = this.syntax.start + this.expression + this.syntax.end;\n\n\t\t\tthis.parentIf = this.element.parentNode && Mavo.DOMExpression.search(this.element.parentNode.closest(\"[mv-if]\"), \"mv-if\");\n\n\t\t\tif (this.parentIf) {\n\t\t\t\tthis.parentIf.childIfs = (this.parentIf.childIfs || new Set()).add(this);\n\t\t\t}\n\t\t},\n\t\t\"domexpression-update-end\": function() {\n\t\t\tif (this.attribute != \"mv-if\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar value = this.value[0];\n\t\t\tvar oldValue = this.oldValue[0];\n\n\t\t\t// Only apply this after the tree is built, otherwise any properties inside the if will go missing!\n\t\t\tthis.item.mavo.treeBuilt.then(() => {\n\t\t\t\tif (this.parentIf) {\n\t\t\t\t\tvar parentValue = this.parentIf.value[0];\n\t\t\t\t\tthis.value[0] = value = value && parentValue;\n\t\t\t\t}\n\n\t\t\t\tif (value === oldValue) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (parentValue !== false) { // If parent if was false, it wouldn't matter whether this is in the DOM or not\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\t// Is removed from the DOM and needs to get back\n\t\t\t\t\t\tMavo.revocably.add(this.element);\n\t\t\t\t\t}\n\t\t\t\t\telse if (this.element.parentNode) {\n\t\t\t\t\t\t// Is in the DOM and needs to be removed\n\t\t\t\t\t\tMavo.revocably.remove(this.element, \"mv-if\");\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Mark any properties inside as hidden or not\n\t\t\t\tif (this.childProperties) {\n\t\t\t\t\tfor (let property of this.childProperties) {\n\t\t\t\t\t\tproperty.hidden = !value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (this.childIfs) {\n\t\t\t\t\tfor (let childIf of this.childIfs) {\n\t\t\t\t\t\tchildIf.update();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\t\"unit-isdatanull\": function(env) {\n\t\t\tenv.result = env.result || (this.hidden && env.options.store == \"*\");\n\t\t}\n\t}\n});\n\n})(Bliss, Bliss.$);\n\n// mv-value plugin\nMavo.Expressions.directive(\"mv-value\", {\n\thooks: {\n\t\t\"node-init-start\": function() {\n\t\t\tif (!(this instanceof Mavo.Group || this.collection)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar et = Mavo.DOMExpression.search(this.element).filter(et => et.originalAttribute == \"mv-value\")[0];\n\n\t\t\tif (!et) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tet.mavoNode = this;\n\t\t\tthis.storage = this.storage || \"none\";\n\t\t\tthis.modes = \"read\";\n\n\t\t\tif (this.collection) {\n\t\t\t\tthis.collection.expressions = [...(this.collection.expressions || []), et];\n\t\t\t\tet.mavoNode = this.collection;\n\t\t\t\tthis.collection.storage = this.collection.storage || \"none\";\n\t\t\t\tthis.collection.modes = \"read\";\n\t\t\t}\n\t\t},\n\t\t\"domexpression-init-start\": function() {\n\t\t\tif (this.attribute != \"mv-value\") {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.originalAttribute = \"mv-value\";\n\t\t\tthis.attribute = Mavo.Primitive.getValueAttribute(this.element);\n\t\t\tthis.fallback = this.fallback || Mavo.Primitive.getValue(this.element, {attribute: this.attribute});\n\t\t\tthis.expression = this.element.getAttribute(\"mv-value\");\n\t\t\tthis.element.removeAttribute(\"mv-value\");\n\n\t\t\tthis.parsed = [new Mavo.Expression(this.expression)];\n\t\t\tthis.expression = this.syntax.start + this.expression + this.syntax.end;\n\t\t},\n\t\t\"domexpression-init-treebuilt\": function() {\n\t\t\tif (this.originalAttribute != \"mv-value\" ||\n\t\t\t   !this.mavoNode ||\n\t\t\t   !(this.mavoNode == this.item || this.mavoNode == this.item.collection)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this.mavoNode == this.item.collection) {\n\t\t\t\tMavo.delete(this.item.expressions, this);\n\t\t\t}\n\n\t\t\tthis.output = function(value) {\n\t\t\t\tvalue = value.value || value;\n\n\t\t\t\tthis.mavoNode.render(value);\n\t\t\t};\n\n\t\t\tthis.changedBy = evt => true;\n\t\t},\n\t\t\"domexpression-update-start\": function() {\n\t\t\tif (this.originalAttribute != \"mv-value\" || this.mavoNode != this.item) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n});\n\n/**\n * Functions available inside Mavo expressions\n */\n\n(function() {\n\nvar _ = Mavo.Functions = {\n\toperators: {\n\t\t\"=\": \"eq\"\n\t},\n\n\tget $now() {\n\t\treturn new Date();\n\t},\n\n\turlOption: function(...names) {\n\t\tvar searchParams = \"searchParams\" in URL.prototype? new URL(location).searchParams : null;\n\t\tvar value = null;\n\n\t\tfor (let name of names) {\n\t\t\tif (searchParams) {\n\t\t\t\tvalue = searchParams.get(name);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tvar match = location.search.match(RegExp(`[?&]${name}(?:=([^&]+))?(?=&|$)`, \"i\"));\n\t\t\t\tvalue = match && (match[1] || \"\");\n\t\t\t}\n\n\t\t\tif (value !== null) {\n\t\t\t\treturn value;\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t},\n\n\t/**\n\t * Get a property of an object. Used by the . operator to prevent TypeErrors\n\t */\n\tget: function(obj, property) {\n\t\treturn obj && obj[property] !== undefined? obj[property] : null;\n\t},\n\n\tunique: function(arr) {\n\t\treturn [...new Set(arr)];\n\t},\n\n\t/*********************\n\t * Number functions\n\t *********************/\n\n\t/**\n\t * Aggregate sum\n\t */\n\tsum: function(array) {\n\t\treturn numbers(array, arguments).reduce((prev, current) => {\n\t\t\treturn +prev + (+current || 0);\n\t\t}, 0);\n\t},\n\n\t/**\n\t * Average of an array of numbers\n\t */\n\taverage: function(array) {\n\t\tarray = numbers(array, arguments);\n\n\t\treturn array.length && _.sum(array) / array.length;\n\t},\n\n\t/**\n\t * Min of an array of numbers\n\t */\n\tmin: function(array) {\n\t\treturn Math.min(...numbers(array, arguments));\n\t},\n\n\t/**\n\t * Max of an array of numbers\n\t */\n\tmax: function(array) {\n\t\treturn Math.max(...numbers(array, arguments));\n\t},\n\n\tcount: function(array) {\n\t\treturn Mavo.toArray(array).filter(a => a !== null && a !== false && a !== \"\").length;\n\t},\n\n\tround: function(num, decimals) {\n\t\tif (!num || !decimals || !isFinite(num)) {\n\t\t\treturn Math.round(num);\n\t\t}\n\n\t\treturn +num.toLocaleString(\"en-US\", {\n\t\t\tuseGrouping: false,\n\t\t\tmaximumFractionDigits: decimals\n\t\t});\n\t},\n\n\tiff: function(condition, iftrue, iffalse=\"\") {\n\t\tif (Array.isArray(condition)) {\n\t\t\treturn condition.map((c, i) => {\n\t\t\t\tvar ret = c? iftrue : iffalse;\n\n\t\t\t\tif (Array.isArray(ret)) {\n\t\t\t\t\treturn ret[Math.min(i, ret.length - 1)];\n\t\t\t\t}\n\n\t\t\t\treturn ret;\n\t\t\t});\n\t\t}\n\n\t\treturn condition? iftrue : iffalse;\n\t},\n\n\t/*********************\n\t * String functions\n\t *********************/\n\n\t/**\n\t * Replace all occurences of a string with another string\n\t */\n\treplace: function(haystack, needle, replacement = \"\", iterations = 1) {\n\t\tif (Array.isArray(haystack)) {\n\t\t\treturn haystack.map(item => _.replace(item, needle, replacement));\n\t\t}\n\n\t\t// Simple string replacement\n\t\tvar needleRegex = RegExp(Mavo.escapeRegExp(needle), \"g\");\n\t\tvar ret = haystack, prev;\n\t\tvar counter = 0;\n\n\t\twhile (ret != prev && (counter++ < iterations)) {\n\t\t\tprev = ret;\n\t\t\tret = ret.replace(needleRegex, replacement);\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tlen: str => (str || \"\").length,\n\t/**\n\t * Case insensitive search\n\t */\n\tsearch: (haystack, needle) => haystack && needle? haystack.toLowerCase().indexOf(needle.toLowerCase()) : -1,\n\n\tstarts: (haystack, needle) => _.search(haystack, needle) === 0,\n\tends: function(haystack, needle) {\n\t\tvar i = _.search(haystack, needle);\n\t\treturn  i > -1 && i === haystack.length - needle.length;\n\t},\n\n\tjoin: function(array, glue = \"\") {\n\t\treturn Mavo.toArray(array).join(glue);\n\t},\n\n\tidify: readable => ((readable || \"\") + \"\")\n\t\t.replace(/\\s+/g, \"-\") // Convert whitespace to hyphens\n\t\t.replace(/[^\\w-]/g, \"\") // Remove weird characters\n\t\t.toLowerCase(),\n\n\t// Convert an identifier to readable text that can be used as a label\n\treadable: function (identifier) {\n\t\t// Is it camelCase?\n\t\treturn identifier && identifier\n\t\t\t\t .replace(/([a-z])([A-Z])(?=[a-z])/g, ($0, $1, $2) => $1 + \" \" + $2.toLowerCase()) // camelCase?\n\t\t\t\t .replace(/([a-z])[_\\/-](?=[a-z])/g, \"$1 \") // Hyphen-separated / Underscore_separated?\n\t\t\t\t .replace(/^[a-z]/, $0 => $0.toUpperCase()); // Capitalize\n\t},\n\n\tuppercase: str => (str + \"\").toUpperCase(),\n\tlowercase: str => (str + \"\").toLowerCase(),\n};\n\nMavo.Script = {\n\taddUnaryOperator: function(name, o) {\n\t\treturn operand => Array.isArray(operand)? operand.map(o.scalar) : o.scalar(operand);\n\t},\n\n\t/**\n\t * Extend a scalar operator to arrays, or arrays and scalars\n\t * The operation between arrays is applied element-wise.\n\t * The operation operation between a scalar and an array will result in\n\t * the operation being applied between the scalar and every array element.\n\t */\n\taddBinaryOperator: function(name, o) {\n\t\tif (o.symbol) {\n\t\t\t// Build map of symbols to function names for easy rewriting\n\t\t\tfor (let symbol of Mavo.toArray(o.symbol)) {\n\t\t\t\tMavo.Script.symbols[symbol] = name;\n\t\t\t}\n\t\t}\n\n\t\to.identity = o.identity === undefined? 0 : o.identity;\n\n\t\treturn _[name] = o.code || function(...operands) {\n\t\t\tif (operands.length === 1) {\n\t\t\t\tif (Array.isArray(operands[0])) {\n\t\t\t\t\t// Operand is an array of operands, expand it out\n\t\t\t\t\toperands = [...operands[0]];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar prev = o.logical? o.identity : operands[0], result;\n\n\t\t\tfor (let i = 1; i < operands.length; i++) {\n\t\t\t\tlet a = o.logical? operands[i - 1] : prev;\n\t\t\t\tlet b = operands[i];\n\n\t\t\t\tif (Array.isArray(b)) {\n\t\t\t\t\tif (typeof o.identity == \"number\") {\n\t\t\t\t\t\tb = numbers(b);\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t\tresult = [\n\t\t\t\t\t\t\t...b.map((n, i) => o.scalar(a[i] === undefined? o.identity : a[i], n)),\n\t\t\t\t\t\t\t...a.slice(b.length)\n\t\t\t\t\t\t];\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresult = b.map(n => o.scalar(a, n));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Operand is scalar\n\t\t\t\t\tif (typeof o.identity == \"number\") {\n\t\t\t\t\t\tb = +b;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (Array.isArray(a)) {\n\t\t\t\t\t\tresult = a.map(n => o.scalar(n, b));\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tresult = o.scalar(a, b);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (o.reduce) {\n\t\t\t\t\tprev = o.reduce(prev, result, a, b);\n\t\t\t\t}\n\t\t\t\telse if (o.logical) {\n\t\t\t\t\tprev = prev && result;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tprev = result;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn prev;\n\t\t};\n\t},\n\n\t/**\n\t * Mapping of operator symbols to function name.\n\t * Populated via addOperator() and addLogicalOperator()\n\t */\n\tsymbols: {},\n\n\tgetOperatorName: op => Mavo.Script.symbols[op] || op,\n\n\t/**\n\t * Operations for elements and scalars.\n\t * Operations between arrays happen element-wise.\n\t * Operations between a scalar and an array will result in the operation being performed between the scalar and every array element.\n\t * Ordered by precedence (higher to lower)\n\t * @param scalar {Function} The operation between two scalars\n\t * @param identity The operations identity element. Defaults to 0.\n\t */\n\toperators: {\n\t\t\"not\": {\n\t\t\tscalar: a => a => !a\n\t\t},\n\t\t\"multiply\": {\n\t\t\tscalar: (a, b) => a * b,\n\t\t\tidentity: 1,\n\t\t\tsymbol: \"*\"\n\t\t},\n\t\t\"divide\": {\n\t\t\tscalar: (a, b) => a / b,\n\t\t\tidentity: 1,\n\t\t\tsymbol: \"/\"\n\t\t},\n\t\t\"add\": {\n\t\t\tscalar: (a, b) => +a + +b,\n\t\t\tsymbol: \"+\"\n\t\t},\n\t\t\"subtract\": {\n\t\t\tscalar: (a, b) => a - b,\n\t\t\tsymbol: \"-\"\n\t\t},\n\t\t\"mod\": {\n\t\t\tscalar: (a, b) => a % b\n\t\t},\n\t\t\"lte\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a <= b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \"<=\"\n\t\t},\n\t\t\"lt\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a < b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \"<\"\n\t\t},\n\t\t\"gte\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a >= b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \">=\"\n\t\t},\n\t\t\"gt\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => {\n\t\t\t\t[a, b] = Mavo.Script.getNumericalOperands(a, b);\n\t\t\t\treturn a > b;\n\t\t\t},\n\t\t\tidentity: true,\n\t\t\tsymbol: \">\"\n\t\t},\n\t\t\"eq\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => a == b,\n\t\t\tsymbol: [\"=\", \"==\"],\n\t\t\tidentity: true\n\t\t},\n\t\t\"neq\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => a != b,\n\t\t\tsymbol: [\"!=\"],\n\t\t\tidentity: true\n\t\t},\n\t\t\"and\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => !!a && !!b,\n\t\t\tidentity: true,\n\t\t\tsymbol: \"&&\"\n\t\t},\n\t\t\"or\": {\n\t\t\tlogical: true,\n\t\t\tscalar: (a, b) => !!a || !!b,\n\t\t\treduce: (p, r) => p || r,\n\t\t\tidentity: false,\n\t\t\tsymbol: \"||\"\n\t\t},\n\t\t\"concatenate\": {\n\t\t\tsymbol: \"&\",\n\t\t\tidentity: \"\",\n\t\t\tscalar: (a, b) => \"\" + a + b\n\t\t},\n\t\t\"filter\": {\n\t\t\tscalar: (a, b) => b? a : null\n\t\t}\n\t},\n\n\tgetNumericalOperands: function(a, b) {\n\t\tif (isNaN(a) || isNaN(b)) {\n\t\t\t// Try comparing as dates\n\t\t\tvar da = new Date(a), db = new Date(b);\n\n\t\t\tif (!isNaN(da) && !isNaN(db)) {\n\t\t\t\t// Both valid dates\n\t\t\t\treturn [da, db];\n\t\t\t}\n\t\t}\n\n\t\treturn [a, b];\n\t}\n};\n\nfor (let name in Mavo.Script.operators) {\n\tlet details = Mavo.Script.operators[name];\n\n\tif (details.scalar.length < 2) {\n\t\tMavo.Script.addUnaryOperator(name, details);\n\t}\n\telse {\n\t\tMavo.Script.addBinaryOperator(name, details);\n\t}\n}\n\nvar aliases = {\n\taverage: \"avg\",\n\tiff: \"iff IF\",\n\tsubtract: \"minus\",\n\tmultiply: \"mult product\",\n\tdivide: \"div\",\n\tlt: \"lessThan smaller\",\n\tgt: \"moreThan greater greaterThan bigger\",\n\teq: \"equal equality\"\n};\n\nfor (let name in aliases) {\n\taliases[name].split(/\\s+/g).forEach(alias => _[alias] = _[name]);\n}\n\n// Make function names case insensitive\nMavo.Functions._Trap = self.Proxy? new Proxy(_, {\n\tget: (functions, property) => {\n\t\tif (property in functions) {\n\t\t\treturn functions[property];\n\t\t}\n\n\t\tvar propertyL = property.toLowerCase && property.toLowerCase();\n\n\t\tif (propertyL && functions.hasOwnProperty(propertyL)) {\n\t\t\treturn functions[propertyL];\n\t\t}\n\n\t\tif (property in Math || propertyL in Math) {\n\t\t\treturn Math[property] || Math[propertyL];\n\t\t}\n\n\t\tif (property in self) {\n\t\t\treturn self[property];\n\t\t}\n\n\t\t// Prevent undefined at all costs\n\t\treturn property;\n\t},\n\n\t// Super ugly hack, but otherwise data is not\n\t// the local variable it should be, but the string \"data\"\n\t// so all property lookups fail.\n\thas: (functions, property) => property != \"data\"\n}) : Mavo.Functions;\n\n/**\n * Private helper methods\n */\nfunction numbers(array, args) {\n\tarray = Array.isArray(array)? array : (args? $$(args) : [array]);\n\n\treturn array.filter(number => !isNaN(number) && number !== \"\").map(n => +n);\n}\n\n})();\n\n(function($) {\n\nif (!self.Mavo) {\n\treturn;\n}\n\nvar dropboxURL = \"//cdnjs.cloudflare.com/ajax/libs/dropbox.js/0.10.2/dropbox.min.js\";\n\nMavo.Backend.register($.Class({\n\textends: Mavo.Backend,\n\tid: \"Dropbox\",\n\tconstructor: function() {\n\t\t// Transform the dropbox shared URL into something raw and CORS-enabled\n\t\tthis.url = new URL(this.url, location);\n\n\t\tif (this.url.protocol != \"dropbox:\") {\n\t\t\tthis.url.hostname = \"dl.dropboxusercontent.com\";\n\t\t\tthis.url.search = this.url.search.replace(/\\bdl=0|^$/, \"raw=1\");\n\t\t\tthis.permissions.on(\"read\"); // TODO check if file actually is publicly readable\n\t\t}\n\n\t\tthis.permissions.on(\"login\");\n\n\t\tthis.ready = $.include(self.Dropbox, dropboxURL).then((() => {\n\t\t\tvar referrer = new URL(document.referrer, location);\n\n\t\t\tif (referrer.hostname === \"www.dropbox.com\" && location.hash.indexOf(\"#access_token=\") === 0) {\n\t\t\t\t// Were in an OAuth response popup, do what you need then close this\n\t\t\t\tDropbox.AuthDriver.Popup.oauthReceiver();\n\t\t\t\t$.fire(window, \"load\"); // hack because dropbox.js didn't foresee use cases like ours :/\n\t\t\t\tclose();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.path = (this.mavo.element.getAttribute(\"mv-dropbox-path\") || \"\") + (new URL(this.url)).pathname.match(/[^/]*$/)[0];\n\n\t\t\tthis.key = this.mavo.element.getAttribute(\"mv-dropbox-key\") || \"fle6gsc61w5v79j\";\n\n\t\t\tthis.client = new Dropbox.Client({ key: this.key });\n\t\t})).then(() => {\n\t\t\tthis.login(true);\n\t\t});\n\t},\n\n\t/**\n\t * Saves a file to the backend.\n\t * @param {Object} file - An object with name & data keys\n\t * @return {Promise} A promise that resolves when the file is saved.\n\t */\n\tput: function(file = this.getFile()) {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.client.writeFile(file.name, file.dataString, function(error, stat) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn reject(Error(error));\n\t\t\t\t}\n\n\t\t\t\tconsole.log(\"File saved as revision \" + stat.versionTag);\n\t\t\t\tresolve(file);\n\t\t\t});\n\t\t});\n\t},\n\n\tlogin: function(passive) {\n\t\treturn this.ready.then(() => {\n\t\t\treturn this.client.isAuthenticated()? Promise.resolve() : new Promise((resolve, reject) => {\n\t\t\t\tthis.client.authDriver(new Dropbox.AuthDriver.Popup({\n\t\t\t\t    receiverUrl: new URL(location) + \"\"\n\t\t\t\t}));\n\n\t\t\t\tthis.client.authenticate({interactive: !passive}, (error, client) => {\n\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\treject(Error(error));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (this.client.isAuthenticated()) {\n\t\t\t\t\t\t// TODO check if can actually edit the file\n\t\t\t\t\t\tthis.permissions.on([\"logout\", \"edit\"]);\n\n\t\t\t\t\t\tresolve();\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tthis.permissions.off([\"logout\", \"edit\", \"add\", \"delete\"]);\n\n\t\t\t\t\t\treject();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}).then(() => {\n\t\t\t// Not returning a promise here, since processes depending on login don't need to wait for this\n\t\t\tthis.client.getAccountInfo((error, accountInfo) => {\n\t\t\t\tif (!error) {\n\t\t\t\t\t$.fire(this.mavo.element, \"mavo:login\", $.extend({backend: this}, accountInfo));\n\t\t\t\t}\n\t\t\t});\n\t\t}).catch(() => {});\n\t},\n\n\tlogout: function() {\n\t\treturn !this.client.isAuthenticated()? Promise.resolve() : new Promise((resolve, reject) => {\n\t\t\tthis.client.signOut(null, () => {\n\t\t\t\tthis.permissions.off([\"edit\", \"add\", \"delete\"]).on(\"login\");\n\n\t\t\t\tthis.mavo.element._.fire(\"mavo:logout\", {backend: this});\n\t\t\t\tresolve();\n\t\t\t});\n\t\t});\n\n\t},\n\n\tstatic: {\n\t\ttest: function(url) {\n\t\t\turl = new URL(url, location);\n\t\t\treturn /dropbox.com/.test(url.host) || url.protocol === \"dropbox:\";\n\t\t}\n\t}\n}));\n\n})(Bliss);\n\n(function($) {\n\nif (!self.Mavo) {\n\treturn;\n}\n\nvar _ = Mavo.Backend.register($.Class({\n\textends: Mavo.Backend,\n\tid: \"Github\",\n\tconstructor: function() {\n\t\tthis.permissions.on(\"login\");\n\n\t\tthis.key = this.mavo.element.getAttribute(\"mv-github-key\") || \"7e08e016048000bc594e\";\n\n\t\t// Extract info for username, repo, branch, filepath from URL\n\t\tvar parsedURL = _.parseURL(this.url);\n\n\t\tif (parsedURL.username) {\n\t\t\t$.extend(this, parsedURL);\n\t\t\tthis.repo = this.repo || \"mv-data\";\n\t\t\tthis.branch = this.branch || \"master\";\n\t\t\tthis.path = this.path || `${this.mavo.id}.json`;\n\t\t\tthis.apiCall = `repos/${this.username}/${this.repo}/contents/${this.path}`;\n\t\t}\n\t\telse {\n\t\t\tthis.apiCall = this.url.pathname.slice(1);\n\t\t}\n\n\t\tthis.permissions.on(\"read\");\n\n\t\tthis.login(true);\n\t},\n\n\tget authenticated () {\n\t\treturn !!this.accessToken;\n\t},\n\n\t/**\n\t * Helper method to make a request with the Github API\n\t */\n\treq: function(call, data, method = \"GET\", o = {method: method}) {\n\t\tif (data) {\n\t\t\to.data =  JSON.stringify(data);\n\t\t}\n\n\t\tvar request = $.extend(o, {\n\t\t\tresponseType: \"json\"\n\t\t});\n\n\t\tif (this.authenticated) {\n\t\t\trequest.headers = {\n\t\t\t\t\"Authorization\": `token ${this.accessToken}`\n\t\t\t};\n\t\t}\n\n\t\treturn $.fetch(_.apiDomain + call, request)\n\t\t.catch(err => {\n\t\t\tif (err && err.xhr) {\n\t\t\t\treturn Promise.reject(err.xhr);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.mavo.error(\"Something went wrong while connecting to Github\", err);\n\t\t\t}\n\t\t})\n\t\t.then(xhr => Promise.resolve(xhr.response));\n\t},\n\n\tget: function() {\n\t\treturn this.req(this.apiCall)\n\t\t       .then(response => Promise.resolve(this.repo? _.atob(response.content) : response));\n\t},\n\n\t/**\n\t * Saves a file to the backend.\n\t * @param {String} serialized - Serialized data\n\t * @param {String} path - Optional file path\n\t * @return {Promise} A promise that resolves when the file is saved.\n\t */\n\tput: function(serialized, path) {\n\t\tvar fileCall = path? `repos/${this.username}/${this.repo}/contents/${path}` : this.apiCall;\n\n\t\treturn Promise.resolve(this.repoInfo || this.req(\"user/repos\", {\n\t\t\tname: this.repo\n\t\t}, \"POST\"))\n\t\t.then(repoInfo => {\n\t\t\tthis.repoInfo = repoInfo;\n\n\t\t\treturn this.req(fileCall, {\n\t\t\t\tref: this.branch\n\t\t\t});\n\t\t})\n\t\t.then(fileInfo => this.req(fileCall, {\n\t\t\tmessage: `Updated ${fileInfo.name || \"file\"}`,\n\t\t\tcontent: _.btoa(serialized),\n\t\t\tbranch: this.branch,\n\t\t\tsha: fileInfo.sha\n\t\t}, \"PUT\"), xhr => {\n\t\t\tif (xhr.status == 404) {\n\t\t\t\t// File does not exist, create it\n\t\t\t\treturn this.req(fileCall, {\n\t\t\t\t\tmessage: \"Created file\",\n\t\t\t\t\tcontent: _.btoa(serialized),\n\t\t\t\t\tbranch: this.branch\n\t\t\t\t}, \"PUT\");\n\t\t\t}\n\n\t\t\treturn xhr;\n\t\t});\n\t},\n\n\tlogin: function(passive) {\n\t\treturn this.ready.then(() => {\n\t\t\tif (this.authenticated) {\n\t\t\t\treturn Promise.resolve();\n\t\t\t}\n\n\t\t\treturn (new Promise((resolve, reject) => {\n\t\t\t\tif (passive) {\n\t\t\t\t\tthis.accessToken = localStorage[\"mavo:githubtoken\"];\n\n\t\t\t\t\tif (this.accessToken) {\n\t\t\t\t\t\tresolve(this.accessToken);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\t// Show window\n\t\t\t\t\tvar popup = {\n\t\t\t\t\t\twidth: Math.min(1000, innerWidth - 100),\n\t\t\t\t\t\theight: Math.min(800, innerHeight - 100)\n\t\t\t\t\t};\n\n\t\t\t\t\tpopup.top = (innerHeight - popup.height)/2 + (screen.top || screenTop);\n\t\t\t\t\tpopup.left = (innerWidth - popup.width)/2 + (screen.left || screenLeft);\n\n\t\t\t\t\tthis.authPopup = open(`https://github.com/login/oauth/authorize?client_id=${this.key}&scope=repo,gist&state=${location.href}`,\n\t\t\t\t\t\t\"popup\", `width=${popup.width},height=${popup.height},left=${popup.left},top=${popup.top}`);\n\n\t\t\t\t\taddEventListener(\"message\", evt => {\n\t\t\t\t\t\tif (evt.source === this.authPopup) {\n\t\t\t\t\t\t\tthis.accessToken = localStorage[\"mavo:githubtoken\"] = evt.data;\n\n\t\t\t\t\t\t\tif (!this.accessToken) {\n\t\t\t\t\t\t\t\treject(Error(\"Authentication error\"));\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve(this.accessToken);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}))\n\t\t\t.then(() => this.getUser())\n\t\t\t.catch(xhr => {\n\t\t\t\tif (xhr.status == 401) {\n\t\t\t\t\t// Unauthorized. Access token we have is invalid, discard it\n\t\t\t\t\tthis.logout();\n\t\t\t\t}\n\t\t\t})\n\t\t\t.then(u => {\n\t\t\t\tif (this.user) {\n\t\t\t\t\tthis.permissions.on(\"logout\");\n\n\t\t\t\t\tif (this.repo) {\n\t\t\t\t\t\treturn this.req(`repos/${this.username}/${this.repo}`)\n\t\t\t\t\t\t\t.then(repoInfo => {\n\t\t\t\t\t\t\t\tthis.repoInfo = repoInfo;\n\n\t\t\t\t\t\t\t\tif (repoInfo.permissions.push) {\n\t\t\t\t\t\t\t\t\tthis.permissions.on([\"edit\", \"save\"]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.catch(xhr => {\n\t\t\t\t\t\t\t\tif (xhr.status == 404) {\n\t\t\t\t\t\t\t\t\t// Repo does not exist so we can't check permissions\n\t\t\t\t\t\t\t\t\t// Just check if authenticated user is the same as our URL username\n\t\t\t\t\t\t\t\t\tif (this.user.login.toLowerCase() == this.username.toLowerCase()) {\n\t\t\t\t\t\t\t\t\t\tthis.permissions.on([\"edit\", \"save\"]);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t},\n\n\tlogout: function() {\n\t\tif (this.authenticated) {\n\t\t\tlocalStorage.removeItem(\"mavo:githubtoken\");\n\t\t\tdelete this.accessToken;\n\n\t\t\tthis.permissions.off([\"edit\", \"add\", \"delete\", \"save\"]).on(\"login\");\n\n\t\t\tthis.mavo.element._.fire(\"mavo:logout\", {backend: this});\n\t\t}\n\n\t\treturn Promise.resolve();\n\t},\n\n\tgetUser: function() {\n\t\treturn this.req(\"user\").then(accountInfo => {\n\t\t\tthis.user = accountInfo;\n\n\t\t\tvar name = accountInfo.name || accountInfo.login;\n\t\t\t$.fire(this.mavo.element, \"mavo:login\", {\n\t\t\t\tbackend: this,\n\t\t\t\tname: `<a href=\"https://github.com/${accountInfo.login}\" target=\"_blank\">\n\t\t\t\t\t\t\t<img class=\"mv-avatar\" src=\"${accountInfo.avatar_url}\" /> ${name}\n\t\t\t\t\t\t</a>`\n\t\t\t});\n\t\t});\n\t},\n\n\tstatic: {\n\t\tapiDomain: \"https://api.github.com/\",\n\n\t\ttest: function(url) {\n\t\t\turl = new URL(url, location);\n\t\t\treturn /\\bgithub.com|raw.githubusercontent.com/.test(url.host);\n\t\t},\n\n\t\t/**\n\t\t * Parse Github URLs, return username, repo, branch, path\n\t\t */\n\t\tparseURL: function(url) {\n\t\t\tvar ret = {};\n\n\t\t\turl = new URL(url, location);\n\n\t\t\tvar path = url.pathname.slice(1).split(\"/\");\n\n\t\t\tret.username = path.shift();\n\t\t\tret.repo = path.shift();\n\n\t\t\tif (/raw.githubusercontent.com$/.test(url.host)) {\n\t\t\t\tret.branch = path.shift();\n\t\t\t}\n\t\t\telse if (/api.github.com$/.test(url.host)) {\n\t\t\t\t// raw API call, stop parsing and just return\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\telse if (/github.com$/.test(url.host) && path[0] == \"blob\") {\n\t\t\t\tpath.shift();\n\t\t\t\tret.branch = path.shift();\n\t\t\t}\n\n\t\t\tret.path = path.join(\"/\");\n\n\t\t\treturn ret;\n\t\t},\n\n\t\t// Fix atob() and btoa() so they can handle Unicode\n\t\tbtoa: str => btoa(unescape(encodeURIComponent(str))),\n\t\tatob: str => decodeURIComponent(escape(window.atob(str)))\n\t}\n}));\n\n})(Bliss);\n\n//# sourceMappingURL=maps/mavo.js.map\n"]}